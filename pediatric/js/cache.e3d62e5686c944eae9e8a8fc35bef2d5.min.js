(function($){let
scroll_position=0,scroll_direction='down',desktop_header=$('section.header > .content');$('body').on('click','a.openchair-widget',function(e){if(typeof OpenChair!=='undefined')e.preventDefault()});$.extend($.expr[':'],{topinview:function(el){let wintop=$(window).scrollTop(),winbtm=$(window).scrollTop()+$(window).height(),eltop=$(el).offset().top,elbtm=$(el).offset().top+$(el).outerHeight();return winbtm>=eltop&&wintop<=elbtm&&scroll_direction=='down'}});$.extend($.expr[':'],{bottominview:function(el){let wintop=$(window).scrollTop(),winbtm=$(window).scrollTop()+$(window).height(),eltop=$(el).offset().top,elbtm=$(el).offset().top+$(el).outerHeight();return wintop<=elbtm&&winbtm>=eltop&&scroll_direction=='up'}});$.extend($.expr[':'],{inview:function(el){let wintop=$(window).scrollTop(),winbtm=$(window).scrollTop()+$(window).height(),eltop=$(el).offset().top,elbtm=$(el).offset().top+$(el).outerHeight();return(wintop<=elbtm&&winbtm>=eltop&&scroll_direction=='up')||(winbtm>=eltop&&wintop<=elbtm&&scroll_direction=='down')}});$.extend($.expr[':'],{inview300:function(el){let wintop=$(window).scrollTop(),winbtm=$(window).scrollTop()+$(window).height(),eltop=$(el).offset().top+300,elbtm=$(el).offset().top+300+$(el).height();return elbtm>=wintop&&eltop<=winbtm}});$.extend($.expr[':'],{inview600:function(el){let wintop=$(window).scrollTop(),winbtm=$(window).scrollTop()+$(window).height(),eltop=$(el).offset().top+600,elbtm=$(el).offset().top+600+$(el).height();return elbtm>=wintop&&eltop<=winbtm}});if(window.objectFitImages)objectFitImages($('img.bg-img'));$(window).on('scroll',function(){scroll_direction=$(window).scrollTop()>scroll_position?'down':'up';scroll_position=$(window).scrollTop()});$.extend($.easing,{easeOutCubic:function(x,t,b,c,d){return c*((t=t/d-1)*t*t+1)+b},});$(document).on('click','a[href="#"]',function(e){e.preventDefault()});$('.hero-scroll').on('click',function(e){e.preventDefault();scrollToPosition($('.hero').innerHeight())});$('a.candidate-iframe-src').on('click',function(e){e.preventDefault();$('.iframe.candidate-iframe iframe').attr('src',$(this).attr('href'));scrollToTarget($('#all'))});$(document).on('click','a[href*="#"]:not([href="#"])',function(){if(window.location.pathname.replace(/^\//,'')==this.pathname.replace(/^\//,'')&&window.location.hostname==this.hostname){var target=$(this.hash);target=target.length?target:$('[name='+this.hash.slice(1)+']');if(target.length){scrollToTarget(target);return!1}}});$(window).on('scroll resize',function(){$('.owl-carousel:inview300').trigger('play.owl.autoplay');$('.owl-carousel:not(:inview300)').trigger('stop.owl.autoplay')});$(window).on('load',function(e){if(location.href.split("#")[1]){var anchor=location.href.split("#")[1];var target=$('#'+anchor+', a[name="'+anchor+'"]');if(target.length){e.preventDefault();scrollToTarget(target);return!1}}});function scrollToPosition(position){$('html, body').animate({scrollTop:(position+($('#wpadminbar').outerHeight()||0))},{easing:'easeOutCubic',duration:1000})}
function getScrollTopCalculation(target){var header=$(window).width()<=782?$('#mobile-navigation'):$('section.header > .content');return Math.floor(target.offset().top-header.outerHeight()-($('#wpadminbar').outerHeight()||0)-120)}
function scrollToTarget(target){if($(window).width()<782){var header=$('#mobile-header');var utilityHeader=$('.header-utility');$('html, body').animate({scrollTop:target[0].getBoundingClientRect().y+$(window).scrollTop()-parseInt((target.css('margin-top')).replace('px',''))-header.outerHeight()-utilityHeader.outerHeight()-($('#wpadminbar').outerHeight()||0)+($('.hero .conversation').length?((1-window.hero_scroll_progress)||0)*(window.hero_scroll_delta||0):0)},250)}else{$('html, body').animate({scrollTop:getScrollTopCalculation(target)},250);if($(window).width()<=782)$('html').removeClass('mobileMenu mobileNavigating')}}
$('.super-nav > ul > li.menu-item-has-children > a').on('click',function(e){e.preventDefault();$('.super-nav > ul > li.menu-item-has-children.active').not($(this).parent()).removeClass('active');$(this).parent().toggleClass('active');$('li.expand-active').toggleClass('supernav-inactive',$('.super-nav li.active').length>0)});$('ul.service-tiles > li').hover(function(){$(this).parent().addClass('hover')},function(){$(this).parent().removeClass('hover')});$('.primary-nav > ul > li').hover(function(){$(this).parent().children('li').not($(this)).addClass('inactive')},function(){$(this).parent().children('li').not($(this)).removeClass('inactive')});function onPageChanged(){if(typeof($('section.header').data('padding'))!=='undefined'){$('section.header').data('padding',parseInt($('section.header').css('padding-top').replace('px','')))}
$('html').toggleClass('sticky-header',$(window).scrollTop()>$('section.header').data('padding-top'));var header_height=((desktop_header.outerHeight()||0)+($('#wpadminbar').outerHeight()||0));$('.cta.stick-header').each(function(){$(this).toggleClass('stuck',$(this).parent().get(0).getBoundingClientRect().top<=header_height);if($(this).hasClass('stuck')&&!$(this).hasClass('insights-cta')){$(this).attr('style','top:'+header_height+'px!important')}
else{$(this).removeAttr('style')}});var header_copy_selector=$('section.hero > .content');if(header_copy_selector.length){$('html').toggleClass('solid-header',header_copy_selector.get(0).getBoundingClientRect().top<=header_height)}
$('aside > .widgets').css('top',((4*12)+2*(desktop_header.outerHeight()||0)+($('#wpadminbar').outerHeight()||0)))}
if($('body').hasClass('page-template-virtual-monitoring')){$('section.video-full-with-text .image-container').on('click',function(){if(!$(this).find('.video-container').length){$('section.video-full-with-text .image-container').addClass('hidden');$('section.video-full-with-text .content-container').addClass('hidden');$('section.video-full-with-text .inner-content').append('<div class="video-container"><iframe width="1170" height="678" src="https://www.youtube.com/embed/K3uSUdiSg0g?rel=0&controls=2&autoplay=1&showinfo=0&modestbranding=0" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div>')}})}
if($('body').hasClass('page-template-invisalign-aligners')){$('section.invisalign-carousel .column').toggleClass('active',$('section.invisalign-carousel:inview').length);$('section.faq-boxes .boxes .box a.mobile:not(.hide)').on('click',function(){$(this).parent().addClass('active')});$('section.faq-boxes .boxes .box a.mobile.hide').on('click',function(){$(this).parent().removeClass('active')})}
if(typeof($('section.header').data('padding-top'))!=='undefined'){$('section.header').data('padding-top',parseInt($('section.header').css('padding-top').replace('px','')||0))}
$(document).on('ready',function(){onPageChanged()});$(window).on('scroll load resize',function(){onPageChanged();if($('body').hasClass('page-template-virtual-monitoring')){if($(window).width()>949){if($('.steps-with-lines .step-one:inview').length>0){$('.steps-with-lines .step-one .image').addClass('active')}
else{$('.steps-with-lines .step-one .image').removeClass('active')}
if($('.steps-with-lines .step-two:inview').length>0){$('.steps-with-lines .step-two .image').addClass('active')}
else{$('.steps-with-lines .step-two .image').removeClass('active')}
if($('.steps-with-lines .step-three:inview').length>0){$('.steps-with-lines .step-three .image').addClass('active')}
else{$('.steps-with-lines .step-three .image').removeClass('active')}}}
if($('body').hasClass('page-template-invisalign-aligners')){if($('section.invisalign-carousel:inview').length>0){$.each($('section.invisalign-carousel .column'),function(k,e){setTimeout(function(){$(e).addClass('active');$(e).css('opacity','1')},1000)})}
else{$.each($('section.invisalign-carousel .column'),function(k,e){$(e).removeClass('active');$(e).css('opacity','0')})}
if($(window).width()>949){if($('.hero.full .content-container.invisalign.animate-in:inview300').length>0){$('html').addClass('time-for-content')}else{$('html').removeClass('time-for-content')}}}
if($('body').hasClass('page-template-location-home')||$('body').hasClass('page-template-patient-care-philosophy')||$('body').hasClass('page-template-brand-home')){if($('.hero.full .content-container.team.animate-in:inview300').length>0){$('html').addClass('time-for-content')}else{$('html').removeClass('time-for-content')}
if($(window).width()>782){if($('.giving-back .main-container:inview').length>0){$('.giving-back .main-container .content-container').css('left','0');$('.giving-back .main-container .img-container').css('right','0')}else{$('.giving-back .main-container .content-container').css('left','-600px');$('.giving-back .main-container .img-container').css('right','-680px')}}}
if($('body').hasClass('page-template-patient-care-philosophy')){if($('.three-cols-cards:inview300').length>0){$('.three-cols-cards .card:nth-child(1)').addClass('active');setTimeout(function(){$('.three-cols-cards .card:nth-child(2)').addClass('active')},500);setTimeout(function(){$('.three-cols-cards .card:nth-child(3)').addClass('active')},1000)}else{$('.three-cols-cards .card').removeClass('active')}}
if($('body').hasClass('page-template-why-orthodontic-treatment')){if($('.service.for-ages.first .container:inview300').length>0){$('.service.for-ages.first .container aside .img-container img').addClass('active')}else{$('.service.for-ages.first .container aside .img-container img.active').removeClass('active')}
if($('.service.for-ages.second .container:inview300').length>0){$('.service.for-ages.second .container aside .img-container img').addClass('active')}else{$('.service.for-ages.second .container aside .img-container img.active').removeClass('active')}
if($('.service.for-ages.third .container:inview300').length>0){$('.service.for-ages.third .container aside .img-container img').addClass('active')}else{$('.service.for-ages.third .container aside .img-container img.active').removeClass('active')}
if($('.copy.with-image.first .main-container:inview300').length>0){$('.copy.with-image.first .main-container aside .img-container img').addClass('active');$('.copy.with-image.first .main-container article p.slide').addClass('active')}else{$('.copy.with-image.first .main-container aside .img-container img.active').removeClass('active');$('.copy.with-image.first .main-container article p.slide').removeClass('active')}
if($('.copy.with-image.second .main-container:inview300').length>0){$('.copy.with-image.second .main-container aside .img-container img').addClass('active');$('.copy.with-image.second .main-container article p.slide').addClass('active')}else{$('.copy.with-image.second .main-container aside .img-container img.active').removeClass('active');$('.copy.with-image.second .main-container article p.slide').removeClass('active')}}
if($('body').hasClass('page-template-safer-orthodontic-care')){if($('.two-cols-carousel-with-image.first .main-container:inview300').length>0){$('.two-cols-carousel-with-image.first .main-container aside .img-container img').addClass('active')}else{$('.two-cols-carousel-with-image.first .main-container aside .img-container img.active').removeClass('active')}
if($('.two-cols-carousel-with-image.second .main-container:inview300').length>0){$('.two-cols-carousel-with-image.second .main-container aside .img-container img').addClass('active')}else{$('.two-cols-carousel-with-image.second .main-container aside .img-container img.active').removeClass('active')}
if($('.two-cols-carousel-with-image.third .main-container:inview300').length>0){$('.two-cols-carousel-with-image.third .main-container aside .img-container img').addClass('active')}else{$('.two-cols-carousel-with-image.third .main-container aside .img-container img.active').removeClass('active')}
if($('.two-cols-carousel-with-image.fourth .main-container:inview300').length>0){$('.two-cols-carousel-with-image.fourth .main-container aside .img-container img').addClass('active')}else{$('.two-cols-carousel-with-image.fourth .main-container aside .img-container img.active').removeClass('active')}}
if($(window).width()>670){if($('section.footer:inview').length>0){$('section.footer .widget.schedule-consultation').css('right','0px');$('section.footer .widget.schedule-consultation').css('opacity','1')}else{$('section.footer .widget.schedule-consultation').css('right','-800px');$('section.footer .widget.schedule-consultation').css('opacity','0')}}else{$('section.footer .widget.schedule-consultation').css('right','0px');$('section.footer .widget.schedule-consultation').css('opacity','1')}
if($(window).width()<375){$('section.footer .widget.schedule-consultation').css('left','-28px')}
if($('section').hasClass('instruction-downloads')){if($(window).width()>782){if($('ul.icons.cols-4:inview, ul.icons.cols-3:inview').length>0){$.each($('ul.icons.cols-4 li, ul.icons.cols-3 li'),function(k,e){setTimeout(function(){$(e).addClass('active')},1000)})}
else{$.each($('ul.icons.cols-4 li, ul.icons.cols-3 li'),function(k,e){})}}else{$.each($('ul.icons.cols-4 li, ul.icons.cols-3 li'),function(){if($(this).is(':inview')){$(this).addClass('active')}else{}})}}
if($('body').hasClass('page-template-braces')){if($('.hero.full .content-container.straight-talk.animate-in:inview300').length>0){$('html').addClass('time-for-content')}else{$('html').removeClass('time-for-content')}}});$('.filter-toggle').on('click',function(){$(this).closest('.filter').toggleClass('active').parent().toggleClass('active')});$(window).on('resize',function(){if($(window).width()>782){$('.filters-container').show()}});$('#virtual-consultation ul li a').on('click',function(e){e.preventDefault();let link=$(this).attr('id');let text=$(this).html();$('#start-vc').removeClass('hidden').attr("href",link);$('.fancy-select-title').html(text);$('.options').addClass('hidden')});$('section.maps .location-info .links > div').on('mouseenter',function(e){$(this).parent().children('.active').removeClass('active');$(this).addClass('active')});$('section.maps .location-info .links > div').on('mouseleave',function(e){$(this).parent().parent().find('.links > div.active').removeClass('active')});$(window).trigger('resize');$('.carousel-item .content a.read-more.mobile').on('click',function(key,element){$(this).parent().parent().children('p.primary.desktop').removeClass('desktop');$(this).parent().parent().children('p.primary.mobile').css('opacity',0);$(this).parent().parent().children('a.read-less.mobile').addClass('active')});$('.carousel-item .content a.read-less.mobile').on('click',function(key,element){$(this).removeClass('active');$(this).parent().children('p.primary:not(.name)').first().addClass('desktop');$(this).parent().children('p.primary.mobile').css('opacity',1)});$('p:empty').remove()})(jQuery);!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"undefined"!=typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function($){"use strict";$.fn.fileuploader=function(q){return this.each(function(t,r){var s=$(r),p=null,o=null,l=null,sl=[],n=$.extend(!0,{},$.fn.fileuploader.defaults,q),f={init:function(){return s.closest(".fileuploader").length||s.wrap('<div class="fileuploader"></div>'),p=s.closest(".fileuploader"),f.set("language"),f.set("attrOpts"),f.isSupported()?(!n.beforeRender||!$.isFunction(n.beforeRender)||!1!==n.beforeRender(p,s))&&(f.redesign(),n.files&&f.files.append(n.files),f.rendered=!0,n.afterRender&&$.isFunction(n.afterRender)&&n.afterRender(l,p,o,s),f.disabled||f.bindUnbindEvents(!0),s.closest("form").on("reset",f.reset),void(f._itFl.length||f.reset())):(n.onSupportError&&$.isFunction(n.onSupportError)&&n.onSupportError(p,s),!1)},bindUnbindEvents:function(e){e&&f.bindUnbindEvents(!1),s[e?"on":"off"]("focus blur change",f.onEvent),n.changeInput&&o!==s&&o[e?"on":"off"]("click",f.clickHandler),n.dragDrop&&n.dragDrop.container.length&&(n.dragDrop.container[e?"on":"off"]("drag dragstart dragend dragover dragenter dragleave drop",function(e){e.preventDefault()}),n.dragDrop.container[e?"on":"off"]("drop",f.dragDrop.onDrop),n.dragDrop.container[e?"on":"off"]("dragover",f.dragDrop.onDragEnter),n.dragDrop.container[e?"on":"off"]("dragleave",f.dragDrop.onDragLeave)),f.isUploadMode()&&n.clipboardPaste&&$(window)[e?"on":"off"]("paste",f.clipboard.paste),n.sorter&&n.thumbnails&&n.thumbnails._selectors.sorter&&f.sorter[e?"init":"destroy"]()},redesign:function(){if(o=s,n.theme&&p.addClass("fileuploader-theme-"+n.theme),n.changeInput){switch((typeof n.changeInput).toLowerCase()){case"boolean":o=$('<div class="fileuploader-input"><div class="fileuploader-input-caption"><span>'+f._assets.textParse(n.captions.feedback)+'</span></div><button type="button" class="fileuploader-input-button"><span>'+f._assets.textParse(n.captions.button)+"</span></button></div>");break;case"string":" "!=n.changeInput&&(o=$(f._assets.textParse(n.changeInput,n)));break;case"object":o=$(n.changeInput);break;case"function":o=$(n.changeInput(s,p,n,f._assets.textParse))}s.after(o),s.css({position:"absolute","z-index":"-9999",height:"0",width:"0",padding:"0",margin:"0","line-height":"0",outline:"0",border:"0",opacity:"0"})}n.thumbnails&&f.thumbnails.create(),n.dragDrop&&(n.dragDrop="object"!=typeof n.dragDrop?{container:null}:n.dragDrop,n.dragDrop.container=n.dragDrop.container?$(n.dragDrop.container):o)},clickHandler:function(e){e.preventDefault(),f.clipboard._timer?f.clipboard.clean():s.click()},onEvent:function(e){switch(e.type){case"focus":p&&p.addClass("fileuploader-focused");break;case"blur":p&&p.removeClass("fileuploader-focused");break;case"change":f.onChange.call(this)}n.listeners&&$.isFunction(n.listeners[e.type])&&n.listeners[e.type].call(s,p)},set:function(e,t){switch(e){case"attrOpts":for(var i=["limit","maxSize","fileMaxSize","extensions","changeInput","theme","addMore","listInput","files"],r=0;r<i.length;r++){var a="data-fileuploader-"+i[r];if(f._assets.hasAttr(a))switch(i[r]){case"changeInput":case"addMore":case"listInput":n[i[r]]=-1<["true","false"].indexOf(s.attr(a))?"true"==s.attr(a):s.attr(a);break;case"extensions":n[i[r]]=s.attr(a).replace(/ /g,"").split(",");break;case"files":n[i[r]]=JSON.parse(s.attr(a));break;default:n[i[r]]=s.attr(a)}s.removeAttr(a)}null==s.attr("disabled")&&null==s.attr("readonly")&&0!==n.limit||(f.disabled=!0),(!n.limit||n.limit&&2<=n.limit)&&(s.attr("multiple","multiple"),n.inputNameBrackets&&"[]"!=s.attr("name").slice(-2)&&s.attr("name",s.attr("name")+"[]")),!0===n.listInput&&(n.listInput=$('<input type="hidden" name="fileuploader-list-'+s.attr("name").replace("[]","").split("[").pop().replace("]","")+'">').insertBefore(s)),"string"==typeof n.listInput&&0==$(n.listInput).length&&(n.listInput=$('<input type="hidden" name="'+n.listInput+'">').insertBefore(s)),f.set("disabled",f.disabled),!n.fileMaxSize&&n.maxSize&&(n.fileMaxSize=n.maxSize);break;case"language":var l=$.fn.fileuploader.languages;"string"==typeof n.captions&&(n.captions in l?n.captions=l[n.captions]:n.captions=$.extend(!0,{},$.fn.fileuploader.defaults.captions));break;case"disabled":f.disabled=t,p[f.disabled?"addClass":"removeClass"]("fileuploader-disabled"),s[f.disabled?"attr":"removeAttr"]("disabled","disabled"),f.rendered&&f.bindUnbindEvents(!t);break;case"feedback":t=t||f._assets.textParse(0<f._itFl.length?n.captions.feedback2:n.captions.feedback,{length:f._itFl.length}),$(!o.is(":file"))&&o.find(".fileuploader-input-caption span").html(t);break;case"input":var d=f._assets.copyAllAttributes($('<input type="file">'),s,!0);f.bindUnbindEvents(!1),s.after(s=d).remove(),f.bindUnbindEvents(!0);break;case"prevInput":0<sl.length&&(f.bindUnbindEvents(!1),sl[t].remove(),sl.splice(t,1),s=sl[sl.length-1],f.bindUnbindEvents(!0));break;case"nextInput":d=f._assets.copyAllAttributes($('<input type="file">'),s);f.bindUnbindEvents(!1),0<sl.length&&0==sl[sl.length-1].get(0).files.length?s=sl[sl.length-1]:(-1==sl.indexOf(s)&&sl.push(s),sl.push(d),s.after(s=d)),f.bindUnbindEvents(!0);break;case"listInput":n.listInput&&n.listInput.val(f.files.list(!0,null,!1,t))}},onChange:function(e,t){var i=s.get(0).files;if(t){if(!t.length)return f.set("input",""),f.files.clear(),!1;i=t}if(f.clipboard._timer&&f.clipboard.clean(),!f.isDefaultMode()||(f.reset(),0!=i.length)){if(n.beforeSelect&&$.isFunction(n.beforeSelect)&&0==n.beforeSelect(i,l,p,o,s))return!1;for(var r=0,a=0;a<i.length;a++){var d=i[a],u=f._itFl[f.files.add(d,"choosed")],c=f.files.check(u,i,0==a);if(!0===c)n.thumbnails&&f.thumbnails.item(u),f.isUploadMode()&&f.upload.prepare(u),n.onSelect&&$.isFunction(n.onSelect)&&n.onSelect(u,l,p,o,s),r++;else if(f.files.remove(u,!0),c[2]||(f.isDefaultMode()&&(f.set("input",""),f.reset(),c[3]=!0),c[1]&&f._assets.dialogs.alert(c[1],u,l,p,o,s)),c[3])break}f.isUploadMode()&&0<r&&f.set("input",""),f.set("feedback",null),f.isAddMoreMode()&&0<r&&f.set("nextInput"),f.set("listInput",null),n.afterSelect&&$.isFunction(n.afterSelect)&&n.afterSelect(l,p,o,s)}},thumbnails:{create:function(){null!=n.thumbnails.beforeShow&&$.isFunction(n.thumbnails.beforeShow)&&n.thumbnails.beforeShow(p,o,s);var e=$(f._assets.textParse(n.thumbnails.box)).appendTo(n.thumbnails.boxAppendTo?n.thumbnails.boxAppendTo:p);l=e.is(n.thumbnails._selectors.list)?e:e.find(n.thumbnails._selectors.list),n.thumbnails._selectors.popup_open&&l.on("click",n.thumbnails._selectors.popup_open,function(e){e.preventDefault();var t=$(this).closest(n.thumbnails._selectors.item),o=f.files.find(t);o&&o.popup&&o.html.hasClass("file-has-popup")&&f.thumbnails.popup(o)}),f.isUploadMode()&&n.thumbnails._selectors.start&&l.on("click",n.thumbnails._selectors.start,function(e){if(e.preventDefault(),f.locked)return!1;var t=$(this).closest(n.thumbnails._selectors.item),o=f.files.find(t);o&&f.upload.send(o,!0)}),f.isUploadMode()&&n.thumbnails._selectors.retry&&l.on("click",n.thumbnails._selectors.retry,function(e){if(e.preventDefault(),f.locked)return!1;var t=$(this).closest(n.thumbnails._selectors.item),o=f.files.find(t);o&&f.upload.retry(o)}),n.thumbnails._selectors.rotate&&l.on("click",n.thumbnails._selectors.rotate,function(e){if(e.preventDefault(),f.locked)return!1;var t=$(this).closest(n.thumbnails._selectors.item),o=f.files.find(t);o&&o.editor&&(o.editor.rotate(),o.editor.save())}),n.thumbnails._selectors.remove&&l.on("click",n.thumbnails._selectors.remove,function(e){if(e.preventDefault(),f.locked)return!1;function t(e){f.files.remove(i)}var o=$(this).closest(n.thumbnails._selectors.item),i=f.files.find(o);i&&(i.upload&&"successful"!=i.upload.status?f.upload.cancel(i):n.thumbnails.removeConfirmation&&!i.choosed?f._assets.dialogs.confirm(f._assets.textParse(n.captions.removeConfirmation,i),t):t())})},clear:function(){l&&l.html("")},item:function(t,e){t.icon=f.thumbnails.generateFileIcon(t.format,t.extension),t.image='<div class="fileuploader-item-image"></div>',t.progressBar=f.isUploadMode()?'<div class="fileuploader-progressbar"><div class="bar"></div></div>':"",t.html=$(f._assets.textParse(t.appended&&n.thumbnails.item2?n.thumbnails.item2:n.thumbnails.item,t)),t.progressBar=t.html.find(".fileuploader-progressbar"),t.html.addClass("file-type-"+(t.format?t.format:"no")+" file-ext-"+(t.extension?t.extension:"no")),e?e.replaceWith(t.html):t.html[n.thumbnails.itemPrepend?"prependTo":"appendTo"](l),n.thumbnails.popup&&!1!==t.data.popup&&(t.html.addClass("file-has-popup"),t.popup={open:function(){f.thumbnails.popup(t)}}),f.thumbnails.renderThumbnail(t),t.renderThumbnail=function(e){e&&t.popup&&t.popup.close&&(t.popup.close(),t.popup={open:t.popup.open}),f.thumbnails.renderThumbnail(t,!0,e)},null!=n.thumbnails.onItemShow&&$.isFunction(n.thumbnails.onItemShow)&&n.thumbnails.onItemShow(t,l,p,o,s)},generateFileIcon:function(e,t){var o='<div style="${style}" class="fileuploader-item-icon${class}"><i>'+(t||"")+"</i></div>",i=f._assets.textToColor(t);return i&&(f._assets.isBrightColor(i)&&(o=o.replace("${class}"," is-bright-color")),o=o.replace("${style}","background-color: "+i)),o.replace("${style}","").replace("${class}","")},renderThumbnail:function(d,e,t){function u(e){var t=$(e);h.removeClass("fileuploader-no-thumbnail fileuploader-loading").html(t),d.html.hasClass("file-will-popup")&&d.html.removeClass("file-will-popup").addClass("file-has-popup"),t.is("img")&&t.attr("draggable","false").on("load error",function(e){"error"==e.type&&m()}),null!=n.thumbnails.onImageLoaded&&$.isFunction(n.thumbnails.onImageLoaded)&&n.thumbnails.onImageLoaded(d,l,p,o,s)}function c(){var e=0;if(d&&-1<f._pfrL.indexOf(d))for(f._pfrL.splice(f._pfrL.indexOf(d),1);e<f._pfrL.length;){if(-1<f._itFl.indexOf(f._pfrL[e])){setTimeout(function(){f.thumbnails.renderThumbnail(f._pfrL[e],!0)},"image"==d.format&&1.8<d.size/1e6?200:0);break}f._pfrL.splice(e,1),e++}}var h=d.html.find(".fileuploader-item-image"),i=d.data&&(d.data.readerSkip||!1===d.data.thumbnail),m=function(){h.addClass("fileuploader-no-thumbnail"),h.removeClass("fileuploader-loading").html(d.icon),d.html.hasClass("file-will-popup")&&d.html.removeClass("file-will-popup").addClass("file-has-popup"),null!=n.thumbnails.onImageLoaded&&$.isFunction(n.thumbnails.onImageLoaded)&&n.thumbnails.onImageLoaded(d,l,p,o,s)};if(h.length){if(d.image=h.html("").addClass("fileuploader-loading"),(-1<["image","video","audio","astext"].indexOf(d.format)||d.data.thumbnail)&&f.isFileReaderSupported()&&!i&&(d.appended||n.thumbnails.startImageRenderer||e)){if(d.html.hasClass("file-has-popup")&&d.html.removeClass("file-has-popup").addClass("file-will-popup"),n.thumbnails.synchronImages&&(-1!=f._pfrL.indexOf(d)||e||f._pfrL.push(d),1<f._pfrL.length&&!e))return;var r=function(e,t){function o(){var e;n.thumbnails.canvasImage?(e=document.createElement("canvas"),f.editor.resize(this,e,n.thumbnails.canvasImage.width?n.thumbnails.canvasImage.width:h.width(),n.thumbnails.canvasImage.height?n.thumbnails.canvasImage.height:h.height(),!1,!0),f._assets.isBlankCanvas(e)?m():u(e)):u(this),c()}function i(){l=null,m(),c()}var r=e&&e.nodeName&&"img"==e.nodeName.toLowerCase(),a=r?e.src:e,l=null;return e?t&&"image"==d.format&&d.reader.node?o.call(d.reader.node):r?o.call(e):((l=new Image).onload=o,l.onerror=i,d.data&&d.data.readerCrossOrigin&&l.setAttribute("crossOrigin",d.data.readerCrossOrigin),void(l.src=a)):i()};return"string"==typeof t||"object"==typeof t?r(t):f.files.read(d,function(){r(d.reader.frame||(d.reader.node&&"img"==d.reader.node.nodeName.toLowerCase()?d.reader.src:null),!0)},null,t,!0)}m()}else c()},popup:function(d,r){var a,u,e;!f.locked&&n.thumbnails.popup&&n.thumbnails._selectors.popup&&(a=$(n.thumbnails.popup.container),u=a.find(".fileuploader-popup"),e=function(){function t(e){var t=e.which||e.keyCode;27==t&&d.popup&&d.popup.close&&d.popup.close(),37!=t&&39!=t||!n.thumbnails.popup.arrows||d.popup.move(37==t?"prev":"next")}var e=d.popup.html||$(f._assets.textParse(n.thumbnails.popup.template,d)),i=d.popup.html!==e;u.removeClass("loading"),u.children(n.thumbnails._selectors.popup).length&&($.each(f._itFl,function(e,t){t!=d&&t.popup&&t.popup.close&&t.popup.close(r)}),u.find(n.thumbnails._selectors.popup).remove()),e.show().appendTo(u),d.popup.html=e,d.popup.isOpened=!0,d.popup.move=function(e){var t=f._itFl.indexOf(d),o=null,i=!1;if("prev"==(e=n.thumbnails.itemPrepend?"prev"==e?"next":"prev":e))for(var r=t;0<=r;r--){if((a=f._itFl[r])!=d&&a.popup&&a.html.hasClass("file-has-popup")){o=a;break}0!=r||o||i||!n.thumbnails.popup.loop||(r=f._itFl.length,i=!0)}else for(var a,r=t;r<f._itFl.length;r++){if((a=f._itFl[r])!=d&&a.popup&&a.html.hasClass("file-has-popup")){o=a;break}r+1!=f._itFl.length||o||i||!n.thumbnails.popup.loop||(r=-1,i=!0)}o&&f.thumbnails.popup(o,!0)},d.popup.close=function(e){d.popup.node&&d.popup.node.pause&&d.popup.node.pause(),$(window).off("keyup",t),a.css({overflow:"",width:""}),d.popup.editor&&d.popup.editor.cropper&&d.popup.editor.cropper.hide(),d.popup.zoomer&&d.popup.zoomer.hide(),d.popup.isOpened=!1,d.popup.html&&n.thumbnails.popup.onHide&&$.isFunction(n.thumbnails.popup.onHide)?n.thumbnails.popup.onHide(d,l,p,o,s):d.popup.html&&d.popup.html.remove(),e||u.fadeOut(400,function(){u.remove()}),delete d.popup.close},d.popup.node?(i&&e.html(e.html().replace(/\$\{reader\.node\}/,'<div class="reader-node"></div>')).find(".reader-node").html(d.popup.node),d.popup.node.controls=!0,d.popup.node.currentTime=0,d.popup.node.play&&d.popup.node.play()):i&&e.find(".fileuploader-popup-node").html('<div class="reader-node"><div class="fileuploader-popup-file-icon file-type-'+d.format+" file-ext-"+d.extension+'">'+d.icon+"</div></div>"),$(window).on("keyup",t),a.css({overflow:"hidden",width:a.innerWidth()}),d.popup.html.find('[data-action="prev"], [data-action="next"]').removeAttr("style"),d.popup.html[1!=f._itFl.length&&n.thumbnails.popup.arrows?"addClass":"removeClass"]("fileuploader-popup-has-arrows"),n.thumbnails.popup.loop||(0==f._itFl.indexOf(d)&&d.popup.html.find('[data-action="prev"]').hide(),f._itFl.indexOf(d)==f._itFl.length-1&&d.popup.html.find('[data-action="next"]').hide()),i&&d.popup.zoomer&&(d.popup.zoomer=null),f.editor.zoomer(d),d.editor&&(d.popup.editor||(d.popup.editor={}),f.editor.rotate(d,d.editor.rotation||0,!0),d.popup.editor&&d.popup.editor.cropper&&(d.popup.editor.cropper.hide(!0),setTimeout(function(){f.editor.crop(d,d.editor.crop?$.extend({},d.editor.crop):d.popup.editor.cropper.setDefaultData())},100))),d.popup.html.on("click",'[data-action="prev"]',function(e){d.popup.move("prev")}).on("click",'[data-action="next"]',function(e){d.popup.move("next")}).on("click",'[data-action="crop"]',function(e){d.editor&&d.editor.cropper()}).on("click",'[data-action="rotate-cw"]',function(e){d.editor&&d.editor.rotate()}).on("click",'[data-action="zoom-in"]',function(e){d.popup.zoomer&&d.popup.zoomer.zoomIn()}).on("click",'[data-action="zoom-out"]',function(e){d.popup.zoomer&&d.popup.zoomer.zoomOut()}),n.thumbnails.popup.onShow&&$.isFunction(n.thumbnails.popup.onShow)&&n.thumbnails.popup.onShow(d,l,p,o,s)},0==u.length&&(u=$('<div class="fileuploader-popup"></div>').appendTo(a)),u.fadeIn(400).addClass("loading").find(n.thumbnails._selectors.popup).fadeOut(150),(-1<["image","video","audio","astext"].indexOf(d.format)||-1<["application/pdf"].indexOf(d.type))&&!d.popup.html?f.files.read(d,function(){d.reader.node&&(d.popup.node=d.reader.node),"image"==d.format&&d.reader.node?(d.popup.node=d.reader.node.cloneNode(),d.popup.node.complete?e():(d.popup.node.src="",d.popup.node.onload=d.popup.node.onerror=e,d.popup.node.src=d.reader.node.src)):e()}):e())}},editor:{rotate:function(e,t,o){if(!(e.popup&&e.popup.html&&$("html").find(e.popup.html).length)){var i=e.editor.rotation||0,n=t||i+90;return 360<=n&&(n=0),e.popup.editor&&(e.popup.editor.rotation=n),e.editor.rotation=n}if(e.popup.node){if(e.popup.editor.isAnimating)return;e.popup.editor.isAnimating=!0;var r=e.popup.html.find(".fileuploader-popup-node").find(".reader-node"),p=r.find("> img"),a={rotation:i=e.popup.editor.rotation||0,scale:e.popup.editor.scale||1};e.popup.editor.cropper&&e.popup.editor.cropper.$template.hide(),e.popup.editor.rotation=o?t:i+90,e.popup.editor.scale=(r.height()/p[-1<[90,270].indexOf(e.popup.editor.rotation)?"width":"height"]()).toFixed(3),p.height()*e.popup.editor.scale>r.width()&&-1<[90,270].indexOf(e.popup.editor.rotation)&&(e.popup.editor.scale=r.height()/p.width()),1<e.popup.editor.scale&&(e.popup.editor.scale=1),$(a).stop().animate({rotation:e.popup.editor.rotation,scale:e.popup.editor.scale},{duration:o?2:300,easing:"swing",step:function(e,t){var o,i,n,r=p.css("-webkit-transform")||p.css("-moz-transform")||p.css("transform")||"none",a=0,l=1,s=t.prop;"none"!==r&&(i=(o=r.split("(")[1].split(")")[0].split(","))[0],n=o[1],a="rotation"==s?e:Math.round(Math.atan2(n,i)*(180/Math.PI)),l="scale"==s?e:Math.round(10*Math.sqrt(i*i+n*n))/10),p.css({"-webkit-transform":"rotate("+a+"deg) scale("+l+")","-moz-transform":"rotate("+a+"deg) scale("+l+")",transform:"rotate("+a+"deg) scale("+l+")"})},always:function(){delete e.popup.editor.isAnimating,e.popup.editor.cropper&&!o&&(e.popup.editor.cropper.setDefaultData(),e.popup.editor.cropper.init("rotation"))}}),360<=e.popup.editor.rotation&&(e.popup.editor.rotation=0),e.popup.editor.rotation!=e.editor.rotation&&(e.popup.editor.hasChanges=!0)}},crop:function(w,e){var t,l,o;if(!(w.popup&&w.popup.html&&$("html").find(w.popup.html).length))return w.editor.crop=e||w.editor.crop;w.popup.node&&(w.popup.editor.cropper?(e&&(w.popup.editor.cropper.crop=e),w.popup.editor.cropper.init(e)):(t=w.popup.html.find(".fileuploader-popup-node .reader-node > img"),o=(l=$('<div class="fileuploader-cropper"><div class="fileuploader-cropper-area"><div class="point point-a"></div><div class="point point-b"></div><div class="point point-c"></div><div class="point point-d"></div><div class="point point-e"></div><div class="point point-f"></div><div class="point point-g"></div><div class="point point-h"></div><div class="area-move"></div><div class="area-image"></div><div class="area-info"></div></div></div>')).find(".fileuploader-cropper-area"),w.popup.editor.cropper={$imageEl:t,$template:l,$editor:o,isCropping:!1,crop:e||null,init:function(o){var i=w.popup.editor.cropper,e=i.$imageEl.position(),t=i.$imageEl[0].getBoundingClientRect().width,r=i.$imageEl[0].getBoundingClientRect().height,a=w.popup.editor.rotation&&-1<[90,270].indexOf(w.popup.editor.rotation)?w.popup.editor.scale:1;if(i.hide(),i.crop||i.setDefaultData(),0==t||0==r)return i.hide(!0);i.isCropping||(i.$imageEl.clone().appendTo(i.$template.find(".area-image")),i.$imageEl.parent().append(l)),i.$template.hide().css({left:e.left,top:e.top,width:t,height:r}).fadeIn(150),i.$editor.hide(),clearTimeout(i._editorAnimationTimeout),i._editorAnimationTimeout=setTimeout(function(){var e,t;delete i._editorAnimationTimeout,i.$editor.fadeIn(250),w.editor.crop&&$.isPlainObject(o)&&(i.resize(),i.crop.left=i.crop.left*i.crop.cfWidth*a,i.crop.width=i.crop.width*i.crop.cfWidth*a,i.crop.top=i.crop.top*i.crop.cfHeight*a,i.crop.height=i.crop.height*i.crop.cfHeight*a),n.editor.cropper&&(n.editor.cropper.maxWidth||n.editor.cropper.maxHeight)&&(n.editor.cropper.maxWidth&&(i.crop.width=Math.min(n.editor.cropper.maxWidth*i.crop.cfWidth,i.crop.width)),n.editor.cropper.maxHeight&&(i.crop.height=Math.min(n.editor.cropper.maxHeight*i.crop.cfHeight,i.crop.height)),w.editor.crop&&"rotation"!=o||"resize"==o||(i.crop.left=(i.$template.width()-i.crop.width)/2,i.crop.top=(i.$template.height()-i.crop.height)/2)),w.editor.crop&&"rotation"!=o||!n.editor.cropper||!n.editor.cropper.ratio||"resize"==o||(e=n.editor.cropper.ratio,(t=f._assets.ratioToPx(i.crop.width,i.crop.height,e))&&(i.crop.width=Math.min(i.crop.width,t[0]),i.crop.left=(i.$template.width()-i.crop.width)/2,i.crop.height=Math.min(i.crop.height,t[1]),i.crop.top=(i.$template.height()-i.crop.height)/2)),i.drawPlaceHolder(i.crop)},400),n.editor.cropper&&n.editor.cropper.showGrid&&i.$editor.addClass("has-grid"),i.$imageEl.attr("draggable","false"),i.$template.on("mousedown touchstart",i.mousedown),$(window).on("resize",i.resize),i.isCropping=!0,w.popup.editor.hasChanges=!0},setDefaultData:function(){var e=w.popup.editor.cropper,t=e.$imageEl.get(0).getBoundingClientRect(),o=t.width,i=t.height,n=w.popup.editor.rotation&&-1<[90,270].indexOf(w.popup.editor.rotation),r=w.popup.editor.scale||1;return e.crop={left:0,top:0,width:n?i*r:o,height:n?o*r:i,cfWidth:o/w.reader.width,cfHeight:i/w.reader.height},null},hide:function(e){var t=w.popup.editor.cropper;e&&(t.$template.hide(),t.$editor.hide()),t.$imageEl.attr("draggable",""),t.$template.off("mousedown touchstart",t.mousedown),$(window).off("resize",t.resize)},resize:function(e){var o=w.popup.editor.cropper,i=o.$imageEl;0<i.width()&&(e?(o.$template.hide(),clearTimeout(o._resizeTimeout),o._resizeTimeout=setTimeout(function(){delete o._resizeTimeout;var e=i.width()/w.reader.width,t=i.height()/w.reader.height;o.crop.left=o.crop.left/o.crop.cfWidth*e,o.crop.width=o.crop.width/o.crop.cfWidth*e,o.crop.top=o.crop.top/o.crop.cfHeight*t,o.crop.height=o.crop.height/o.crop.cfHeight*t,o.crop.cfWidth=e,o.crop.cfHeight=t,o.init("resize")},500)):(o.crop.cfWidth=i.width()/w.reader.width,o.crop.cfHeight=i.height()/w.reader.height))},drawPlaceHolder:function(e){var t=w.popup.editor.cropper,o=w.popup.editor.rotation||0,i=w.popup.editor.scale||1,n=[0,0];e&&(e=$.extend({},e),o&&(n=[180==o||270==o?-100:0,90==o||180==o?-100:0]),t.$editor.css(e),t.setAreaInfo(),t.$editor.find(".area-image img").removeAttr("style").css({width:t.$imageEl.width(),height:t.$imageEl.height(),left:-1*t.$editor.position().left,top:-1*t.$editor.position().top,"-webkit-transform":"rotate("+o+"deg) scale("+i+") translateX("+n[0]+"%) translateY("+n[1]+"%)","-moz-transform":"rotate("+o+"deg) scale("+i+") translateX("+n[0]+"%) translateY("+n[1]+"%)",transform:"rotate("+o+"deg) scale("+i+") translateX("+n[0]+"%) translateY("+n[1]+"%)"}))},setAreaInfo:function(e){var t=w.popup.editor.cropper,o=w.popup.editor.scale||1;t.$editor.find(".area-info").html((t.isResizing||"size"==e?["W: "+Math.round(t.crop.width/t.crop.cfWidth/o)+"px"," ","H: "+Math.round(t.crop.height/t.crop.cfHeight/o)+"px"]:["X: "+Math.round(t.crop.left/t.crop.cfWidth/o)+"px"," ","Y: "+Math.round(t.crop.top/t.crop.cfHeight/o)+"px"]).join(""))},mousedown:function(e){function t(){r.pointData={el:i,x:a.x,y:a.y,xEditor:a.x-r.crop.left,yEditor:a.y-r.crop.top,left:r.crop.left,top:r.crop.top,width:r.crop.width,height:r.crop.height},(r.isMoving||r.isResizing)&&(r.setAreaInfo("size"),r.$editor.addClass("moving show-info"),$("body").css({"-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none"}),$(document).on("mousemove touchmove",r.mousemove))}var o=e.originalEvent.touches&&e.originalEvent.touches[0]?"touchstart":"mousedown",i=$(e.target),r=w.popup.editor.cropper,a={x:("mousedown"==o?e.pageX:e.originalEvent.touches[0].pageX)-r.$template.offset().left,y:("mousedown"==o?e.pageY:e.originalEvent.touches[0].pageY)-r.$template.offset().top};if(3==e.which)return!0;w.popup.zoomer&&w.popup.zoomer.hasSpacePressed||(r.isMoving=i.is(".area-move"),r.isResizing=i.is(".point"),"mousedown"==o&&t(),"touchstart"==o&&1==e.originalEvent.touches.length&&((r.isMoving||r.isResizing)&&e.preventDefault(),r.isTouchLongPress=!0,setTimeout(function(){r.isTouchLongPress&&(delete r.isTouchLongPress,t())},n.thumbnails.touchDelay?n.thumbnails.touchDelay:0)),$(document).on("mouseup touchend",r.mouseup))},mousemove:function(e){var t,o,i,r,a,l,s,p,d,u,c,h,m,g=e.originalEvent.touches&&e.originalEvent.touches[0]?"touchstart":"mousedown",v=($(e.target),w.popup.editor.cropper),b={x:("mousedown"==g?e.pageX:e.originalEvent.touches[0].pageX)-v.$template.offset().left,y:("mousedown"==g?e.pageY:e.originalEvent.touches[0].pageY)-v.$template.offset().top};if(e.originalEvent.touches&&1!=e.originalEvent.touches.length)return v.mouseup(e);v.isMoving&&(t=b.x-v.pointData.xEditor,o=b.y-v.pointData.yEditor,t+v.crop.width>v.$template.width()&&(t=v.$template.width()-v.crop.width),t<0&&(t=0),o+v.crop.height>v.$template.height()&&(o=v.$template.height()-v.crop.height),o<0&&(o=0),v.crop.left=t,v.crop.top=o),v.isResizing&&(i=v.pointData.el.attr("class").substr("point point-".length),r=v.crop.left+v.crop.width,a=v.crop.top+v.crop.height,l=(n.editor.cropper&&n.editor.cropper.minWidth||0)*v.crop.cfWidth,s=(n.editor.cropper&&n.editor.cropper.minHeight||0)*v.crop.cfHeight,p=(n.editor.cropper&&n.editor.cropper.maxWidth)*v.crop.cfWidth,d=(n.editor.cropper&&n.editor.cropper.maxHeight)*v.crop.cfHeight,u=n.editor.cropper?n.editor.cropper.ratio:null,l>v.$template.width()&&(l=v.$template.width()),s>v.$template.height()&&(s=v.$template.height()),p>v.$template.width()&&(p=v.$template.width()),d>v.$template.height()&&(d=v.$template.height()),"a"!=i&&"b"!=i&&"c"!=i||c||(v.crop.top=b.y,v.crop.top<0&&(v.crop.top=0),v.crop.height=a-v.crop.top,v.crop.top>v.crop.top+v.crop.height&&(v.crop.top=a,v.crop.height=0),v.crop.height<s&&(v.crop.top=a-s,v.crop.height=s),v.crop.height>d&&(v.crop.top=a-d,v.crop.height=d),(c=u?f._assets.ratioToPx(v.crop.width,v.crop.height,u):null)&&(v.crop.width=c[0],"a"!=i&&"b"!=i||(v.crop.left=Math.max(0,v.pointData.left+(v.pointData.width-v.crop.width)/("b"==i?2:1))),v.crop.left+v.crop.width>v.$template.width()&&(h=v.$template.width()-v.crop.left,v.crop.width=h,v.crop.height=h/c[2]*c[3],v.crop.top=a-v.crop.height))),"e"!=i&&"f"!=i&&"g"!=i||c||(v.crop.height=b.y-v.crop.top,v.crop.height+v.crop.top>v.$template.height()&&(v.crop.height=v.$template.height()-v.crop.top),v.crop.height<s&&(v.crop.height=s),v.crop.height>d&&(v.crop.height=d),(c=u?f._assets.ratioToPx(v.crop.width,v.crop.height,u):null)&&(v.crop.width=c[0],"f"!=i&&"g"!=i||(v.crop.left=Math.max(0,v.pointData.left+(v.pointData.width-v.crop.width)/("f"==i?2:1))),v.crop.left+v.crop.width>v.$template.width()&&(h=v.$template.width()-v.crop.left,v.crop.width=h,v.crop.height=h/c[2]*c[3]))),"c"!=i&&"d"!=i&&"e"!=i||c||(v.crop.width=b.x-v.crop.left,v.crop.width+v.crop.left>v.$template.width()&&(v.crop.width=v.$template.width()-v.crop.left),v.crop.width<l&&(v.crop.width=l),v.crop.width>p&&(v.crop.width=p),(c=u?f._assets.ratioToPx(v.crop.width,v.crop.height,u):null)&&(v.crop.height=c[1],"c"!=i&&"d"!=i||(v.crop.top=Math.max(0,v.pointData.top+(v.pointData.height-v.crop.height)/("d"==i?2:1))),v.crop.top+v.crop.height>v.$template.height()&&(m=v.$template.height()-v.crop.top,v.crop.height=m,v.crop.width=m/c[3]*c[2]))),"a"!=i&&"g"!=i&&"h"!=i||c||(v.crop.left=b.x,v.crop.left>v.$template.width()&&(v.crop.left=v.$template.width()),v.crop.left<0&&(v.crop.left=0),v.crop.width=r-v.crop.left,v.crop.left>v.crop.left+v.crop.width&&(v.crop.left=r,v.crop.width=0),v.crop.width<l&&(v.crop.left=r-l,v.crop.width=l),v.crop.width>p&&(v.crop.left=r-p,v.crop.width=p),(c=u?f._assets.ratioToPx(v.crop.width,v.crop.height,u):null)&&(v.crop.height=c[1],"a"!=i&&"h"!=i||(v.crop.top=Math.max(0,v.pointData.top+(v.pointData.height-v.crop.height)/("h"==i?2:1))),v.crop.top+v.crop.height>v.$template.height()&&(m=v.$template.height()-v.crop.top,v.crop.height=m,v.crop.width=m/c[3]*c[2],v.crop.left=r-v.crop.width)))),v.drawPlaceHolder(v.crop)},mouseup:function(e){var t=w.popup.editor.cropper;0!=t.$editor.width()&&0!=t.$editor.height()||t.init(t.setDefaultData()),delete t.isTouchLongPress,delete t.isMoving,delete t.isResizing,t.$editor.removeClass("moving show-info"),$("body").css({"-webkit-user-select":"","-moz-user-select":"","-ms-user-select":"","user-select":""}),$(document).off("mousemove touchmove",t.mousemove),$(document).off("mouseup touchend",t.mouseup)}},w.popup.editor.cropper.init()))},resize:function(e,t,o,i,n,r){var a=t.getContext("2d"),o=!o&&i?i*e.width/e.height:o,i=!i&&o?o*e.height/e.width:i,l=e.width/e.height,s=1<=l?o:i*l,p=l<1?i:o/l;r&&s<o&&(p*=o/s,s=o),r&&p<i&&(s*=i/p,p=i);var d=Math.min(Math.ceil(Math.log(e.width/s)/Math.log(2)),12);if(t.width=s,t.height=p,e.width<t.width||e.height<t.height||d<2){r||(t.width=Math.min(e.width,t.width),t.height=Math.min(e.height,t.height));var u=e.width<t.width?(t.width-e.width)/2:0,c=e.height<t.height?(t.height-e.height)/2:0;n||(a.fillStyle="#fff",a.fillRect(0,0,t.width,t.height)),a.drawImage(e,u,c,Math.min(e.width,t.width),Math.min(e.height,t.height))}else{var f=document.createElement("canvas"),h=f.getContext("2d"),m=2;for(f.width=e.width/m,f.height=e.height/m,h.fillStyle="#fff",h.fillRect(0,0,f.width,f.height),h.imageSmoothingEnabled=!1,h.imageSmoothingQuality="high",h.drawImage(e,0,0,f.width,f.height);2<d;){var g=m+2,v=e.width/m,b=e.height/m;v>f.width&&(v=f.width),b>f.height&&(b=f.height),h.imageSmoothingEnabled=!0,h.drawImage(f,0,0,v,b,0,0,e.width/g,e.height/g),m=g,d--}v=e.width/m,b=e.height/m;v>f.width&&(v=f.width),b>f.height&&(b=f.height),a.drawImage(f,0,0,v,b,0,0,s,p),f=h=null}a=null},zoomer:function(s){var e,p,d,l;s.popup&&s.popup.html&&$("html").find(s.popup.html).length&&(s.popup.zoomer||(e=s.popup.html,p=e.find(".fileuploader-popup-node"),d=p.find(".reader-node"),l=d.find("> img").attr("draggable","false").attr("ondragstart","return false;"),s.popup.zoomer={html:e.find(".fileuploader-popup-zoomer"),isActive:"image"==s.format&&s.popup.node&&n.thumbnails.popup.zoomer,scale:100,zoom:100,init:function(){var e=this;if(!e.isActive||f._assets.isIE()||f._assets.isMobile())return e.html.hide()&&p.addClass("has-node-centered");e.hide(),e.resize(),$(window).on("resize",e.resize),$(window).on("keyup keydown",e.keyPress),e.html.find("input").on("input change",e.range),d.on("mousedown touchstart",e.mousedown),p.on("mousewheel DOMMouseScroll",e.scroll)},hide:function(){var e=this;$(window).off("resize",e.resize),$(window).off("keyup keydown",e.keyPress),e.html.find("input").off("input change",e.range),d.off("mousedown",e.mousedown),p.off("mousewheel DOMMouseScroll",e.scroll)},center:function(e){var t=this,o=0,i=0,i=e?(o=t.left,i=t.top,o-=(p.width()/2-t.left)*(d.width()/e[0]-1),i-=(p.height()/2-t.top)*(d.height()/e[1]-1),d.width()<=p.width()&&(o=Math.round((p.width()-d.width())/2)),d.height()<=p.height()&&(i=Math.round((p.height()-d.height())/2)),d.width()>p.width()&&(0<o?o=0:o+d.width()<p.width()&&(o=p.width()-d.width())),d.height()>p.height()&&(0<i?i=0:i+d.height()<p.height()&&(i=p.height()-d.height())),Math.min(i,0)):(o=Math.round((p.width()-d.width())/2),Math.round((p.height()-d.height())/2));d.css({left:(t.left=o)+"px",top:(t.top=i)+"px",width:d.width(),height:d.height()})},resize:function(){var e=s.popup.zoomer;p.removeClass("is-zoomed"),d.removeAttr("style"),e.scale=e.getImageScale(),e.updateView()},range:function(e){var t=s.popup.zoomer,o=$(this),i=parseFloat(o.val());if(100<=t.scale)return e.preventDefault(),void o.val(t.scale);i<t.scale&&(e.preventDefault(),i=t.scale,o.val(i)),t.updateView(i,!0)},scroll:function(e){var t=s.popup.zoomer,o=-100;e.originalEvent&&(e.originalEvent.wheelDelta&&(o=e.originalEvent.wheelDelta/-40),e.originalEvent.deltaY&&(o=e.originalEvent.deltaY),e.originalEvent.detail&&(o=e.originalEvent.detail)),t[o<0?"zoomIn":"zoomOut"](3)},keyPress:function(e){var t=s.popup.zoomer,o=e.type;32==(e.keyCode||e.which)&&(t.hasSpacePressed="keydown"==o,t.hasSpacePressed&&t.isZoomed()?d.addClass("is-amoving"):d.removeClass("is-amoving"))},mousedown:function(e){function t(){o.pointData={x:a.x,y:a.y,xTarget:a.x-o.left,yTarget:a.y-o.top},$("body").css({"-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none"}),d.addClass("is-moving"),$(document).on("mousemove",o.mousemove)}var o=s.popup.zoomer,i=$(e.target),r=e.originalEvent.touches&&e.originalEvent.touches[0]?"touchstart":"mousedown",a={x:"mousedown"==r?e.pageX:e.originalEvent.touches[0].pageX,y:"mousedown"==r?e.pageY:e.originalEvent.touches[0].pageY};1==e.which&&100!=o.scale&&o.zoom!=o.scale&&(o.hasSpacePressed||i[0]==l[0]||i.is(".fileuploader-cropper"))&&("mousedown"==r&&t(),"touchstart"==r&&(o.isTouchLongPress=!0,setTimeout(function(){o.isTouchLongPress&&(delete o.isTouchLongPress,t())},n.thumbnails.touchDelay?n.thumbnails.touchDelay:0)),$(document).on("mouseup touchend",o.mouseup))},mousemove:function(e){var t=s.popup.zoomer,o=e.originalEvent.touches&&e.originalEvent.touches[0]?"touchstart":"mousedown",i="mousedown"==o?e.pageX:e.originalEvent.touches[0].pageX,n="mousedown"==o?e.pageY:e.originalEvent.touches[0].pageY,r=i-t.pointData.xTarget,a=n-t.pointData.yTarget;0<a&&(a=0),a<p.height()-d.height()&&(a=p.height()-d.height()),d.height()<p.height()&&(a=p.height()/2-d.height()/2),d.width()>p.width()?(0<r&&(r=0),r<p.width()-d.width()&&(r=p.width()-d.width())):r=p.width()/2-d.width()/2,d.css({left:(t.left=r)+"px",top:(t.top=a)+"px"})},mouseup:function(e){var t=s.popup.zoomer;delete t.pointData,$("body").css({"-webkit-user-select":"","-moz-user-select":"","-ms-user-select":"","user-select":""}),d.removeClass("is-moving"),$(document).off("mousemove",t.mousemove),$(document).off("mouseup",t.mouseup)},zoomIn:function(e){var t=s.popup.zoomer,o=e||20;100<=t.zoom||(t.zoom=Math.min(100,t.zoom+o),t.updateView(t.zoom))},zoomOut:function(e){var t=s.popup.zoomer,o=e||20;t.zoom<=t.scale||(t.zoom=Math.max(t.scale,t.zoom-o),t.updateView(t.zoom))},updateView:function(e,t){var o=this,i=o.getImageSize().width/100*e,n=o.getImageSize().height/100*e,r=d.width(),a=d.height(),l=e&&e!=o.scale;if(!o.isActive)return o.center();l?(p.addClass("is-zoomed"),d.addClass("is-movable").css({width:i+"px",height:n+"px",maxWidth:"none",maxHeight:"none"})):(p.removeClass("is-zoomed"),d.removeClass("is-movable is-amoving").removeAttr("style")),o.zoom=e||o.scale,o.center(l?[r,a,o.left,o.top]:null),o.html.find("span").html(o.zoom+"%"),t||o.html.find("input").val(o.zoom),e&&s.popup.editor&&s.popup.editor.cropper&&s.popup.editor.cropper.resize(!0)},isZoomed:function(){return this.zoom>this.scale},getImageSize:function(){return{width:l.prop("naturalWidth"),height:l.prop("naturalHeight")}},getImageScale:function(){return Math.round(100/(l.prop("naturalWidth")/l.width()))}}),s.popup.zoomer.init())},save:function(b,w,x,y,z){function e(){if(b.reader.node){var e,t,i,r,a=document.createElement("canvas"),d=a.getContext("2d"),u=[0,180],c=x||b.type||"image/jpeg",h=n.editor.quality||90,m=function(e,t){var i=e;w&&(i?i=f._assets.dataURItoBlob(i,c):console.error("Error: Failed to execute 'toDataURL' on 'HTMLCanvasElement': Tainted canvases may not be exported.")),!z&&i&&f.thumbnails.renderThumbnail(b,!0,t||e),y&&y(i,b,l,p,o,s),null!=n.editor.onSave&&"function"==typeof n.editor.onSave&&n.editor.onSave(i,b,l,p,o,s),f.set("listInput",null)};try{a.width=b.reader.width,a.height=b.reader.height,d.drawImage(this,0,0,b.reader.width,b.reader.height),void 0!==b.editor.rotation&&(b.editor.rotation=b.editor.rotation||0,a.width=-1<u.indexOf(b.editor.rotation)?b.reader.width:b.reader.height,a.height=-1<u.indexOf(b.editor.rotation)?b.reader.height:b.reader.width,e=b.editor.rotation*Math.PI/180,t=.5*a.width,i=.5*a.height,d.clearRect(0,0,a.width,a.height),d.translate(t,i),d.rotate(e),d.translate(.5*-b.reader.width,.5*-b.reader.height),d.drawImage(this,0,0),d.setTransform(1,0,0,1,0,0)),b.editor.crop&&(r=d.getImageData(b.editor.crop.left,b.editor.crop.top,b.editor.crop.width,b.editor.crop.height),a.width=b.editor.crop.width,a.height=b.editor.crop.height,d.putImageData(r,0,0));var g,v=a.toDataURL(c,h/100);n.editor.maxWidth||n.editor.maxHeight?((g=new Image).src=v,g.onload=function(){var e=document.createElement("canvas");f.editor.resize(g,e,n.editor.maxWidth,n.editor.maxHeight,!0,!1),v=e.toDataURL(c,h/100),a=d=e=null,m(v,g)}):(a=d=null,m(v))}catch(e){b.popup.editor=null,a=d=null,m(null)}}}var t=b.popup&&b.popup.html&&$("html").find(b.popup.html).length,i=new Image;if(t){if(!b.popup.editor.hasChanges)return;var r=b.popup.editor.scale||1;b.editor.rotation=b.popup.editor.rotation||0,b.popup.editor.cropper&&(b.editor.crop=b.popup.editor.cropper.crop,b.editor.crop.width=b.editor.crop.width/b.popup.editor.cropper.crop.cfWidth/r,b.editor.crop.left=b.editor.crop.left/b.popup.editor.cropper.crop.cfWidth/r,b.editor.crop.height=b.editor.crop.height/b.popup.editor.cropper.crop.cfHeight/r,b.editor.crop.top=b.editor.crop.top/b.popup.editor.cropper.crop.cfHeight/r)}f._assets.isMobile()?(i.onload=e,i.src=b.reader.src):b.popup.node?e.call(b.popup.node):b.reader.node?e.call(b.reader.node):b.reader.read(b,function(){e.call(b.reader.node)})}},sorter:{init:function(){p.on("mousedown touchstart",n.thumbnails._selectors.sorter,f.sorter.mousedown)},destroy:function(){p.off("mousedown touchstart",n.thumbnails._selectors.sorter,f.sorter.mousedown)},findItemAtPos:function(i){var e=f.sorter.sort,t=e.items.not(e.item.html),n=null;return t.each(function(e,t){var o=$(t);if(i.x>o.offset().left&&i.x<o.offset().left+o.outerWidth()&&i.y>o.offset().top&&i.y<o.offset().top+o.outerHeight())return n=o,!1}),n},mousedown:function(e){function t(){f.sorter.sort={el:i,item:a,items:l.find(n.thumbnails._selectors.item),x:s.x,y:s.y,xItem:s.x-r.offset().left,yItem:s.y-r.offset().top,left:r.position().left,top:r.position().top,width:r.outerWidth(),height:r.outerHeight(),placeholder:n.sorter.placeholder?$(n.sorter.placeholder):$(a.html.get(0).cloneNode()).addClass("fileuploader-sorter-placeholder")},$("body").css({"-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none"}),$(document).on("mousemove touchmove",f.sorter.mousemove)}var o=e.originalEvent.touches&&e.originalEvent.touches[0]?"touchstart":"mousedown",i=$(e.target),r=i.closest(n.thumbnails._selectors.item),a=f.files.find(r),s={x:"mousedown"!=o&&r.length?e.originalEvent.touches[0].pageX:e.pageX,y:"mousedown"!=o&&r.length?e.originalEvent.touches[0].pageY:e.pageY};return f.sorter.sort&&f.sorter.mouseup(),3==e.which||(!a||(!(!n.sorter.selectorExclude||!i.is(n.sorter.selectorExclude)&&!i.closest(n.sorter.selectorExclude).length)||(e.preventDefault(),"mousedown"==o&&t(),"touchstart"==o&&(f.sorter.isTouchLongPress=!0,setTimeout(function(){f.sorter.isTouchLongPress&&(delete f.sorter.isTouchLongPress,t())},n.thumbnails.touchDelay?n.thumbnails.touchDelay:0)),void $(document).on("mouseup touchend",f.sorter.mouseup))))},mousemove:function(e){var t=e.originalEvent.touches&&e.originalEvent.touches[0]?"touchstart":"mousedown",o=f.sorter.sort,i=o.item,r=l.find(n.thumbnails._selectors.item),a=$(n.sorter.scrollContainer||window),s=$(document).scrollLeft(),p=$(document).scrollTop(),d=a.scrollLeft(),u=a.scrollTop(),c={x:"mousedown"==t?e.clientX:e.originalEvent.touches[0].clientX,y:"mousedown"==t?e.clientY:e.originalEvent.touches[0].clientY};var h=c.x-o.xItem,m=c.y-o.yItem,g=c.x-(a.prop("offsetLeft")||0),v=c.y-(a.prop("offsetTop")||0);h+o.xItem>a.width()&&(h=a.width()-o.xItem),h+o.xItem<0&&(h=0-o.xItem),m+o.yItem>a.height()&&(m=a.height()-o.yItem),m+o.yItem<0&&(m=0-o.yItem),v<=0&&a.scrollTop(u-10),v>a.height()&&a.scrollTop(u+10),g<0&&a.scrollLeft(d-10),g>a.width()&&a.scrollLeft(d+10),i.html.addClass("sorting").css({position:"fixed",left:h,top:m,width:f.sorter.sort.width,height:f.sorter.sort.height}),l.find(o.placeholder).length||i.html.after(o.placeholder),o.placeholder.css({width:f.sorter.sort.width,height:f.sorter.sort.height});var b=f.sorter.findItemAtPos({x:h+o.xItem+s,y:m+o.yItem+p});if(b){var w=o.placeholder.offset().left!=b.offset().left,x=o.placeholder.offset().top!=b.offset().top;if(f.sorter.sort.lastHover&&f.sorter.sort.lastHover.el==b[0]){if(x&&"before"==f.sorter.sort.lastHover.direction&&c.y<f.sorter.sort.lastHover.y)return;if(x&&"after"==f.sorter.sort.lastHover.direction&&c.y>f.sorter.sort.lastHover.y)return;if(w&&"before"==f.sorter.sort.lastHover.direction&&c.x<f.sorter.sort.lastHover.x)return;if(w&&"after"==f.sorter.sort.lastHover.direction&&c.x>f.sorter.sort.lastHover.x)return}var y=r.index(i.html),z=r.index(b)<y?"before":"after";b[z](o.placeholder),b[z](i.html),f.sorter.sort.lastHover={el:b[0],x:c.x,y:c.y,direction:z}}},mouseup:function(){var e=f.sorter.sort,t=e.item;$("body").css({"-webkit-user-select":"","-moz-user-select":"","-ms-user-select":"","user-select":""}),t.html.removeClass("sorting").css({position:"",left:"",top:"",width:"",height:""}),$(document).off("mousemove touchmove",f.sorter.mousemove),$(document).off("mouseup touchend",f.sorter.mouseup),e.placeholder.remove(),delete f.sorter.sort,f.sorter.save()},save:function(e){var i,r=0,a=[],d=[],t=e?f._itFl:n.thumbnails.itemPrepend?l.children().get().reverse():l.children();$.each(t,function(e,t){var o=t.file?t:f.files.find($(t));if(o){if(o.upload&&!o.uploaded)return;f.rendered&&o.index!=r&&(f._itSl&&f._itSl.indexOf(o.id),1)&&(i=!0),o.index=r,a.push(o),d.push(o.id),r++}}),f._itSl&&f._itSl.length!=d.length&&(i=!0),f._itSl=d,i&&a.length==f._itFl.length&&(f._itFl=a),e||f.set("listInput","ignoreSorter"),i&&null!=n.sorter.onSort&&"function"==typeof n.sorter.onSort&&n.sorter.onSort(a,l,p,o,s)}},upload:{prepare:function(t,e){t.upload={url:n.upload.url,data:$.extend({},n.upload.data),formData:new FormData,type:n.upload.type||"POST",enctype:n.upload.enctype||"multipart/form-data",cache:!1,contentType:!1,processData:!1,chunk:t.upload?t.upload.chunk:null,status:null,send:function(){f.upload.send(t,!0)},cancel:function(e){f.upload.cancel(t,e)}},t.upload.formData.append(s.attr("name"),t.file,!!t.name&&t.name),(n.upload.start||e)&&f.upload.send(t,e)},send:function(a,e){if(a.upload){var t,i,r,d,u=function(e){a.html&&a.html.removeClass("upload-pending upload-loading upload-cancelled upload-failed upload-successful").addClass("upload-"+(e||a.upload.status))},c=function(){var e=0;if(0<f._pfuL.length)for(-1<f._pfuL.indexOf(a)&&f._pfuL.splice(f._pfuL.indexOf(a),1);e<f._pfuL.length;){if(-1<f._itFl.indexOf(f._pfuL[e])&&f._pfuL[e].upload&&!f._pfuL[e].upload.$ajax){f.upload.send(f._pfuL[e],!0);break}f._pfuL.splice(e,1),e++}};if(n.upload.synchron&&!a.upload.chunk)if(a.upload.status="pending",a.html&&u(),e)-1<f._pfuL.indexOf(a)&&f._pfuL.splice(f._pfuL.indexOf(a),1);else if(-1==f._pfuL.indexOf(a)&&f._pfuL.push(a),1<f._pfuL.length)return;if(n.upload.chunk&&a.file.slice&&(t=f._assets.toBytes(n.upload.chunk),1<(i=Math.ceil(a.size/t,t))&&!a.upload.chunk&&(a.upload.chunk={name:a.name,size:a.file.size,type:a.file.type,chunkSize:t,temp_name:a.name,loaded:0,total:i,i:-1}),a.upload.chunk&&(a.upload.chunk.i++,delete a.upload.chunk.isFirst,delete a.upload.chunk.isLast,0==a.upload.chunk.i&&(a.upload.chunk.isFirst=!0),a.upload.chunk.i==a.upload.chunk.total-1&&(a.upload.chunk.isLast=!0),a.upload.chunk.i<=a.upload.chunk.total-1?(r=a.upload.chunk.i*a.upload.chunk.chunkSize,d=a.file.slice(r,r+a.upload.chunk.chunkSize),a.upload.formData=new FormData,a.upload.formData.append(s.attr("name"),d),a.upload.data._chunkedd=JSON.stringify(a.upload.chunk)):delete a.upload.chunk)),n.upload.beforeSend&&$.isFunction(n.upload.beforeSend)&&!1===n.upload.beforeSend(a,l,p,o,s))return delete a.upload.chunk,u(),void c();if(p.addClass("fileuploader-is-uploading"),a.upload.$ajax&&a.upload.$ajax.abort(),delete a.upload.$ajax,delete a.upload.send,a.upload.status="loading",a.html&&(n.thumbnails._selectors.start&&a.html.find(n.thumbnails._selectors.start).remove(),u()),a.upload.data)for(var h in a.upload.data)a.upload.data.hasOwnProperty(h)&&a.upload.formData.append(h,a.upload.data[h]);a.upload.data=a.upload.formData,a.upload.xhrStartedAt=a.upload.chunk&&a.upload.chunk.xhrStartedAt?a.upload.chunk.xhrStartedAt:new Date,a.upload.xhr=function(){var e=$.ajaxSettings.xhr();return e.upload&&e.upload.addEventListener("progress",function(e){a.upload.$ajax&&(a.upload.$ajax.total=a.upload.chunk?a.upload.chunk.size:e.total),f.upload.progressHandling(e,a,a.upload.xhrStartedAt)},!1),e},a.upload.complete=function(e,t){if(a.upload.chunk&&!a.upload.chunk.isLast&&"success"==t)return f.upload.prepare(a,!0);c(),delete a.upload.xhrStartedAt;var i=!0;$.each(f._itFl,function(e,t){t.upload&&t.upload.$ajax&&(i=!1)}),i&&(p.removeClass("fileuploader-is-uploading"),null!=n.upload.onComplete&&"function"==typeof n.upload.onComplete&&n.upload.onComplete(l,p,o,s,e,t))},a.upload.success=function(e,t,i){if(!a.upload.chunk||a.upload.chunk.isLast)delete a.upload.chunk,f.upload.progressHandling(null,a,a.upload.xhrStartedAt,!0),a.uploaded=!0,delete a.upload,a.upload={status:"successful",resend:function(){f.upload.retry(a)}},a.html&&u(),null!=n.upload.onSuccess&&$.isFunction(n.upload.onSuccess)&&n.upload.onSuccess(e,a,l,p,o,s,t,i),f.set("listInput",null);else try{var r=JSON.parse(e);a.upload.chunk.temp_name=r.fileuploader.temp_name}catch(e){}},a.upload.error=function(e,t,i){a.upload.chunk&&(a.upload.chunk.i=Math.max(-1,a.upload.chunk.i-1)),a.uploaded=!1,a.upload.status="cancelled"==a.upload.status?a.upload.status:"failed",a.upload.retry=function(){f.upload.retry(a)},delete a.upload.$ajax,a.html&&u(),null!=n.upload.onError&&$.isFunction(n.upload.onError)&&n.upload.onError(a,l,p,o,s,e,t,i)},a.upload.$ajax=$.ajax(a.upload)}},cancel:function(e,t){e&&e.upload&&(e.upload.status="cancelled",delete e.upload.chunk,e.upload.$ajax&&e.upload.$ajax.abort(),delete e.upload.$ajax,t||f.files.remove(e))},retry:function(e){e&&e.upload&&(e.html&&n.thumbnails._selectors.retry&&e.html.find(n.thumbnails._selectors.retry).remove(),f.upload.prepare(e,!0))},progressHandling:function(e,t,i,r){var a,d,u,c,h,m,g,v,b,w;!e&&r&&t.upload.$ajax&&(e={total:t.upload.$ajax.total||t.size,loaded:t.upload.$ajax.total||t.size,lengthComputable:!0}),e.lengthComputable&&(a=new Date,d=e.loaded+(t.upload.chunk?t.upload.chunk.loaded:0),u=t.upload.chunk?t.upload.chunk.size:e.total,c=Math.round(100*d/u),h=t.upload.chunk&&t.upload.chunk.xhrStartedAt?t.upload.chunk.xhrStartedAt:i,g=(m=(a.getTime()-h.getTime())/1e3)?d/m:0,v=Math.max(0,u-d),b=Math.max(0,m?v/g:0),w={loaded:d,loadedInFormat:f._assets.bytesToText(d),total:u,totalInFormat:f._assets.bytesToText(u),percentage:c,secondsElapsed:m,secondsElapsedInFormat:f._assets.secondsToText(m,!0),bytesPerSecond:g,bytesPerSecondInFormat:f._assets.bytesToText(g)+"/s",remainingBytes:v,remainingBytesInFormat:f._assets.bytesToText(v),secondsRemaining:b,secondsRemainingInFormat:f._assets.secondsToText(b,!0)},t.upload.chunk&&(t.upload.chunk.isFirst&&(t.upload.chunk.xhrStartedAt=i),e.loaded!=e.total||t.upload.chunk.isLast||(t.upload.chunk.loaded+=Math.max(e.total,t.upload.chunk.total/t.upload.chunk.chunkSize))),99<w.percentage&&!r&&(w.percentage=99),n.upload.onProgress&&$.isFunction(n.upload.onProgress)&&n.upload.onProgress(w,t,l,p,o,s))}},dragDrop:{onDragEnter:function(e){clearTimeout(f.dragDrop._timer),n.dragDrop.container.addClass("fileuploader-dragging"),f.set("feedback",f._assets.textParse(n.captions.drop)),null!=n.dragDrop.onDragEnter&&$.isFunction(n.dragDrop.onDragEnter)&&n.dragDrop.onDragEnter(e,l,p,o,s)},onDragLeave:function(e){clearTimeout(f.dragDrop._timer),f.dragDrop._timer=setTimeout(function(e){return!!f.dragDrop._dragLeaveCheck(e)&&(n.dragDrop.container.removeClass("fileuploader-dragging"),f.set("feedback",null),void(null!=n.dragDrop.onDragLeave&&$.isFunction(n.dragDrop.onDragLeave)&&n.dragDrop.onDragLeave(e,l,p,o,s)))},100,e)},onDrop:function(e){clearTimeout(f.dragDrop._timer),n.dragDrop.container.removeClass("fileuploader-dragging"),f.set("feedback",null),e&&e.originalEvent&&e.originalEvent.dataTransfer&&e.originalEvent.dataTransfer.files&&e.originalEvent.dataTransfer.files.length&&(f.isUploadMode()?f.onChange(e,e.originalEvent.dataTransfer.files):s.prop("files",e.originalEvent.dataTransfer.files).trigger("change")),null!=n.dragDrop.onDrop&&$.isFunction(n.dragDrop.onDrop)&&n.dragDrop.onDrop(e,l,p,o,s)},_dragLeaveCheck:function(e){var t=$(e.currentTarget);return!(!t.is(n.dragDrop.container)&&n.dragDrop.container.find(t).length)}},clipboard:{paste:function(e){if(f._assets.isIntoView(o)&&e.originalEvent.clipboardData&&e.originalEvent.clipboardData.items&&e.originalEvent.clipboardData.items.length){var t=e.originalEvent.clipboardData.items;f.clipboard.clean();for(var i,r,a=0;a<t.length;a++){-1===t[a].type.indexOf("image")&&-1===t[a].type.indexOf("text/uri-list")||(i=t[a].getAsFile(),r=1<n.clipboardPaste?n.clipboardPaste:2e3,i&&(i._name=f._assets.generateFileName(-1!=i.type.indexOf("/")?i.type.split("/")[1].toString().toLowerCase():"png","Clipboard "),f.set("feedback",f._assets.textParse(n.captions.paste,{ms:r/1e3})),f.clipboard._timer=setTimeout(function(){f.set("feedback",null),f.onChange(e,[i])},r-2)))}}},clean:function(){f.clipboard._timer&&(clearTimeout(f.clipboard._timer),delete f.clipboard._timer,f.set("feedback",null))}},files:{add:function(e,t){var o,r,i=e._name||e.name,a=e.size,l=f._assets.bytesToText(a),p=e.type,d=p?p.split("/",1).toString().toLowerCase():"",u=-1!=i.indexOf(".")?i.split(".").pop().toLowerCase():"",c=i.substr(0,i.length-(-1!=i.indexOf(".")?u.length+1:u.length)),h=e.data||{};return(h={name:i,title:c,size:a,size2:l,type:p,format:d,extension:u,data:h,file:e.file||e,reader:{read:function(e,t,o){return f.files.read(r,e,t,o)}},id:"updated"==t?e.id:Date.now(),input:"choosed"==t?s:null,html:null,choosed:"choosed"==t,appended:"appended"==t||"updated"==t,uploaded:"uploaded"==t}).data.listProps||(h.data.listProps={}),!h.data.url&&h.appended&&(h.data.url=h.file),"updated"!=t?(f._itFl.push(h),o=f._itFl.length-1,r=f._itFl[o]):(o=f._itFl.indexOf(e),f._itFl[o]=r=h),r.remove=function(){f.files.remove(r)},n.editor&&"image"==d&&(r.editor={rotate:!1!==n.editor.rotation?function(e){f.editor.rotate(r,e)}:null,cropper:!1!==n.editor.cropper?function(e){f.editor.crop(r,e)}:null,save:function(e,t,o,i){f.editor.save(r,t,o,e,i)}}),e.local&&(r.local=e.local),o},read:function(d,e,t,i,r){if(f.isFileReaderSupported()&&!d.data.readerSkip){var a=new FileReader,u=window.URL||window.webkitURL,c=r&&d.data.thumbnail,h="string"!=typeof d.file,m=function(){var e=d.reader._callbacks||[];d.reader._timer&&(clearTimeout(d.reader._timer),delete d.reader._timer),delete d.reader._callbacks,delete d.reader._FileReader;for(var t=0;t<e.length;t++)$.isFunction(e[t])&&e[t](d,l,p,o,s);n.onFileRead&&$.isFunction(n.onFileRead)&&n.onFileRead(d,l,p,o,s)};if((d.reader.src||d.reader._FileReader)&&!i||(d.reader={_FileReader:a,_callbacks:[],read:d.reader.read}),d.reader.src&&!i)return e&&$.isFunction(e)?e(d,l,p,o,s):null;if(e&&d.reader._callbacks&&(d.reader._callbacks.push(e),1<d.reader._callbacks.length))return;if("astext"==d.format)a.onload=function(e){var t=document.createElement("div");d.reader.node=t,d.reader.src=e.target.result,d.reader.length=e.target.result.length,t.innerHTML=d.reader.src.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),m()},a.onerror=function(){m(),d.reader={read:d.reader.read}},h?a.readAsText(d.file):$.ajax({url:d.file,success:function(e){a.onload({target:{result:e}})},error:function(){a.onerror()}});else if("image"==d.format||c){if(a.onload=function(e){function o(){d.data&&d.data.readerCrossOrigin&&p.setAttribute("crossOrigin",d.data.readerCrossOrigin),p.src=e.target.result+(!d.data.readerForce&&!i||h||c||-1!=e.target.result.indexOf("data:image")?"":(-1==e.target.result.indexOf("?")?"?":"&")+"d="+Date.now()),p.onload=function(){if(d.reader.exifOrientation){var e=document.createElement("canvas"),t=e.getContext("2d"),o=p,i=Math.abs(d.reader.exifOrientation),n=d.reader.exifOrientation<0?d.reader.exifOrientation:0,r=[0,180];1==i&&(i=0),e.width=o.naturalWidth,e.height=o.naturalHeight,t.drawImage(o,0,0),e.width=-1<r.indexOf(i)?o.naturalWidth:o.naturalHeight,e.height=-1<r.indexOf(i)?o.naturalHeight:o.naturalWidth;var a=i*Math.PI/180,l=.5*e.width,s=.5*e.height;return t.clearRect(0,0,e.width,e.height),t.translate(l,s),t.rotate(a),t.translate(.5*-o.naturalWidth,.5*-o.naturalHeight),n&&(-1<[-1,-180].indexOf(n)?(t.translate(e.width,0),t.scale(-1,1)):-1<[-90,-270].indexOf(n)&&(t.translate(0,e.width),t.scale(1,-1))),t.drawImage(o,0,0),t.setTransform(1,0,0,1,0,0),p.src=e.toDataURL(d.type,1),void delete d.reader.exifOrientation}d.reader.node=p,d.reader.src=p.src,d.reader.width=p.width,d.reader.height=p.height,d.reader.ratio=f._assets.pxToRatio(d.reader.width,d.reader.height),v&&u.revokeObjectURL(v),m(),c&&(d.reader={read:d.reader.read})},p.onerror=function(){m(),d.reader={read:d.reader.read}}}var p=new Image;n.thumbnails.exif&&d.choosed?f._assets.getExifOrientation(d.file,function(e){var t;e&&("Chrome"==(t=f._assets.getDevice.init()).browser.name&&81<=t.browser.version||"Safari"==t.browser.name&&13.4<=t.os.version?delete d.reader.exifOrientation:d.reader.exifOrientation=e),o()}):o()},a.onerror=function(){m(),d.reader={read:d.reader.read}},!c&&d.size>f._assets.toBytes(n.reader.maxSize))return a.onerror();h?n.thumbnails.useObjectUrl&&n.thumbnails.canvasImage&&u?a.onload({target:{result:v=u.createObjectURL(d.file)}}):a.readAsDataURL(d.file):a.onload({target:{result:c?d.data.thumbnail:d.file}})}else if("video"==d.format||"audio"==d.format){var g,v,b=(g=document.createElement(d.format)).canPlayType(d.type);if(a.onerror=function(){d.reader.node=null,m(),d.reader={read:d.reader.read}},u&&""!==b){if(r&&!n.thumbnails.videoThumbnail)return d.reader.node=g,m(),void(d.reader={read:d.reader.read});v=h?u.createObjectURL(d.file):d.file,g.onloadedmetadata=function(){d.reader.node=g,d.reader.src=g.src,d.reader.duration=g.duration,d.reader.duration2=f._assets.secondsToText(g.duration),"video"==d.format&&(d.reader.width=g.videoWidth,d.reader.height=g.videoHeight,d.reader.ratio=f._assets.pxToRatio(d.reader.width,d.reader.height))},g.onerror=function(){m(),d.reader={read:d.reader.read}},g.onloadeddata=function(){"video"==d.format?setTimeout(function(){var e=document.createElement("canvas"),t=e.getContext("2d");e.width=g.videoWidth,e.height=g.videoHeight,t.drawImage(g,0,0,e.width,e.height),d.reader.frame=f._assets.isBlankCanvas(e)?null:e.toDataURL(),e=t=null,m()},300):m()},setTimeout(function(){d.data&&d.data.readerCrossOrigin&&g.setAttribute("crossOrigin",d.data.readerCrossOrigin),g.src=v+"#t=1"},100)}else a.onerror()}else{"application/pdf"==d.type&&n.thumbnails.pdf&&!t?(g=document.createElement("iframe"),v=h?u.createObjectURL(d.file):d.file,(n.thumbnails.pdf.viewer||f._assets.hasPlugin("pdf"))&&(g.src=(n.thumbnails.pdf.viewer||"")+v,d.reader.node=g,d.reader.src=v),m()):(a.onload=function(e){d.reader.src=e.target.result,d.reader.length=e.target.result.length,m()},a.onerror=function(e){m(),d.reader={read:d.reader.read}},h?a[t||"readAsBinaryString"](d.file):m())}d.reader._timer=setTimeout(a.onerror,r?n.reader.thumbnailTimeout:n.reader.timeout)}else e&&e(d,l,p,o,s);return null},list:function(r,a,e,t){var d=[];return!n.sorter||e||t&&"ignoreSorter"==t||f.sorter.save(!0),$.each(f._itFl,function(e,t){var o=t;if(o.upload&&!o.uploaded)return!0;if((a||r)&&(o=(o.choosed&&!o.uploaded?"0:/":"")+(a&&null!==f.files.getItemAttr(t,a)?f.files.getItemAttr(o,a):o.local||o["string"==typeof o.file?"file":"name"])),r&&(o={file:o},t.editor&&(t.editor.crop||t.editor.rotation)&&(o.editor={},t.editor.rotation&&(o.editor.rotation=t.editor.rotation),t.editor.crop&&(o.editor.crop=t.editor.crop)),void 0!==t.index&&(o.index=t.index),t.data&&t.data.listProps))for(var i in t.data.listProps)o[i]=t.data.listProps[i];d.push(o)}),d=n.onListInput&&$.isFunction(n.onListInput)?n.onListInput(d,f._itFl,n.listInput,l,p,o,s):d,r?JSON.stringify(d):d},check:function(i,r,e){var a=["warning",null,!1,!1];if(null!=n.limit&&e&&r.length+f._itFl.length-1>n.limit)return a[1]=f._assets.textParse(n.captions.errors.filesLimit),a[3]=!0,a;if(null!=n.maxSize&&e){var d=0;if($.each(f._itFl,function(e,t){d+=t.size}),d-=i.size,$.each(r,function(e,t){d+=t.size}),d>f._assets.toBytes(n.maxSize))return a[1]=f._assets.textParse(n.captions.errors.filesSizeAll),a[3]=!0,a}if(null!=n.onFilesCheck&&$.isFunction(n.onFilesCheck)&&e&&!1===n.onFilesCheck(r,n,l,p,o,s))return a[3]=!0,a;if(null!=n.extensions&&-1==$.inArray(i.extension,n.extensions)&&!n.extensions.filter(function(e){return i.type.length&&(-1<e.indexOf(i.type)||-1<e.indexOf(i.format+"/*"))}).length)return a[1]=f._assets.textParse(n.captions.errors.filesType,i),a;if(null!=n.disallowedExtensions&&(-1<$.inArray(i.extension,n.disallowedExtensions)||n.disallowedExtensions.filter(function(e){return!i.type.length||-1<e.indexOf(i.type)||-1<e.indexOf(i.format+"/*")}).length))return a[1]=f._assets.textParse(n.captions.errors.filesType,i),a;if(null!=n.fileMaxSize&&i.size>f._assets.toBytes(n.fileMaxSize))return a[1]=f._assets.textParse(n.captions.errors.fileSize,i),a;if(0==i.size&&""==i.type)return a[1]=f._assets.textParse(n.captions.errors.remoteFile,i),a;if((4096==i.size||64==i.size)&&""==i.type)return a[1]=f._assets.textParse(n.captions.errors.folderUpload,i),a;if(!n.skipFileNameCheck){d=!1;if($.each(f._itFl,function(e,t){if(t!=i&&1==t.choosed&&t.file&&t.name==i.name)return d=!0,t.file.size!=i.size||t.file.type!=i.type||i.file.lastModified&&t.file.lastModified&&t.file.lastModified!=i.file.lastModified||!(1<r.length)?(a[1]=f._assets.textParse(n.captions.errors.fileName,i),a[2]=!1):a[2]=!0,!1}),d)return a}return!0},append:function(e){if((e=$.isArray(e)?e:[e]).length){for(var t,i=0;i<e.length;i++)f._assets.keyCompare(e[i],["name","file","size","type"])&&(t=f._itFl[f.files.add(e[i],"appended")],n.thumbnails&&f.thumbnails.item(t));return f.set("feedback",null),f.set("listInput",null),n.afterSelect&&$.isFunction(n.afterSelect)&&n.afterSelect(l,p,o,s),1!=e.length||t}},update:function(e,t){var o,i;-1==f._itFl.indexOf(e)||e.upload&&e.upload.$ajax||(o=e,i=f.files.add($.extend(e,t),"updated"),(e=f._itFl[i]).popup&&e.popup.close&&e.popup.close(),n.thumbnails&&o.html&&f.thumbnails.item(e,o.html),f.set("listInput",null))},find:function(o){var i=null;return $.each(f._itFl,function(e,t){if(t.html&&t.html.is(o))return i=t,!1}),i},remove:function(i,r){var a;!r&&n.onRemove&&$.isFunction(n.onRemove)&&!1===n.onRemove(i,l,p,o,s)||(i.html&&(n.thumbnails.onItemRemove&&$.isFunction(n.thumbnails.onItemRemove)&&!r?n.thumbnails.onItemRemove(i.html,l,p,o,s):i.html.remove()),i.upload&&i.upload.$ajax&&i.upload.cancel&&i.upload.cancel(!0),i.popup&&i.popup.close&&(i.popup.node=null,i.popup.close()),i.reader.src&&(i.reader.node=null,URL.revokeObjectURL(i.reader.src)),i.input&&(a=!0,$.each(f._itFl,function(e,t){if(i!=t&&(i.input==t.input||r&&1<i.input.get(0).files.length))return a=!1}),a&&(f.isAddMoreMode()&&1<sl.length?(f.set("nextInput"),sl.splice(sl.indexOf(i.input),1),i.input.remove()):f.set("input",""))),-1<f._pfrL.indexOf(i)&&f._pfrL.splice(f._pfrL.indexOf(i),1),-1<f._pfuL.indexOf(i)&&f._pfuL.splice(f._pfuL.indexOf(i),1),-1<f._itFl.indexOf(i)&&f._itFl.splice(f._itFl.indexOf(i),1),i=null,0==f._itFl.length&&f.reset(),f.set("feedback",null),f.set("listInput",null))},getItemAttr:function(e,t){var o=null;return e&&(void 0!==e[t]?o=e[t]:e.data&&void 0!==e.data[t]&&(o=e.data[t])),o},clear:function(e){for(var t=0;t<f._itFl.length;){var i=f._itFl[t];e||!i.appended?(i.html&&i.html&&f._itFl[t].html.remove(),i.upload&&i.upload.$ajax&&f.upload.cancel(i),f._itFl.splice(t,1)):t++}f.set("feedback",null),f.set("listInput",null),0==f._itFl.length&&n.onEmpty&&$.isFunction(n.onEmpty)&&n.onEmpty(l,p,o,s)}},reset:function(e){e&&(f.clipboard._timer&&f.clipboard.clean(),$.each(sl,function(e,t){t.is(s)||t.remove()}),sl=[],f.set("input","")),f._itRl=[],f._pfuL=[],f._pfrL=[],f.files.clear(e)},destroy:function(){f.reset(!0),f.bindUnbindEvents(!1),s.closest("form").off("reset",f.reset),s.removeAttr("style"),p.before(s),delete s.get(0).FileUploader,p.remove(),p=o=l=null},_assets:{toBytes:function(e){return 1048576*parseInt(e)},bytesToText:function(e){if(0==e)return"0 Byte";var t=Math.floor(Math.log(e)/Math.log(1024)),o=e/Math.pow(1024,t),i=!1;return 1e3<o&&t<8&&(t+=1,o=e/Math.pow(1024,t),i=!0),o.toPrecision(i?2:3)+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][t]},escape:function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},secondsToText:function(e,t){e=parseInt(Math.round(e),10);var o=Math.floor(e/3600),i=Math.floor((e-3600*o)/60),n="";return(0<o||!t)&&(n+=(o<10?"0":"")+o+(t?"h ":":")),(0<i||!t)&&(n+=(i<10&&!t?"0":"")+i+(t?"m ":":")),n+=((e=e-3600*o-60*i)<10&&!t?"0":"")+e+(t?"s":"")},pxToRatio:function(e,t){var o=function(e,t){return 0==t?e:o(t,e%t)},i=o(e,t);return[e/i,t/i]},ratioToPx:function(e,t,o){return(o=(o+"").split(":")).length<2?null:[t/o[1]*o[0],e/o[0]*o[1],o[0],o[1]]},hasAttr:function(e,t){var o=(t=t||s).attr(e);return!(!o||void 0===o)},copyAllAttributes:function(e,t){return $.each(t.get(0).attributes,function(){"required"!=this.name&&"type"!=this.name&&"id"!=this.name&&e.attr(this.name,this.value)}),t.get(0).FileUploader&&(e.get(0).FileUploader=t.get(0).FileUploader),e},isIntoView:function(e){var t=$(window).scrollTop(),o=t+window.innerHeight,i=e.offset().top,n=i+e.outerHeight();return t<i&&n<o},isBlankCanvas:function(e){var t=document.createElement("canvas"),o=!1;t.width=e.width,t.height=e.height;try{o=e.toDataURL()==t.toDataURL()}catch(e){}return t=null,o},generateFileName:function(e,t){function o(e){return e<10&&(e="0"+e),e}var i=new Date,e=e?"."+e:"";return(t=t||"")+i.getFullYear()+"-"+o(i.getMonth()+1)+"-"+o(i.getDate())+" "+o(i.getHours())+"-"+o(i.getMinutes())+"-"+o(i.getSeconds())+e},arrayBufferToBase64:function(e){for(var t="",o=new Uint8Array(e),i=0;i<o.byteLength;i++)t+=String.fromCharCode(o[i]);return window.btoa(t)},dataURItoBlob:function(e,t){for(var o=atob(e.split(",")[1]),i=e.split(",")[0].split(":")[1].split(";")[0],n=new ArrayBuffer(o.length),r=new Uint8Array(n),a=0;a<o.length;a++)r[a]=o.charCodeAt(a);var l=new DataView(n);return new Blob([l.buffer],{type:t||i})},getExifOrientation:function(e,p){var t=new FileReader,d={1:0,2:-1,3:180,4:-180,5:-90,6:90,7:-270,8:270};t.onload=function(e){var t=new DataView(e.target.result),o=1;if(t.byteLength&&65496==t.getUint16(0,!1))for(var i=t.byteLength,n=2;n<i&&!(t.getUint16(n+2,!1)<=8);){var r=t.getUint16(n,!1);if(n+=2,65505==r){if(1165519206!=t.getUint32(n+=2,!1))break;var a,l=18761==t.getUint16(n+=6,!1);n+=t.getUint32(n+4,l),a=t.getUint16(n,l),n+=2;for(var s=0;s<a;s++)if(274==t.getUint16(n+12*s,l)){o=t.getUint16(n+12*s+8,l),i=0;break}}else{if(65280!=(65280&r))break;n+=t.getUint16(n,!1)}}p&&p(d[o]||0)},t.onerror=function(){p&&p("")},t.readAsArrayBuffer(e)},textParse:function(text,opts,noOptions){switch(opts=noOptions?opts||{}:$.extend({},{limit:n.limit,maxSize:n.maxSize,fileMaxSize:n.fileMaxSize,extensions:n.extensions?n.extensions.join(", "):null,captions:n.captions},opts),typeof text){case"string":for(var key in opts)-1<["name","file","type","size"].indexOf(key)&&(opts[key]=f._assets.escape(opts[key]));text=text.replace(/\$\{(.*?)\}/g,function(match,a){var a=a.replace(/ /g,""),r=void 0!==opts[a]&&null!=opts[a]?opts[a]:"";if(-1<["reader.node"].indexOf(a))return match;if(-1<a.indexOf(".")||-1<a.indexOf("[]")){var x=a.substr(0,-1<a.indexOf(".")?a.indexOf("."):-1<a.indexOf("[")?a.indexOf("["):a.length),y=a.substring(x.length);if(opts[x])try{r=eval('opts["'+x+'"]'+y)}catch(e){r=""}}return r=$.isFunction(r)?f._assets.textParse(r):r,r||""});break;case"function":text=f._assets.textParse(text(opts,l,p,o,s,f._assets.textParse),opts,noOptions)}return opts=null,text},textToColor:function(e){if(!e||0==e.length)return!1;for(var t=0,o=0;t<e.length;o=e.charCodeAt(t++)+((o<<5)-o));for(var t=0,i="#";t<3;i+=("00"+(o>>2*t++&255).toString(16)).slice(-2));return i},isBrightColor:function(e){var t,o,i;return 194<((i=(t=e)&&t.constructor==Array&&3==t.length?t:(o=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(t))?[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]:(o=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(t))?[2.55*parseFloat(o[1]),2.55*parseFloat(o[2]),2.55*parseFloat(o[3])]:(o=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(t))?[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]:(o=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(t))?[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]:"undefined"!=typeof colors?colors[$.trim(t).toLowerCase()]:null)?.2126*i[0]+.7152*i[1]+.0722*i[2]:null)},keyCompare:function(e,t){for(var o=0;o<t.length;o++)if(!$.isPlainObject(e)||!e.hasOwnProperty(t[o]))throw new Error('Could not find valid *strict* attribute "'+t[o]+'" in '+JSON.stringify(e,null,4));return!0},dialogs:{alert:n.dialogs.alert,confirm:n.dialogs.confirm},hasPlugin:function(e){if(navigator.plugins&&navigator.plugins.length)for(var t in navigator.plugins)if(navigator.plugins[t].name&&-1<navigator.plugins[t].name.toLowerCase().indexOf(e))return!0;return!1},isIE:function(){return-1<navigator.userAgent.indexOf("MSIE ")||-1<navigator.userAgent.indexOf("Trident/")||-1<navigator.userAgent.indexOf("Edge")},isMobile:function(){return void 0!==window.orientation||-1!==navigator.userAgent.indexOf("IEMobile")},getDevice:{options:[],header:[navigator.platform,navigator.userAgent,navigator.appVersion,navigator.vendor,window.opera],dataos:[{name:"Windows Phone",value:"Windows Phone",version:"OS"},{name:"Windows",value:"Win",version:"NT"},{name:"iPhone",value:"iPhone",version:"OS"},{name:"iPad",value:"iPad",version:"OS"},{name:"Kindle",value:"Silk",version:"Silk"},{name:"Android",value:"Android",version:"Android"},{name:"PlayBook",value:"PlayBook",version:"OS"},{name:"BlackBerry",value:"BlackBerry",version:"/"},{name:"Macintosh",value:"Mac",version:"OS X"},{name:"Linux",value:"Linux",version:"rv"},{name:"Palm",value:"Palm",version:"PalmOS"}],databrowser:[{name:"Chrome",value:"Chrome",version:"Chrome"},{name:"Firefox",value:"Firefox",version:"Firefox"},{name:"Safari",value:"Safari",version:"Version"},{name:"Internet Explorer",value:"MSIE",version:"MSIE"},{name:"Opera",value:"Opera",version:"Opera"},{name:"BlackBerry",value:"CLDC",version:"CLDC"},{name:"Mozilla",value:"Mozilla",version:"Mozilla"}],init:function(){var e=this.header.join(" ");return{os:this.matchItem(e,this.dataos),browser:this.matchItem(e,this.databrowser)}},matchItem:function(e,t){for(var o,i,n,r=0,a=0,r=0;r<t.length;r+=1)if(new RegExp(t[r].value,"i").test(e)){if(o=new RegExp(t[r].version+"[- /:;]([\\d._]+)","i"),n="",(i=e.match(o))&&i[1]&&(i=i[1]),i)for(i=i.split(/[._]+/),a=0;a<i.length;a+=1)n+=0===a?i[a]+".":i[a];else n="0";return{name:t[r].name,version:parseFloat(n)}}return{name:"unknown",version:0}}}},isSupported:function(){return s&&s.get(0).files},isFileReaderSupported:function(){return window.File&&window.FileList&&window.FileReader},isDefaultMode:function(){return!(n.upload||n.addMore&&1!=n.limit)},isAddMoreMode:function(){return!n.upload&&n.addMore&&1!=n.limit},isUploadMode:function(){return n.upload},_itFl:[],_pfuL:[],_pfrL:[],disabled:!1,locked:!1,rendered:!1};return n.enableApi&&(s.get(0).FileUploader={open:function(){s.trigger("click")},getOptions:function(){return n},getParentEl:function(){return p},getInputEl:function(){return s},getNewInputEl:function(){return o},getListEl:function(){return l},getListInputEl:function(){return n.listInput},getFiles:function(){return f._itFl},getChoosedFiles:function(){return f._itFl.filter(function(e){return e.choosed})},getAppendedFiles:function(){return f._itFl.filter(function(e){return e.appended})},getUploadedFiles:function(){return f._itFl.filter(function(e){return e.uploaded})},getFileList:function(e,t){return f.files.list(e,t,!0)},updateFileList:function(){return f.set("listInput",null),!0},setOption:function(e,t){return n[e]=t,!0},findFile:function(e){return f.files.find(e)},add:function(e,t,o){return!!f.isUploadMode()&&((n=e instanceof Blob?e:(i=/data:[a-z]+\/[a-z]+\;base64\,/.test(e)?e:"data:"+t+";base64,"+btoa(e),f._assets.dataURItoBlob(i,t)))._name=o||f._assets.generateFileName(-1!=n.type.indexOf("/")?n.type.split("/")[1].toString().toLowerCase():"File "),f.onChange(null,[n]),!0);var i,n},append:function(e){return f.files.append(e)},update:function(e,t){return f.files.update(e,t)},remove:function(e){return e=e.jquery?f.files.find(e):e,-1<f._itFl.indexOf(e)&&(f.files.remove(e),!0)},uploadStart:function(){var e=this.getChoosedFiles()||[];if(f.isUploadMode()&&0<e.length&&!e[0].uploaded)for(var t=0;t<e.length;t++)f.upload.send(e[t])},reset:function(){return f.reset(!0),!0},disable:function(e){return f.set("disabled",!0),e&&(f.locked=!0),!0},enable:function(){return f.set("disabled",!1),!(f.locked=!1)},destroy:function(){return f.destroy(),!0},isEmpty:function(){return 0==f._itFl.length},isDisabled:function(){return f.disabled},isRendered:function(){return f.rendered},assets:f._assets,getPluginMode:function(){return f.isDefaultMode()?"default":f.isAddMoreMode()?"addMore":f.isUploadMode()?"upload":void 0}}),f.init(),this})},$.fileuploader={getInstance:function(e){var t=e.prop?e:$(e);return t.length?t.get(0).FileUploader:null}},$.fn.fileuploader.languages={cz:{button:function(e){return"Procházet "+(1==e.limit?"soubor":"soubory")},feedback:function(e){return"Vyberte "+(1==e.limit?"soubor":"soubory")+", který chcete nahrát"},feedback2:function(e){return e.length+" "+(1<e.length?"vybráno souborů":"vybrán soubor")},confirm:"Potvrdit",cancel:"Zrušeni",name:"Jméno",type:"Format",size:"Velikost",dimensions:"Rozměry",duration:"Trvání",crop:"Oříznout",rotate:"Otočit",sort:"Roztřídit",open:"Otevřít",download:"Stáhnout",remove:"Odstranit",drop:"Pro nahrání přetahněte soubor sem",paste:'<div class="fileuploader-pending-loader"></div> Vkládání souboru, klikněte zde pro zrušeni',removeConfirmation:"Jste si jisti, že chcete odstranit tento soubor?",errors:{filesLimit:function(e){return"Pouze ${limit} "+(1==e.limit?"soubor může být nahrán":"soubory mohou byt nahrané")+"."},filesType:"Pouze ${extensions} soubory mohou byt nahrané.",fileSize:"${name} příliš velký! Prosím, vyberte soubor do velikosti ${fileMaxSize} MB.",filesSizeAll:"Vybraný soubor je příliš velký! Prosím, vyberte soubor do velikosti ${maxSize} MB.",fileName:"Soubor s tímto názvem  ${name} byl už vybran.",remoteFile:"Vzdálené soubory nejsou povoleny.",folderUpload:"Složky nejsou povolené."}},de:{button:function(e){return(1==e.limit?"Datei":"Dateien")+" durchsuchen"},feedback:function(e){return(1==e.limit?"Datei":"Dateien")+" zum Hochladen auswählen"},feedback2:function(e){return e.length+" "+(1==e.length?"Datei":"Dateien")+" ausgewählt"},confirm:"Speichern",cancel:"Schließen",name:"Name",type:"Typ",size:"Größe",dimensions:"Format",duration:"Länge",crop:"Crop",rotate:"Rotieren",sort:"Sortieren",open:"Öffnen",download:"Herunterladen",remove:"Löschen",drop:"Die Dateien hierher ziehen, um sie hochzuladen",paste:'<div class="fileuploader-pending-loader"></div> Eine Datei wird eingefügt. Klicken Sie hier zum abzubrechen',removeConfirmation:"Möchten Sie diese Datei wirklich löschen?",errors:{filesLimit:function(e){return"Nur ${limit} "+(1==e.limit?"Datei darf":"Dateien dürfen")+" hochgeladen werden."},filesType:"Nur ${extensions} Dateien dürfen hochgeladen werden.",fileSize:"${name} ist zu groß! Bitte wählen Sie eine Datei bis zu ${fileMaxSize} MB.",filesSizeAll:"Die ausgewählten Dateien sind zu groß! Bitte wählen Sie Dateien bis zu ${maxSize} MB.",fileName:"Eine Datei mit demselben Namen ${name} ist bereits ausgewählt.",remoteFile:"Remote-Dateien sind nicht zulässig.",folderUpload:"Ordner sind nicht erlaubt."}},dk:{button:function(e){return"Gennemse "+(1==e.limit?"fil":"filer")},feedback:function(e){return"Vælg "+(1==e.limit?"fil":"filer")+" til upload"},feedback2:function(e){return e.length+" "+(1==e.length?"fil":"filer")+" er valgt"},confirm:"Bekræft",cancel:"Fortrydl",name:"Navn",type:"Type",size:"Størrelse",dimensions:"Dimensioner",duration:"Varighed’",crop:"Tilpas",rotate:"Rotér",sort:"Sorter",open:"Åben",download:"Hent",remove:"Slet",drop:"Drop filer her til upload",paste:"Overfør fil, klik her for at afbryde",removeConfirmation:"Er du sikker på, du ønsker at slette denne fil?",errors:{filesLimit:function(e){return"Du kan kun uploade ${limit} "+(1==e.limit?"fil":"filer")+" ad gangen."},filesType:"Det er kun tilladt at uploade ${extensions} filer.",fileSize:"${name} er for stor! Vælg venligst en fil på højst ${fileMaxSize} MB.",filesSizeAll:"De valgte filer er for store! Vælg venligst filer op til ${maxSize} MB ialt.",fileName:"Du har allerede valgt en fil med navnet ${name}.",remoteFile:"Fremmede filer er ikke tilladt.",folderUpload:"Mapper er ikke tilladt."}},en:{button:function(e){return"Browse "+(1==e.limit?"file":"files")},feedback:function(e){return"Choose "+(1==e.limit?"file":"files")+" to upload"},feedback2:function(e){return e.length+" "+(1<e.length?" files were":" file was")+" chosen"},confirm:"Confirm",cancel:"Cancel",name:"Name",type:"Type",size:"Size",dimensions:"Dimensions",duration:"Duration",crop:"Crop",rotate:"Rotate",sort:"Sort",open:"Open",download:"Download",remove:"Delete",drop:"Drop the files here to upload",paste:'<div class="fileuploader-pending-loader"></div> Pasting a file, click here to cancel',removeConfirmation:"Are you sure you want to delete this file?",errors:{filesLimit:function(e){return"Only ${limit} "+(1==e.limit?"file":"files")+" can be uploaded."},filesType:"Only ${extensions} files are allowed to be uploaded.",fileSize:"${name} is too large! Please choose a file up to ${fileMaxSize} MB.",filesSizeAll:"The chosen files are too large! Please select files up to ${maxSize} MB.",fileName:"A file with the same name ${name} is already selected.",remoteFile:"Remote files are not allowed.",folderUpload:"Folders are not allowed."}},es:{button:function(e){return"Examinar "+(1==e.limit?"archivo":"archivos")},feedback:function(e){return"Selecciona "+(e.limit,"archivos")+" para subir"},feedback2:function(e){return e.length+" "+(1<e.length?"archivos seleccionados":"archivo seleccionado")},confirm:"Guardar",cancel:"Anular",name:"Nombre",type:"Tipo",size:"Tamaño",dimensions:"Dimensiones",duration:"Duracion",crop:"Corta",rotate:"Rotar",sort:"Ordenar",open:"Abierto",download:"Descargar",remove:"Eliminar",drop:"Suelta los archivos aquí para subirlos",paste:'<div class="fileuploader-pending-loader"></div> Pegar un archivo, haga clic aquí para cancelar',removeConfirmation:"¿Estás seguro de que deseas eliminar este archivo?",errors:{filesLimit:function(e){return"Solo se pueden seleccionar ${limit} "+(1==e.limit?"archivo":"archivos")+"."},filesType:"Solo se pueden seleccionar archivos ${extensions}.",fileSize:"${name} es demasiado grande! Por favor, seleccione un archivo hasta ${fileMaxSize} MB.",filesSizeAll:"¡Los archivos seleccionados son demasiado grandes! Por favor seleccione archivos de hasta ${maxSize} MB.",fileName:"Un archivo con el mismo nombre ${name} ya está seleccionado.",remoteFile:"Los archivos remotos no están permitidos.",folderUpload:"No se permiten carpetas."}},fr:{button:function(e){return"Parcourir "+(1==e.limit?"le fichier":"les fichiers")},feedback:function(e){return"Choisir "+(1==e.limit?"le fichier ":"les fichiers")+" à télécharger"},feedback2:function(e){return e.length+" "+(1<e.length?"fichiers ont été choisis":"fichier a été choisi")},confirm:"Confirmer",cancel:"Annuler",name:"Nom",type:"Type",size:"Taille",dimensions:"Dimensions",duration:"Durée",crop:"Recadrer",rotate:"Pivoter",sort:"Trier",download:"Télécharger",remove:"Supprimer",drop:"Déposez les fichiers ici pour les télécharger",paste:'<div class="fileuploader-pending-loader"></div> Collant un fichier, cliquez ici pour annuler.',removeConfirmation:"Êtes-vous sûr de vouloir supprimer ce fichier ?",errors:{filesLimit:"Seuls les fichiers ${limit} peuvent être téléchargés.",filesType:"Seuls les fichiers ${extensions} peuvent être téléchargés.",fileSize:"${name} est trop lourd, la limite est de ${fileMaxSize} MB.",filesSizeAll:"Les fichiers que vous avez choisis sont trop lourd, la limite totale est de ${maxSize} MB.",fileName:"Le fichier portant le nom ${name} est déjà sélectionné.",folderUpload:"Vous n'êtes pas autorisé à télécharger des dossiers."}},it:{button:function(e){return"Sfoglia"+(1==e.limit?"il file":"i file")},feedback:function(e){return"Seleziona "+(1==e.limit?"file":"i file")+" per caricare"},feedback2:function(e){return e.length+" "+(1<e.length?"i file sono scelti":"il file è scelto")},confirm:"Conferma",cancel:"Cancella",name:"Nome",type:"Tipo file",size:"Dimensione file",dimensions:"Dimensioni",duration:"Durata",crop:"Taglia",rotate:"Ruota",sort:"Ordina",open:"Apri",download:"Scarica",remove:"Elimina",drop:"Posiziona il file qui per caricare",paste:'<div class="fileuploader-pending-loader"></div> Incolla file, clicca qui per cancellare',removeConfirmation:"Sei sicuro di voler eliminare il file?",errors:{filesLimit:"Solo ${limit} file possono essere caricati.",filesType:"Solo ${extensions} file possono essere caricati.",fileSize:"${name} è troppo grande! Scegli un file fino a ${fileMaxSize} MB.",filesSizeAll:"I file selezioni sono troppo grandi! Scegli un file fino a ${maxSize} MB.",fileName:"Un file con lo stesso nome ${name} è già selezionato.",remoteFile:"I file remoti non sono consentiti.",folderUpload:"Le cartelle non sono consentite."}},lv:{button:function(e){return"Izvēlieties "+(1==e.limit?"fails":"faili")},feedback:function(e){return"Izvēliejaties "+(1==e.limit?"fails":"faili")+" lejupielādēt"},feedback2:function(e){return e.length+" "+(1<e.length?"failus izvelēts":"fails izvēlēts")},confirm:"Saglabāt",cancel:"Atcelt",name:"Vārds",type:"Formāts",size:"Izmērs",dimensions:"Izmēri",duration:"Ilgums",crop:"Nogriezt",rotate:"Pagriezt",sort:"Kārtot",open:"Atvērt",download:"Lejupielādēt",remove:"Dzēst",drop:"Lai augšupielādētu, velciet failus šeit",paste:'<div class="fileuploader-pending-loader"></div> Ievietojiet failu, noklikšķiniet šeit, lai atceltu',removeConfirmation:"Vai tiešām vēlaties izdzēst šo failu?",errors:{filesLimit:function(e){return"Tikai ${limit} "+(1==e.limit?"failu var augšupielādēt":"failus var augšupielādēt")+"."},filesType:"Tikai ${extensions} failus var augšupielādēt.",fileSize:"${name} ir par lielu! Lūdzu, atlasiet failu līdz ${fileMaxSize} MB.",filesSizeAll:"Atlasītie faili ir pārāk lieli! Lūdzu, atlasiet failus līdz ${maxSize} MB.",fileName:"Fails ar tādu pašu nosaukumu ${name} jau ir atlasīts.",remoteFile:"Attālie faili nav atļauti.",folderUpload:"Mapes nav atļautas."}},nl:{button:function(e){return(1==e.limit?"Bestand":"Bestanden")+" kiezen"},feedback:function(e){return"Kies "+(1==e.limit?"een bestand":"bestanden")+" om te uploaden"},feedback2:function(e){return e.length+" "+(1<e.length?"bestanden":"bestand")+" gekozen"},confirm:"Opslaan",cancel:"Annuleren",name:"Naam",type:"Type",size:"Grootte",dimensions:"Afmetingen",duration:"Duur",crop:"Uitsnijden",rotate:"Draaien",sort:"Sorteren",open:"Open",download:" Downloaden",remove:"Verwijderen",drop:"Laat de bestanden hier vallen om te uploaden",paste:'<div class="fileuploader-pending-loader"></div> Een bestand wordt geplakt, klik hier om te annuleren',removeConfirmation:"Weet u zeker dat u dit bestand wilt verwijderen?",errors:{filesLimit:function(e){return"Er "+(1==e.limit?"mag":"mogen")+" slechts ${limit} "+(1==e.limit?"bestand":"bestanden")+" worden geüpload."},filesType:"Alleen ${extensions} mogen worden geüpload.",fileSize:"${name} is te groot! Kies een bestand tot ${fileMaxSize} MB.",filesSizeAll:"De gekozen bestanden zijn te groot! Kies bestanden tot ${maxSize} MB.",fileName:"Een bestand met dezelfde naam ${name} is al gekozen.",remoteFile:"Externe bestanden zijn niet toegestaan.",folderUpload:"Mappen zijn niet toegestaan."}},pl:{button:function(e){return"Wybierz "+(1==e.limit?"plik":"pliki")},feedback:function(e){return"Wybierz "+(1==e.limit?"plik":"pliki")+" do przesłania"},feedback2:function(e){return e.length+" "+(1<e.length?"pliki zostały wybrane":"plik został wybrany")},confirm:"Potwierdź",cancel:"Anuluj",name:"Nazwa",type:"Typ",size:"Rozmiar",dimensions:"Wymiary",duration:"Czas trwania",crop:"Przytnij",rotate:"Obróć",sort:"Sortuj",open:"Otwórz",download:"Pobierz",remove:"Usuń",drop:"Upuść pliki tutaj do przesłania",paste:'<div class="fileuploader-pending-loader"></div> Wklejając plik, kliknij tutaj, aby anulować',removeConfirmation:"Czy jesteś pewien, że chcesz usunąć ten plik?",errors:{filesLimit:function(e){return"Tylko ${limit} "+(1==e.limit?"plik":"pliki")+" można wybrać."},filesType:"Tylko pliki ${extensions} mogą zostać pobrane.",fileSize:"Plik ${name} jest za duży! Proszę wybrać plik do ${fileMaxSize} MB.",filesSizeAll:"Wybrane pliki są za duże! Proszę wybrać pliki do  ${maxSize} MB.",fileName:", Plik o tej samej nazwie ${name} już został wybrany.",remoteFile:"Zdalne pliki nie są dozwolone.",folderUpload:"Foldery nie są dozwolone."}},pt:{button:function(e){return"Escolher "+(1==e.limit?"arquivo":"arquivos")},feedback:function(e){return"Escolha "+(1==e.limit?"arquivo":"arquivos")+" a carregar"},feedback2:function(e){return e.length+" "+(1<e.length?"arquivos foram escolhidos":"arquivo foi escolhido")},confirm:"Confirmar",cancel:"Cancelar",name:"Nome",type:"Tipo",size:"Tamanho",dimensions:"Dimensões",duration:"Duração",crop:"Recorte",rotate:"Girar",sort:"Ordenar",open:"Abrir",download:"Baixar",remove:"Excluir",drop:"Solte os arquivos aqui para fazer o upload",paste:'<div class="fileuploader-pending-loader"></div> Colando um arquivo, clique aqui para cancelar',removeConfirmation:"Tem certeza de que deseja excluir este arquivo?",errors:{filesLimit:function(e){return"Apenas ${limit} "+(1==e.limit?"arquivo a ser carregado":"arquivos a serem carregados")+"."},filesType:"Somente arquivos ${extensions} podem ser carregados.",fileSize:"${name} é muito grande! Selecione um arquivo de até ${fileMaxSize} MB.",filesSizeAll:"Os arquivos selecionados são muito grandes! Selecione arquivos de até ${maxSize} MB.",fileName:"Um arquivo com o mesmo nome ${name} já está selecionado.",remoteFile:"Arquivos remotos não são permitidos.",folderUpload:"Pastas não são permitidas."}},ro:{button:function(e){return"Atașează "+(1==e.limit?"fișier":"fișiere")},feedback:function(e){return"Selectează "+(1==e.limit?"fișier":"fișiere")+" pentru încărcare"},feedback2:function(e){return e.length+" "+(1<e.length?" fișiere":" fișier")+" selectate"},confirm:"Confirmă",cancel:"Anulează",name:"Nume",type:"Tip",size:"Mărimea",dimensions:"Dimensiunea",duration:"Durata",crop:"Crop",rotate:"Rotire",sort:"Sortare",open:"Deschide",download:"Download",remove:"Șterge",drop:"Aruncați fișierele aici pentru a le încărca",paste:'<div class="fileuploader-pending-loader"></div> Se atașează fișier, faceți click aici pentru anulare',removeConfirmation:"Sigur doriți să ștergeți acest fișier?",errors:{filesLimit:function(e){return"Doar ${limit} "+(1==e.limit?"fișier poate fi selectat":"fișiere pot fi selectat")+"."},filesType:"Doar fișierele ${extensions} pot fi încărcate.",fileSize:"${name} este prea mare! Vă rugăm să selectați un fișier până la ${fileMaxSize} MB.",filesSizeAll:"Fișierele selectate sunt prea mari! Vă rugăm să selectați fișiere până la ${maxSize} MB.",fileName:"Fișierul cu același numele ${nume} a fost deja selectat.",remoteFile:"Fișierele remote nu sunt permise.",folderUpload:"Folderele nu sunt permise."}},ru:{button:function(e){return"Выбрать "+(1==e.limit?"файл":"файлы")},feedback:function(e){return"Выберите "+(1==e.limit?"файл":"файлы")+" для загрузки"},feedback2:function(e){return e.length+" "+(1<e.length?"файлов выбрано":"файл выбран")},confirm:"Сохранить",cancel:"Отмена",name:"Имя",type:"Формат",size:"Размер",dimensions:"Размеры",duration:"Длительность",crop:"Обрезать",rotate:"Повернуть",sort:"Сортировть",open:"Открыть",download:"Скачать",remove:"Удалить",drop:"Перетащите файлы сюда для загрузки",paste:'<div class="fileuploader-pending-loader"></div> Вставка файла, нажмите здесь, чтобы отменить',removeConfirmation:"Вы уверены, что хотите удалить этот файл?",errors:{filesLimit:function(e){return"Только ${limit} "+(1==e.limit?"файл может быть загружен":"файлов могут быть загружены")+"."},filesType:"Только ${extensions} файлы могут быть загружены.",fileSize:"${name} слишком большой! Пожалуйста, выберите файл до ${fileMaxSize} МБ.",filesSizeAll:"Выбранные файлы слишком большие! Пожалуйста, выберите файлы до ${maxSize} МБ.",fileName:"Файл с таким именем ${name} уже выбран.",remoteFile:"Удаленные файлы не допускаются.",folderUpload:"Папки не допускаются."}},tr:{button:function(e){return(1==e.limit?"Dosya":"Dosyaları")+" seç"},feedback:function(e){return"Yüklemek istediğiniz "+(1==e.limit?"dosyayı":"dosyaları")+" seçin."},feedback2:function(e){return e.length+" "+(1<e.length?"dosyalar":"dosya")+" seçildi."},confirm:"Onayla",cancel:"İptal",name:"İsim",type:"Tip",size:"Boyut",dimensions:"Boyutlar",duration:"Süre",crop:"Kırp",rotate:"Döndür",sort:"Sırala",open:"Aç",download:"İndir",remove:"Sil",drop:"Yüklemek için dosyaları buraya bırakın",paste:'<div class="fileuploader-pending-loader"></div> Bir dosyayı yapıştırmak veya iptal etmek için buraya tıklayın',removeConfirmation:"Bu dosyayı silmek istediğinizden emin misiniz?",errors:{filesLimit:function(e){return"Sadece ${limit} "+(1==e.limit?"dosya":"dosyalar")+" yüklenmesine izin verilir."},filesType:"Sadece ${extensions} dosyaların yüklenmesine izin verilir.",fileSize:"${name} çok büyük! Lütfen ${fileMaxSize} MB'a kadar bir dosya seçin.",filesSizeAll:"Seçilen dosyalar çok büyük! Lütfen ${maxSize} MB'a kadar dosyaları seçin",fileName:"Aynı ada sahip bir dosya ${name} zaten seçilmiştir.",remoteFile:"Uzak dosyalara izin verilmez.",folderUpload:"Klasörlere izin verilmez."}}},$.fn.fileuploader.defaults={limit:null,maxSize:null,fileMaxSize:null,extensions:null,disallowedExtensions:null,changeInput:!0,inputNameBrackets:!0,theme:"default",thumbnails:{box:'<div class="fileuploader-items"><ul class="fileuploader-items-list"></ul></div>',boxAppendTo:null,item:'<li class="fileuploader-item"><div class="columns"><div class="column-thumbnail">${image}<span class="fileuploader-action-popup"></span></div><div class="column-title"><div title="${name}">${name}</div><span>${size2}</span></div><div class="column-actions"><button type="button" class="fileuploader-action fileuploader-action-remove" title="${captions.remove}"><i class="fileuploader-icon-remove"></i></a></div></div><div class="progress-bar2">${progressBar}<span></span></div></li>',item2:'<li class="fileuploader-item"><div class="columns"><div class="column-thumbnail">${image}<span class="fileuploader-action-popup"></span></div><div class="column-title"><a href="${file}" target="_blank"><div title="${name}">${name}</div><span>${size2}</span></a></div><div class="column-actions"><a href="${data.url}" class="fileuploader-action fileuploader-action-download" title="${captions.download}" download><i class="fileuploader-icon-download"></i></a><button type="button" class="fileuploader-action fileuploader-action-remove" title="${captions.remove}"><i class="fileuploader-icon-remove"></i></a></div></div></li>',popup:{container:"body",loop:!0,arrows:!0,zoomer:!0,template:function(e){return'<div class="fileuploader-popup-preview"><button type="button" class="fileuploader-popup-move" data-action="prev"><i class="fileuploader-icon-arrow-left"></i></button><div class="fileuploader-popup-node node-${format}">${reader.node}</div><div class="fileuploader-popup-content"><div class="fileuploader-popup-footer"><ul class="fileuploader-popup-tools">'+("image"==e.format&&e.reader.node&&e.editor?(e.editor.cropper?'<li><button type="button" data-action="crop"><i class="fileuploader-icon-crop"></i> ${captions.crop}</button></li>':"")+(e.editor.rotate?'<li><button type="button" data-action="rotate-cw"><i class="fileuploader-icon-rotate"></i> ${captions.rotate}</button></li>':""):"")+("image"==e.format?'<li class="fileuploader-popup-zoomer"><button type="button" data-action="zoom-out">&minus;</button><input type="range" min="0" max="100"><button type="button" data-action="zoom-in">&plus;</button><span></span> </li>':"")+(e.data.url?'<li><a href="'+e.data.url+'" data-action="open" target="_blank"><i class="fileuploader-icon-external"></i> ${captions.open}</a></li>':"")+'<li><button type="button" data-action="remove"><i class="fileuploader-icon-trash"></i> ${captions.remove}</button></li></ul></div><div class="fileuploader-popup-header"><ul class="fileuploader-popup-meta"><li><span>${captions.name}:</span><h5>${name}</h5></li><li><span>${captions.type}:</span><h5>${extension.toUpperCase()}</h5></li><li><span>${captions.size}:</span><h5>${size2}</h5></li>'+(e.reader&&e.reader.width?"<li><span>${captions.dimensions}:</span><h5>${reader.width}x${reader.height}px</h5></li>":"")+(e.reader&&e.reader.duration?"<li><span>${captions.duration}:</span><h5>${reader.duration2}</h5></li>":"")+'</ul><div class="fileuploader-popup-info"></div><ul class="fileuploader-popup-buttons"><li><button type="button" class="fileuploader-popup-button" data-action="cancel">${captions.cancel}</a></li>'+(e.editor?'<li><button type="button" class="fileuploader-popup-button button-success" data-action="save">${captions.confirm}</button></li>':"")+'</ul></div></div><button type="button" class="fileuploader-popup-move" data-action="next"><i class="fileuploader-icon-arrow-right"></i></button></div>'},onShow:function(t){t.popup.html.on("click",'[data-action="remove"]',function(e){t.popup.close(),t.remove()}).on("click",'[data-action="cancel"]',function(e){t.popup.close()}).on("click",'[data-action="save"]',function(e){t.editor&&t.editor.save(),t.popup.close&&t.popup.close()})},onHide:null},itemPrepend:!1,removeConfirmation:!0,startImageRenderer:!0,synchronImages:!0,useObjectUrl:!1,canvasImage:!0,videoThumbnail:!0,pdf:!0,exif:!0,touchDelay:0,_selectors:{list:".fileuploader-items-list",item:".fileuploader-item",start:".fileuploader-action-start",retry:".fileuploader-action-retry",remove:".fileuploader-action-remove",sorter:".fileuploader-action-sort",rotate:".fileuploader-action-rotate",popup:".fileuploader-popup-preview",popup_open:".fileuploader-action-popup"},beforeShow:null,onItemShow:null,onItemRemove:function(e){e.children().animate({opacity:0},200,function(){setTimeout(function(){e.slideUp(200,function(){e.remove()})},100)})},onImageLoaded:null},editor:!1,sorter:!1,reader:{thumbnailTimeout:5e3,timeout:12e3,maxSize:20},files:null,upload:null,dragDrop:!0,addMore:!1,skipFileNameCheck:!1,clipboardPaste:!0,listInput:!0,enableApi:!1,listeners:null,onSupportError:null,beforeRender:null,afterRender:null,beforeSelect:null,onFilesCheck:null,onFileRead:null,onSelect:null,afterSelect:null,onListInput:null,onRemove:null,onEmpty:null,dialogs:{alert:function(e){return alert(e)},confirm:function(e,t){confirm(e)&&t()}},captions:$.fn.fileuploader.languages.en}});(function($){$.fn.serialize_form=function(){var data=new FormData();$.each($(this).find('input[type="file"]'),function(i,tag){$.each($(tag)[0].files,function(i,file){data.append(tag.name,file)})});let params=$(this).serializeArray();$.each(params,function(i,val){data.append(val.name,val.value)});return data}
function getNowDateTimeStap(){var nowDate=new Date();var nowHours=nowDate.getHours();var nowMinutes=nowDate.getMinutes();var nowMillis=nowDate.getMilliseconds().toString().slice(0,-1);nowMinutes=nowMinutes<10?'0'+nowMinutes:nowMinutes;var nowStrTime=nowHours+':'+nowMinutes+':'+nowMillis;return nowDate.getFullYear()+'-'+('0'+(nowDate.getMonth()+1)).slice(-2)+"-"+nowDate.getDate()+" "+nowStrTime}
function createSuccessFormSubmitDatalayerEvents(formData){if(!window.dataLayer)return;var eventModel={};var formName=formData.get('form_name');var locationSelectionOnlyForms=['orthodontic-referral','refer','contact']
var formSelectedLocation=(formData.get('office_preference')?$(window.last_form_executed).find('.row-office_preference .fancy-select-title').text():'');if(formName=='appointment'){eventModel.location_select=formSelectedLocation;eventModel.booked_day=formData.get('appt_day');eventModel.time_preference=formData.get('appt_time')}
if(formName=='community'){eventModel.event_date=formData.get('event_date');eventModel.location_select=formSelectedLocation}
if(locationSelectionOnlyForms.includes(formName)){eventModel.location_select=formSelectedLocation}
eventModel.form_submit_timestamp=getNowDateTimeStap();window.dataLayer.push({event:'form_submit_ok',eventModel:eventModel})}
window.onGoogleReCaptchaSubmit=function(token){$(window.last_form_executed).find('.g-recaptcha-response').val(token);$(window.last_form_executed).find('input[type="submit"]').val('Please wait ...').prop('disabled',!0);let form=$(window.last_form_executed);let action=form.attr('action');let data=new FormData(window.last_form_executed);$(window.last_form_executed).find('.g-recaptcha-response').remove();if(!$('input[name="ajaxing"]').length)form.append($('<input type="hidden" name="ajaxing" value="1">'));$.ajax({type:'POST',url:action,data:data,cache:!1,processData:!1,contentType:!1}).done(function($response){if($response=='valid'){if(window.dataLayer!==undefined){window.dataLayer.push({event:'formSubmit'})}
createSuccessFormSubmitDatalayerEvents(data);var text='';if(data.get('form_name')=='review'){text="We appreciate you taking the time to share your kind words and rockstar smile with us!"}else{text="We\'ve received your message and will respond shortly."}
$('.form-wrapper').empty().append($('<h2>').text('Thank You!'),$('<p>').text(text));if($('body').hasClass('page-template-kids-dentist-appointment')){if(innerWidth>1193){$('.form-wrapper').parent('aside').css({paddingBottom:625})}}
$('html,body').animate({scrollTop:$('.form-wrapper').offset().top-200})}else{if(window.dataLayer!==undefined){window.dataLayer.push({event:'form_submit_fail'})}}})}
$('#event_date, #event_deadline').datetimepicker({minDate:new Date(),format:'m/d/Y',formatDate:'m/d/Y',formatTime:'g:ia',timepicker:!1});{$('#fancy-select').ready(function(){var list=$('#fancy-select ul li');if(list.length==1){$('ul.select-options').css('column-count','1')
$('#office_preference').val(list.attr('id'));$('.fancy-select-title').text(list.text())}})
$('.fancy-select .fancy-select-title').on('click',function(e){$('.options').toggleClass('hidden');$(this).toggleClass('active')});$('.fancy-select ul.select-options > li').on('click',function(e){$(this).closest('.fancy-select').find('.fancy-select-title').toggleClass('active')});$('#fancy-select ul li').on('click',function(e){e.preventDefault();let text=$(this).html();let id=$(this).attr('id');$('.fancy-select-title').html(text);$('.options').addClass('hidden');$('#office_preference').val(id)});$('.fancy-select-colors .fancy-select-colors-title').on('click',function(e){$('.options-colors').toggleClass('hidden');$(this).toggleClass('active')});$('.fancy-select-colors ul.select-options > li').on('click',function(e){$(this).closest('.fancy-select-colors').find('.fancy-select-colors-title').toggleClass('active')});$('#fancy-select-colors ul li').on('click',function(e){e.preventDefault();let text=$(this).html();let id=$(this).attr('id');$('.fancy-select-colors-title').html(text);$('.options-colors').addClass('hidden');$('#mouthguard_colors').val(id)});if($('body').hasClass('page-template-share-feedback')){$('#fancy-select ul li').on('click',function(e){e.preventDefault();let text=$(this).html();let id=$(this).attr('id');let facebook_link=$('#fancy-select-2 ul li[id='+id+']').data('facebook_link');let google_link=$('#fancy-select-2 ul li[id='+id+']').data('google_link');$('.fancy-select-title-2').html(text);$('.options-2').addClass('hidden');$('.share-review a.share-link.facebook').attr('href',facebook_link).removeAttr("disabled");$('.share-review a.share-link.google').attr('href',google_link).removeAttr("disabled");if(!$('html').hasClass('review-office-preference-selected')){$('html').addClass('review-office-preference-selected')}});$('.fancy-select .fancy-select-title-2').on('click',function(e){$('.options-2').toggleClass('hidden');$(this).toggleClass('active')});$('.fancy-select ul.select-options-2 > li').on('click',function(e){$(this).closest('.fancy-select').find('.fancy-select-title-2').toggleClass('active')});$('#fancy-select-2 ul li').on('click',function(e){e.preventDefault();let text=$(this).html();let id=$(this).attr('id');let facebook_link=$(this).data('facebook_link');let google_link=$(this).data('google_link');$('.fancy-select-title').html(text);$('.fancy-select-title-2').html(text);$('.options').addClass('hidden');$('.options-2').addClass('hidden');$('#office_preference').val(id);$('.share-review a.share-link.facebook').attr('href',facebook_link).removeAttr("disabled");$('.share-review a.share-link.google').attr('href',google_link).removeAttr("disabled");if(!$('html').hasClass('review-office-preference-selected')){$('html').addClass('review-office-preference-selected')}})}
$('#office_preference').on('change',function(){if($(this).val()!=''){$('.row-virtual_consultation_link').removeClass('hidden')}else{$('.row-virtual_consultation_link').addClass('hidden')}})}
if($('body').hasClass('page-template-share-feedback')){$('input[name="review_files"]').fileuploader({changeInput:' ',theme:'boxafter',enableApi:!0,thumbnails:{box:'<div class="fileuploader-items">'+'<ul class="fileuploader-items-list"></ul>'+'</div>'+'<div class="fileuploader-input">'+'<div class="fileuploader-input-inner">'+'<h3>${captions.feedback} ${captions.or} <a>${captions.button}</a></h3>'+'</div>'+'<button type="button" class="fileuploader-input-button"><i class="icon-plus"></i></button>'+'</div>',item:'<li class="fileuploader-item">'+'<div class="columns">'+'<div class="column-thumbnail">${image}<span class="fileuploader-action-popup"></span></div>'+'<div class="column-title">'+'<div title="${name}">${name}</div>'+'<span>${size2}</span>'+'</div>'+'<div class="column-actions">'+'<button type="button" class="fileuploader-action fileuploader-action-remove" title="${captions.remove}"><i class="icon-remove"></i></button>'+'</div>'+'${progressBar}'+'</div>'+'</li>',},afterRender:function(listEl,parentEl,newInputEl,inputEl){var plusInput=parentEl.find('.fileuploader-input'),api=$.fileuploader.getInstance(inputEl.get(0));plusInput.on('click',function(){api.open()});api.getOptions().dragDrop.container=plusInput},upload:{url:ajaxurl,data:{action:'upload_review_files'},type:'POST',enctype:'multipart/form-data',start:!0,synchron:!0,beforeSend:null,onSuccess:function(result,item){console.log('onSuccess returned');console.log('result',result);console.log('item',item);var data={};if(result&&result.files)
data=result;else data.hasWarnings=!0;if(data.isSuccess&&data.files[0]){item.name=data.files[0].name;item.html.find('.column-title > div:first-child').text(data.files[0].name).attr('title',data.files[0].name)}
if(data.hasWarnings){for(var warning in data.warnings){alert(data.warnings[warning])}
item.html.removeClass('upload-successful').addClass('upload-failed');return this.onError?this.onError(item):null}
item.html.find('.fileuploader-action-remove').addClass('fileuploader-action-success');item.html.find('.column-title span').html(item.size2);setTimeout(function(){item.progressBar.fadeOut(400)},400)},onError:function(item){console.log('onError returned');console.log('item',item);if(item.progressBar){item.html.find('.column-title span').html(item.size2);item.progressBar.hide().find('.bar').width(0)}
item.upload.status!='cancelled'&&item.html.find('.fileuploader-action-retry').length==0?item.html.find('.column-actions').prepend('<button type="button" class="fileuploader-action fileuploader-action-retry" title="Retry"><i class="fileuploader-icon-retry"></i></button>'):null},onProgress:function(data,item){item.html.find('.column-title span').html(data.percentage==99?'Uploading...':data.loadedInFormat+' / '+data.totalInFormat);item.progressBar.show().find('.bar').width(data.percentage+"%")},onComplete:null,},onRemove:function(item){$.post(ajaxurl,{action:'remove_review_files',file:item.name})},captions:$.extend(!0,{},$.fn.fileuploader.languages.en,{feedback:'Drag photos, video, or both here',or:'or',button:'Browse',}),})}
window.onGoogleReCaptchaLoad=function(){if($('form#form_contact').length){form_contact_recaptcha_widget=grecaptcha.render('google-recaptcha-container_contact',{sitekey:google_recaptcha_configuration.site_key,callback:onGoogleReCaptchaSubmit,size:'invisible',badge:'inline'})}
if($('form#form_consultation').length){form_consultation_recaptcha_widget=grecaptcha.render('google-recaptcha-container_consultation',{sitekey:google_recaptcha_configuration.site_key,callback:onGoogleReCaptchaSubmit,size:'invisible',badge:'inline'})}
if($('form#form_consultation-no-virtual-consultation').length){form_consultation_no_virtual_consultation_recaptcha_widget=grecaptcha.render('google-recaptcha-container_consultation-no-virtual-consultation',{sitekey:google_recaptcha_configuration.site_key,callback:onGoogleReCaptchaSubmit,size:'invisible',badge:'inline'})}
if($('form#form_appointment').length){form_appointment_recaptcha_widget=grecaptcha.render('google-recaptcha-container_appointment',{sitekey:google_recaptcha_configuration.site_key,callback:onGoogleReCaptchaSubmit,size:'invisible',badge:'inline'})}
if($('form#form_refer').length){form_refer_recaptcha_widget=grecaptcha.render('google-recaptcha-container_refer',{sitekey:google_recaptcha_configuration.site_key,callback:onGoogleReCaptchaSubmit,size:'invisible',badge:'inline'})}
if($('form#form_community').length){form_community_recaptcha_widget=grecaptcha.render('google-recaptcha-container_community',{sitekey:google_recaptcha_configuration.site_key,callback:onGoogleReCaptchaSubmit,size:'invisible',badge:'inline'})}
if($('form#form_orthodontic-referral').length){form_doctorreferral_recaptcha_widget=grecaptcha.render('google-recaptcha-container_orthodontic-referral',{sitekey:google_recaptcha_configuration.site_key,callback:onGoogleReCaptchaSubmit,size:'invisible',badge:'inline'})}
if($('form#form_review').length){form_review_recaptcha_widget=grecaptcha.render('google-recaptcha-container_review',{sitekey:google_recaptcha_configuration.site_key,callback:onGoogleReCaptchaSubmit,size:'invisible',badge:'inline'})}
if($('form#form_custom-mouthguard').length){form_review_recaptcha_widget=grecaptcha.render('google-recaptcha-container_custom-mouthguard',{sitekey:google_recaptcha_configuration.site_key,callback:onGoogleReCaptchaSubmit,size:'invisible',badge:'inline'})}}
{var fields=$("form .row-item select, form .row-item input, form .row-item textarea");fields.each(function(){if(($(this).val()||'').length>0){$(this).addClass('fill');var th=$(this),el=th.prop('tagName').toLowerCase()=='select'?th.parent():th;el.next('label').addClass('active')}});fields.on('focus',function(){$(this).addClass('fill');var th=$(this),el=th.prop('tagName').toLowerCase()=='select'?th.parent():th;el.next('label').addClass('active')});fields.on('change input keydown paste',function(){if($(this).is(':focus')&&$(this).val()&&$(this).val().length>0&&(!$(this).is('[type="radio"]')||$(this).prop('checked'))){$(this).parent().siblings().removeClass('active');$(this).parent().addClass('active');$(this).addClass('fill');var th=$(this),el=th.prop('tagName').toLowerCase()=='select'?th.parent():th;el.next('label').addClass('active')}});fields.on('blur',function(){if(($(this).val()||'').length==0&&(!$(this).is('[type="radio"]')||!$(this).prop('checked'))){$(this).removeClass('fill');var th=$(this),el=th.prop('tagName').toLowerCase()=='select'?th.parent():th;el.next('label').removeClass('active')}});$('form .row-item > div span.radio > i').on('click',function(e){$(this).siblings('label').trigger('click');$(this).siblings('input[type=radio]').prop('checked',!0);$(this).closest('.row-item').removeClass('error').find('.error').removeClass('error');$(this).closest('.row-item').find('div.tooltip').remove()});$('form .row-item > div span.radio > label').on('click',function(e){$(this).parent().parent().find('label').removeClass('active');$(this).addClass('active');$(this).siblings('label').trigger('click');$(this).siblings('input[type=radio]').prop('checked',!0);$(this).closest('.row-item').removeClass('error').find('.error').removeClass('error');$(this).closest('.row-item').find('div.tooltip').remove()});$('form .row-item .checkbox > i').on('click',function(e){$(this).siblings('label').trigger('click');if($(this).siblings('input[type=checkbox]').is(":checked")){$(this).siblings('input[type=checkbox]').prop('checked',!0)}else{$(this).siblings('input[type=checkbox]').prop('checked',!1)}
$(this).closest('.row-item').removeClass('error').find('.error').removeClass('error');$(this).closest('.row-item').find('div.tooltip').remove()});$('form .row-item input[type="tel"]').each(function(){$(this).mask("000-000-0000",{placeholder:''})});$('form .row-item.date input[type="text"]').each(function(){$(this).mask("00/00/0000",{placeholder:''})});$('form .row-item input[name="patient_dob"]').each(function(){$(this).mask("00/00/0000",{placeholder:''})});$('form .tooltip a').on('click',function(e){e.preventDefault();$(this).closest('.tooltip').slideUp();$(this).closest('.row-item').find('input, textarea, select').first().val($(this).html()).trigger('focus').trigger('blur')});$('form .tooptip > i').on('click',function(){$(this).next().click()});$('input[type=file]').on('change',function(){let files=$(this).get(0).files;file_names=Object.keys(files).map(function(key,index){return files[key].name});$('.upload').addClass('hidden');$('.file-name').html(file_names.join(', '))})}
if($('body').hasClass('page-template-free-orthodontic-consultation')){let clicked=!1;function checkClicked(){if(clicked===!1){$('#form_consultation .row-2, #form_consultation-no-virtual-consultation .row-2').hide();$('#form_consultation .row-3, #form_consultation-no-virtual-consultation .row-3').hide();$('#form_consultation .row-4, #form_consultation-no-virtual-consultation .row-4').hide();$('#form_consultation .row-5, #form_consultation-no-virtual-consultation .row-5').hide()}else{$('#form_consultation .row-2, #form_consultation-no-virtual-consultation .row-2').slideDown();$('#form_consultation .row-3, #form_consultation-no-virtual-consultation .row-3').slideDown();$('#form_consultation .row-4, #form_consultation-no-virtual-consultation .row-4').slideDown();$('#form_consultation .row-5, #form_consultation-no-virtual-consultation .row-5').slideDown();$('#form_consultation  .form-submit, #form_consultation-no-virtual-consultation  .form-submit').val('Submit your request')}}
function checkSize(){if(window.innerWidth<782){clicked=!1;checkClicked()}else{clicked=!0;checkClicked()}}
checkSize();$('#form_consultation  .form-submit').on('click',function(e){e.preventDefault();if(clicked===!1){clicked=!0;checkClicked()}else{if($('#form_consultation').submit()){clicked=!1}}});checkClicked()}
$('span.upload').on('click',function(e){$(this).prev().trigger('click')})})(jQuery);(function($){$(".btn.menu").click(function(){$(window).scrollTop(0);$('html').removeClass('contact-form');$("html").toggleClass("mobileMenu mobileNavigating");$("html").addClass("sticky-header");$('.btn.menu .hamburger--squeeze').toggleClass('is-active')});function onMobileNavSlideComplete(submenu){if($('#mobileNavigation .primary-nav ul.sub-menu.expanded').length>0){var top=submenu.parent().offset().top-$('.menu').offset().top;$('#mobile_navigation').animate({scrollTop:top},200,'linear')}
else $('#mobile_navigation').animate({scrollTop:0},200,'linear')}
var max_submenu_depth=0;var depth=-1;$('#mobileNavigation .primary-nav ul.sub-menu').each(function(){var depth=$(this).parent().parentsUntil('#menu-main-menu > ul','ul').length;$(this).data('depth',depth);if(depth>max_submenu_depth)max_submenu_depth=depth});$('#mobileNavigation > ul > li.menu-item-has-children > a').click(function(e){if($(window).width()<949)e.preventDefault();var submenu=$(this).parent().find('> .sub-menu');depth=$(this).parent().parentsUntil('.menu > ul','ul').length;if(submenu.length){$('#mobileNavigation .menu ul.sub-menu.expanded').each(function(){if(!$(this).is(submenu)&&$(this).data('depth')>=depth){$(this).slideUp(0).removeClass('expanded');$(this).closest('li').removeClass('menu-item-expanded')}});submenu.toggleClass('expanded');submenu.closest('li').toggleClass('menu-item-expanded');if(submenu.hasClass('expanded'))submenu.slideDown(100,function(){onMobileNavSlideComplete(submenu)});else submenu.slideUp(100,function(){onMobileNavSlideComplete(submenu)});e.preventDefault()}});$('#menu-main-menu > li a').click(function(e){if($(this).parent().find('.sub-menu').length&&$(this).parent().find('.sub-menu li:not(.mobile_only)').length&&$('body').hasClass('mobile'))e.preventDefault()});$('ul.primary-nav > li > a').on('click',function(e){if($(window).width()<949){var anchor=$(this).closest('a');var li=$(this).closest('li');if(anchor.next('ul.sub-menu').hasClass('expanded')){anchor.children('span.dropdown').addClass('icon-plus');anchor.children('span.dropdown').removeClass('icon-close')}else{anchor.children('span.dropdown').addClass('icon-close');anchor.children('span.dropdown').removeClass('icon-plus')}
anchor.next('ul.sub-menu').toggleClass('expanded');li.toggleClass('menu-item-expanded');if(li.hasClass('menu-item-has-children'))return!1}});$('#header-location-tagline').on('click',function(e){if($(window).width()<949){$(this).toggleClass('active');$('#header-mobile-utility-navigation-more-locations').toggleClass('active')}});$('.menu-search a').on('click',function(e){if($(window).width()<949){$('.form_site_search').toggleClass('active')}})})(jQuery);(function($){let storage_method='cookie';let cookie={set:function(name,value){this.delete(name);this.delete('_gat_UA-26259646-1');let secure=location.protocol=='https:'?'secure':'',cookie=[name,'=',JSON.stringify(value),'; domain=.',window.location.host.toString(),'; path=/; expires=Thu, 01-Jan-2090 00:00:01 GMT;'+secure].join('');document.cookie=cookie;return cookie},get:function(name){let result=document.cookie.match(new RegExp(name+'=([^;]+)'));if(result){try{result=JSON.parse(result[1])}catch(e){result=result[1]||!1}
return result}
return!1},delete:function(name){document.cookie=[name,'=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path=/; domain=.',window.location.host.toString()].join('');return!0}}
cookie.remove=cookie.delete;window.cookie=cookie;window.get_data=function(key){if(storage_method!='cookie'){try{let data=localStorage.getItem(key);return data||!1}catch(e){let data=cookie.get(key);return data||!1}}
let data=cookie.get(key);return data||!1}
window.set_data=function(key,value){if(storage_method!='cookie'){try{localStorage.setItem(key,value);return localStorage.getItem(key)}catch(e){cookie.set(key,value);return cookie.get(key)}}
cookie.set(key,value);return cookie.get(key)}
window.delete_data=function(key){if(storage_method!='cookie'){try{let deleted=localStorage.removeItem(key);return deleted}catch(e){cookie.delete(key);return!0}}
cookie.delete(key);return!0}})(jQuery);'use strict';(function(factory){if(typeof define==='function'&&define.amd){define(['jquery'],factory)}else if(typeof exports==='object'){module.exports=factory(require('jquery'))}else{factory(jQuery||Zepto)}}(function($){var Mask=function(el,mask,options){var p={invalid:[],getCaret:function(){try{var sel,pos=0,ctrl=el.get(0),dSel=document.selection,cSelStart=ctrl.selectionStart;if(dSel&&navigator.appVersion.indexOf('MSIE 10')===-1){sel=dSel.createRange();sel.moveStart('character',-p.val().length);pos=sel.text.length}
else if(cSelStart||cSelStart==='0'){pos=cSelStart}
return pos}catch(e){}},setCaret:function(pos){try{if(el.is(':focus')){var range,ctrl=el.get(0);if(ctrl.setSelectionRange){ctrl.focus();ctrl.setSelectionRange(pos,pos)}else{range=ctrl.createTextRange();range.collapse(!0);range.moveEnd('character',pos);range.moveStart('character',pos);range.select()}}}catch(e){}},events:function(){el.on('keydown.mask',function(e){el.data('mask-keycode',e.keyCode||e.which)}).on($.jMaskGlobals.useInput?'input.mask':'keyup.mask',p.behaviour).on('paste.mask drop.mask',function(){setTimeout(function(){el.keydown().keyup()},100)}).on('change.mask',function(){el.data('changed',!0)}).on('blur.mask',function(){if(oldValue!==p.val()&&!el.data('changed')){el.trigger('change')}
el.data('changed',!1)}).on('blur.mask',function(){oldValue=p.val()}).on('focus.mask',function(e){if(options.selectOnFocus===!0){$(e.target).select()}}).on('focusout.mask',function(){if(options.clearIfNotMatch&&!regexMask.test(p.val())){p.val('')}})},getRegexMask:function(){var maskChunks=[],translation,pattern,optional,recursive,oRecursive,r;for(var i=0;i<mask.length;i++){translation=jMask.translation[mask.charAt(i)];if(translation){pattern=translation.pattern.toString().replace(/.{1}$|^.{1}/g,'');optional=translation.optional;recursive=translation.recursive;if(recursive){maskChunks.push(mask.charAt(i));oRecursive={digit:mask.charAt(i),pattern:pattern}}else{maskChunks.push(!optional&&!recursive?pattern:(pattern+'?'))}}else{maskChunks.push(mask.charAt(i).replace(/[-\/\\^$*+?.()|[\]{}]/g,'\\$&'))}}
r=maskChunks.join('');if(oRecursive){r=r.replace(new RegExp('('+oRecursive.digit+'(.*'+oRecursive.digit+')?)'),'($1)?').replace(new RegExp(oRecursive.digit,'g'),oRecursive.pattern)}
return new RegExp(r)},destroyEvents:function(){el.off(['input','keydown','keyup','paste','drop','blur','focusout',''].join('.mask '))},val:function(v){var isInput=el.is('input'),method=isInput?'val':'text',r;if(arguments.length>0){if(el[method]()!==v){el[method](v)}
r=el}else{r=el[method]()}
return r},getMCharsBeforeCount:function(index,onCleanVal){for(var count=0,i=0,maskL=mask.length;i<maskL&&i<index;i++){if(!jMask.translation[mask.charAt(i)]){index=onCleanVal?index+1:index;count++}}
return count},caretPos:function(originalCaretPos,oldLength,newLength,maskDif){var translation=jMask.translation[mask.charAt(Math.min(originalCaretPos-1,mask.length-1))];return!translation?p.caretPos(originalCaretPos+1,oldLength,newLength,maskDif):Math.min(originalCaretPos+newLength-oldLength-maskDif,newLength)},behaviour:function(e){e=e||window.event;p.invalid=[];var keyCode=el.data('mask-keycode');if($.inArray(keyCode,jMask.byPassKeys)===-1){var caretPos=p.getCaret(),currVal=p.val(),currValL=currVal.length,newVal=p.getMasked(),newValL=newVal.length,maskDif=p.getMCharsBeforeCount(newValL-1)-p.getMCharsBeforeCount(currValL-1),changeCaret=caretPos<currValL;p.val(newVal);if(changeCaret){if(!(keyCode===8||keyCode===46)){caretPos=p.caretPos(caretPos,currValL,newValL,maskDif)}
p.setCaret(caretPos)}
return p.callbacks(e)}},getMasked:function(skipMaskChars,val){var buf=[],value=val===undefined?p.val():val+'',m=0,maskLen=mask.length,v=0,valLen=value.length,offset=1,addMethod='push',resetPos=-1,lastMaskChar,check;if(options.reverse){addMethod='unshift';offset=-1;lastMaskChar=0;m=maskLen-1;v=valLen-1;check=function(){return m>-1&&v>-1}}else{lastMaskChar=maskLen-1;check=function(){return m<maskLen&&v<valLen}}
while(check()){var maskDigit=mask.charAt(m),valDigit=value.charAt(v),translation=jMask.translation[maskDigit];if(translation){if(valDigit.match(translation.pattern)){buf[addMethod](valDigit);if(translation.recursive){if(resetPos===-1){resetPos=m}else if(m===lastMaskChar){m=resetPos-offset}
if(lastMaskChar===resetPos){m-=offset}}
m+=offset}else if(translation.optional){m+=offset;v-=offset}else if(translation.fallback){buf[addMethod](translation.fallback);m+=offset;v-=offset}else{p.invalid.push({p:v,v:valDigit,e:translation.pattern})}
v+=offset}else{if(!skipMaskChars){buf[addMethod](maskDigit)}
if(valDigit===maskDigit){v+=offset}
m+=offset}}
var lastMaskCharDigit=mask.charAt(lastMaskChar);if(maskLen===valLen+1&&!jMask.translation[lastMaskCharDigit]){buf.push(lastMaskCharDigit)}
return buf.join('')},callbacks:function(e){var val=p.val(),changed=val!==oldValue,defaultArgs=[val,e,el,options],callback=function(name,criteria,args){if(typeof options[name]==='function'&&criteria){options[name].apply(this,args)}};callback('onChange',changed===!0,defaultArgs);callback('onKeyPress',changed===!0,defaultArgs);callback('onComplete',val.length===mask.length,defaultArgs);callback('onInvalid',p.invalid.length>0,[val,e,el,p.invalid,options])}};el=$(el);var jMask=this,oldValue=p.val(),regexMask;mask=typeof mask==='function'?mask(p.val(),undefined,el,options):mask;jMask.mask=mask;jMask.options=options;jMask.remove=function(){var caret=p.getCaret();p.destroyEvents();p.val(jMask.getCleanVal());p.setCaret(caret-p.getMCharsBeforeCount(caret));return el};jMask.getCleanVal=function(){return p.getMasked(!0)};jMask.getMaskedVal=function(val){return p.getMasked(!1,val)};jMask.init=function(onlyMask){onlyMask=onlyMask||!1;options=options||{};jMask.clearIfNotMatch=$.jMaskGlobals.clearIfNotMatch;jMask.byPassKeys=$.jMaskGlobals.byPassKeys;jMask.translation=$.extend({},$.jMaskGlobals.translation,options.translation);jMask=$.extend(!0,{},jMask,options);regexMask=p.getRegexMask();if(onlyMask===!1){if(options.placeholder){el.attr('placeholder',options.placeholder)}
if(el.data('mask')){el.attr('autocomplete','off')}
p.destroyEvents();p.events();var caret=p.getCaret();p.val(p.getMasked());p.setCaret(caret+p.getMCharsBeforeCount(caret,!0))}else{p.events();p.val(p.getMasked())}};jMask.init(!el.is('input'))};$.maskWatchers={};var HTMLAttributes=function(){var input=$(this),options={},prefix='data-mask-',mask=input.attr('data-mask');if(input.attr(prefix+'reverse')){options.reverse=!0}
if(input.attr(prefix+'clearifnotmatch')){options.clearIfNotMatch=!0}
if(input.attr(prefix+'selectonfocus')==='true'){options.selectOnFocus=!0}
if(notSameMaskObject(input,mask,options)){return input.data('mask',new Mask(this,mask,options))}},notSameMaskObject=function(field,mask,options){options=options||{};var maskObject=$(field).data('mask'),stringify=JSON.stringify,value=$(field).val()||$(field).text();try{if(typeof mask==='function'){mask=mask(value)}
return typeof maskObject!=='object'||stringify(maskObject.options)!==stringify(options)||maskObject.mask!==mask}catch(e){}},eventSupported=function(eventName){var el=document.createElement('div'),isSupported;eventName='on'+eventName;isSupported=(eventName in el);if(!isSupported){el.setAttribute(eventName,'return;');isSupported=typeof el[eventName]==='function'}
el=null;return isSupported};$.fn.mask=function(mask,options){options=options||{};var selector=this.selector,globals=$.jMaskGlobals,interval=globals.watchInterval,watchInputs=options.watchInputs||globals.watchInputs,maskFunction=function(){if(notSameMaskObject(this,mask,options)){return $(this).data('mask',new Mask(this,mask,options))}};$(this).each(maskFunction);if(selector&&selector!==''&&watchInputs){clearInterval($.maskWatchers[selector]);$.maskWatchers[selector]=setInterval(function(){$(document).find(selector).each(maskFunction)},interval)}
return this};$.fn.masked=function(val){return this.data('mask').getMaskedVal(val)};$.fn.unmask=function(){clearInterval($.maskWatchers[this.selector]);delete $.maskWatchers[this.selector];return this.each(function(){var dataMask=$(this).data('mask');if(dataMask){dataMask.remove().removeData('mask')}})};$.fn.cleanVal=function(){return this.data('mask').getCleanVal()};$.applyDataMask=function(selector){selector=selector||$.jMaskGlobals.maskElements;var $selector=(selector instanceof $)?selector:$(selector);$selector.filter($.jMaskGlobals.dataMaskAttr).each(HTMLAttributes)};var globals={maskElements:'input,td,span,div',dataMaskAttr:'*[data-mask]',dataMask:!0,watchInterval:300,watchInputs:!0,useInput:eventSupported('input'),watchDataMask:!1,byPassKeys:[9,16,17,18,36,37,38,39,40,91],translation:{'0':{pattern:/\d/},'9':{pattern:/\d/,optional:!0},'#':{pattern:/\d/,recursive:!0},'A':{pattern:/[a-zA-Z0-9]/},'S':{pattern:/[a-zA-Z]/}}};$.jMaskGlobals=$.jMaskGlobals||{};globals=$.jMaskGlobals=$.extend(!0,{},globals,$.jMaskGlobals);if(globals.dataMask){$.applyDataMask()}
setInterval(function(){if($.jMaskGlobals.watchDataMask){$.applyDataMask()}},globals.watchInterval)}));(function($){$.validator.addMethod('emailTLD',function(v,e){var filter=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;return!!filter.test(v)},'*');$.validator.addMethod('phoneUS',function(v,e){v=v.replace(/\s+/g,"");return this.optional(e)||v.length>9&&v.match(/^(?:(?:\(?(?:00|\+)([1-4]\d\d|[1-9]\d?)\)?)?[\-\.\ \\\/]?)?((?:\(?\d{1,}\)?[\-\.\ \\\/]?){0,})(?:[\-\.\ \\\/]?(?:#|ext\.?|extension|x)[\-\.\ \\\/]?(\d+))?$/i)},'*');$.validator.addMethod("dob",function(value,element){var minDate=Date.parse("01/01/1910");var today=new Date();var DOB=Date.parse(value);if((DOB<=today&&DOB>=minDate)){return!0}
else{return!1}});let validator=$('form#form_'+__va.name).validate({ignore:':hidden:not([name="g-recaptcha-response"]):not(input[type="radio"]):not(input[type="checkbox"]):not([id="office_preference"])',errorPlacement:function(error,element){$(element).closest('.row-item').find('.tooltip').html($(error).html())},submitHandler:function(form){window.last_form_executed=form;grecaptcha.execute()},highlight:function(element,errorClass,validClass){$(element).closest('.row-item').find('.tooltip').removeClass('hidden');$(element).closest('.row-item').addClass('error');$(element).addClass('error')},unhighlight:function(element,errorClass,validClass){$(element).closest('.row-item').find('.tooltip').addClass('hidden');$(element).closest('.row-item').removeClass('error');$(element).removeClass('error')},invalidHandler:function(form,validator){let target=$(validator.errorList[0].element).attr('type')=='hidden'?$(validator.errorList[0].element).closest('.row-item'):$(validator.errorList[0].element),adminbar=($('#wpadminbar').outerHeight()||0),header=$(window).width()<=782?($('#mobile-navigation').outerHeight()||0):($('section.header > .content').outerHeight()||0),utility=($('section.header-utility').outerHeight()||0),offset=Math.floor(target.offset().top-header-utility-adminbar-20)
$('html,body').animate({scrollTop:offset},300)},rules:__va.rules,messages:__va.messages});function getParameterByName(name){name=name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");var regexS="[\\?&]"+name+"=([^&#]*)";var regex=new RegExp(regexS);var results=regex.exec(window.location.href);if(results==null)
return "";else return decodeURIComponent(results[1].replace(/\+/g," "))}
function getReferralSource(){if(getParameterByName('gclid').length>0||document.location.hostname.indexOf(getParameterByName('scid').length)>0||getParameterByName('utm_source').toLowerCase()=='reachlocal'||getParameterByName('utm_medium').toLowerCase()=='cpc')return 'Google (PPC)';else if(document.referrer.toLowerCase().indexOf('linkedin.com')>=0||getParameterByName('utm_source').toLowerCase()=='linkedin')return 'LinkedIn';else if(getParameterByName('utm_source').toLowerCase()=='facebook'||document.referrer.toLowerCase().indexOf('facebook.com')>=0)return 'Facebook';return 'Web'}
if(getParameterByName('utm_source').toLowerCase().length>0){$('input[name="utm_source"]').val(getParameterByName('utm_source').toLowerCase());$('input[name="utm_medium"]').val(getParameterByName('utm_medium').toLowerCase());$('input[name="utm_campaign"]').val(getParameterByName('utm_campaign').toLowerCase());$('input[name="utm_term"]').val(getParameterByName('utm_term').toLowerCase());$('input[name="utm_content"]').val(getParameterByName('utm_content').toLowerCase())}})(jQuery);function InfoBox(t){t=t||{},google.maps.OverlayView.apply(this,arguments),this.content_=t.content||"",this.disableAutoPan_=t.disableAutoPan||!1,this.maxWidth_=t.maxWidth||0,this.pixelOffset_=t.pixelOffset||new google.maps.Size(0,0),this.position_=t.position||new google.maps.LatLng(0,0),this.zIndex_=t.zIndex||null,this.boxClass_=t.boxClass||"infoBox",this.boxStyle_=t.boxStyle||{},this.closeBoxMargin_=t.closeBoxMargin||"2px",this.closeBoxURL_=t.closeBoxURL||"http://www.google.com/intl/en_us/mapfiles/close.gif",""===t.closeBoxURL&&(this.closeBoxURL_=""),this.infoBoxClearance_=t.infoBoxClearance||new google.maps.Size(1,1),"undefined"==typeof t.visible&&("undefined"==typeof t.isHidden?t.visible=!0:t.visible=!t.isHidden),this.isHidden_=!t.visible,this.alignBottom_=t.alignBottom||!1,this.pane_=t.pane||"floatPane",this.enableEventPropagation_=t.enableEventPropagation||!1,this.div_=null,this.closeListener_=null,this.moveListener_=null,this.mapListener_=null,this.contextListener_=null,this.eventListeners_=null,this.fixedWidthSet_=null}InfoBox.prototype=new google.maps.OverlayView,InfoBox.prototype.createInfoBoxDiv_=function(){var t,e,i,o=this,s=function(t){t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation()},n=function(t){t.returnValue=!1,t.preventDefault&&t.preventDefault(),o.enableEventPropagation_||s(t)};if(!this.div_){if(this.div_=document.createElement("div"),this.setBoxStyle_(),"undefined"==typeof this.content_.nodeType?this.div_.innerHTML=this.getCloseBoxImg_()+this.content_:(this.div_.innerHTML=this.getCloseBoxImg_(),this.div_.appendChild(this.content_)),this.getPanes()[this.pane_].appendChild(this.div_),this.addClickHandler_(),this.div_.style.width?this.fixedWidthSet_=!0:0!==this.maxWidth_&&this.div_.offsetWidth>this.maxWidth_?(this.div_.style.width=this.maxWidth_,this.div_.style.overflow="auto",this.fixedWidthSet_=!0):(i=this.getBoxWidths_(),this.div_.style.width=this.div_.offsetWidth-i.left-i.right+"px",this.fixedWidthSet_=!1),this.panBox_(this.disableAutoPan_),!this.enableEventPropagation_){for(this.eventListeners_=[],e=["mousedown","mouseover","mouseout","mouseup","click","dblclick","touchstart","touchend","touchmove"],t=0;t<e.length;t++)this.eventListeners_.push(google.maps.event.addDomListener(this.div_,e[t],s));this.eventListeners_.push(google.maps.event.addDomListener(this.div_,"mouseover",function(t){this.style.cursor="default"}))}this.contextListener_=google.maps.event.addDomListener(this.div_,"contextmenu",n),google.maps.event.trigger(this,"domready")}},InfoBox.prototype.getCloseBoxImg_=function(){var t="";return""!==this.closeBoxURL_&&(t="<img",t+=" src='"+this.closeBoxURL_+"'",t+=" align=right",t+=" style='",t+=" position: relative;",t+=" cursor: pointer;",t+=" margin: "+this.closeBoxMargin_+";",t+="'>"),t},InfoBox.prototype.addClickHandler_=function(){var t;""!==this.closeBoxURL_?(t=this.div_.firstChild,this.closeListener_=google.maps.event.addDomListener(t,"click",this.getCloseClickHandler_())):this.closeListener_=null},InfoBox.prototype.getCloseClickHandler_=function(){var t=this;return function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),google.maps.event.trigger(t,"closeclick"),t.close()}},InfoBox.prototype.panBox_=function(t){var e,i,o=0,s=0;if(!t&&(e=this.getMap(),e instanceof google.maps.Map)){e.getBounds().contains(this.position_)||e.setCenter(this.position_),i=e.getBounds();var n=e.getDiv(),h=n.offsetWidth,d=n.offsetHeight,l=this.pixelOffset_.width,r=this.pixelOffset_.height,a=this.div_.offsetWidth,p=this.div_.offsetHeight,_=this.infoBoxClearance_.width,f=this.infoBoxClearance_.height,v=this.getProjection().fromLatLngToContainerPixel(this.position_);if(v.x<-l+_?o=v.x+l-_:v.x+a+l+_>h&&(o=v.x+a+l+_-h),this.alignBottom_?v.y<-r+f+p?s=v.y+r-f-p:v.y+r+f>d&&(s=v.y+r+f-d):v.y<-r+f?s=v.y+r-f:v.y+p+r+f>d&&(s=v.y+p+r+f-d),0!==o||0!==s){e.getCenter();e.panBy(o,s)}}},InfoBox.prototype.setBoxStyle_=function(){var t,e;if(this.div_){this.div_.className=this.boxClass_,this.div_.style.cssText="",e=this.boxStyle_;for(t in e)e.hasOwnProperty(t)&&(this.div_.style[t]=e[t]);this.div_.style.WebkitTransform="translateZ(0)","undefined"!=typeof this.div_.style.opacity&&""!==this.div_.style.opacity&&(this.div_.style.MsFilter='"progid:DXImageTransform.Microsoft.Alpha(Opacity='+100*this.div_.style.opacity+')"',this.div_.style.filter="alpha(opacity="+100*this.div_.style.opacity+")"),this.div_.style.position="absolute",this.div_.style.visibility="hidden",null!==this.zIndex_&&(this.div_.style.zIndex=this.zIndex_)}},InfoBox.prototype.getBoxWidths_=function(){var t,e={top:0,bottom:0,left:0,right:0},i=this.div_;return document.defaultView&&document.defaultView.getComputedStyle?(t=i.ownerDocument.defaultView.getComputedStyle(i,""),t&&(e.top=parseInt(t.borderTopWidth,10)||0,e.bottom=parseInt(t.borderBottomWidth,10)||0,e.left=parseInt(t.borderLeftWidth,10)||0,e.right=parseInt(t.borderRightWidth,10)||0)):document.documentElement.currentStyle&&i.currentStyle&&(e.top=parseInt(i.currentStyle.borderTopWidth,10)||0,e.bottom=parseInt(i.currentStyle.borderBottomWidth,10)||0,e.left=parseInt(i.currentStyle.borderLeftWidth,10)||0,e.right=parseInt(i.currentStyle.borderRightWidth,10)||0),e},InfoBox.prototype.onRemove=function(){this.div_&&(this.div_.parentNode.removeChild(this.div_),this.div_=null)},InfoBox.prototype.draw=function(){this.createInfoBoxDiv_();var t=this.getProjection().fromLatLngToDivPixel(this.position_);this.div_.style.left=t.x+this.pixelOffset_.width+"px",this.alignBottom_?this.div_.style.bottom=-(t.y+this.pixelOffset_.height)+"px":this.div_.style.top=t.y+this.pixelOffset_.height+"px",this.isHidden_?this.div_.style.visibility="hidden":this.div_.style.visibility="visible"},InfoBox.prototype.setOptions=function(t){"undefined"!=typeof t.boxClass&&(this.boxClass_=t.boxClass,this.setBoxStyle_()),"undefined"!=typeof t.boxStyle&&(this.boxStyle_=t.boxStyle,this.setBoxStyle_()),"undefined"!=typeof t.content&&this.setContent(t.content),"undefined"!=typeof t.disableAutoPan&&(this.disableAutoPan_=t.disableAutoPan),"undefined"!=typeof t.maxWidth&&(this.maxWidth_=t.maxWidth),"undefined"!=typeof t.pixelOffset&&(this.pixelOffset_=t.pixelOffset),"undefined"!=typeof t.alignBottom&&(this.alignBottom_=t.alignBottom),"undefined"!=typeof t.position&&this.setPosition(t.position),"undefined"!=typeof t.zIndex&&this.setZIndex(t.zIndex),"undefined"!=typeof t.closeBoxMargin&&(this.closeBoxMargin_=t.closeBoxMargin),"undefined"!=typeof t.closeBoxURL&&(this.closeBoxURL_=t.closeBoxURL),"undefined"!=typeof t.infoBoxClearance&&(this.infoBoxClearance_=t.infoBoxClearance),"undefined"!=typeof t.isHidden&&(this.isHidden_=t.isHidden),"undefined"!=typeof t.visible&&(this.isHidden_=!t.visible),"undefined"!=typeof t.enableEventPropagation&&(this.enableEventPropagation_=t.enableEventPropagation),this.div_&&this.draw()},InfoBox.prototype.setContent=function(t){this.content_=t,this.div_&&(this.closeListener_&&(google.maps.event.removeListener(this.closeListener_),this.closeListener_=null),this.fixedWidthSet_||(this.div_.style.width=""),"undefined"==typeof t.nodeType?this.div_.innerHTML=this.getCloseBoxImg_()+t:(this.div_.innerHTML=this.getCloseBoxImg_(),this.div_.appendChild(t)),this.fixedWidthSet_||(this.div_.style.width=this.div_.offsetWidth+"px","undefined"==typeof t.nodeType?this.div_.innerHTML=this.getCloseBoxImg_()+t:(this.div_.innerHTML=this.getCloseBoxImg_(),this.div_.appendChild(t))),this.addClickHandler_()),google.maps.event.trigger(this,"content_changed")},InfoBox.prototype.setPosition=function(t){this.position_=t,this.div_&&this.draw(),google.maps.event.trigger(this,"position_changed")},InfoBox.prototype.setZIndex=function(t){this.zIndex_=t,this.div_&&(this.div_.style.zIndex=t),google.maps.event.trigger(this,"zindex_changed")},InfoBox.prototype.setVisible=function(t){this.isHidden_=!t,this.div_&&(this.div_.style.visibility=this.isHidden_?"hidden":"visible")},InfoBox.prototype.getContent=function(){return this.content_},InfoBox.prototype.getPosition=function(){return this.position_},InfoBox.prototype.getZIndex=function(){return this.zIndex_},InfoBox.prototype.getVisible=function(){var t;return t="undefined"==typeof this.getMap()||null===this.getMap()?!1:!this.isHidden_},InfoBox.prototype.show=function(){this.isHidden_=!1,this.div_&&(this.div_.style.visibility="visible")},InfoBox.prototype.hide=function(){this.isHidden_=!0,this.div_&&(this.div_.style.visibility="hidden")},InfoBox.prototype.open=function(t,e){var i=this;e&&(this.position_=e.getPosition(),this.moveListener_=google.maps.event.addListener(e,"position_changed",function(){i.setPosition(this.getPosition())}),this.mapListener_=google.maps.event.addListener(e,"map_changed",function(){i.setMap(this.map)})),this.setMap(t),this.div_&&this.panBox_()},InfoBox.prototype.close=function(){var t;if(this.closeListener_&&(google.maps.event.removeListener(this.closeListener_),this.closeListener_=null),this.eventListeners_){for(t=0;t<this.eventListeners_.length;t++)google.maps.event.removeListener(this.eventListeners_[t]);this.eventListeners_=null}this.moveListener_&&(google.maps.event.removeListener(this.moveListener_),this.moveListener_=null),this.mapListener_&&(google.maps.event.removeListener(this.mapListener_),this.mapListener_=null),this.contextListener_&&(google.maps.event.removeListener(this.contextListener_),this.contextListener_=null),this.setMap(null)};(function($){let
within_miles=[5,10,15,20,25,30,40,50,60],within_max_offices=3,map_padding=$('body').hasClass('page-template-bio')?0:46,map_object=null,info_box={opened:null,opening:!1,entered:!1},isIdle=!1,coordinates=null,last_search_args=null,internal_marker=!1,location_marker=92,location_marker_small=20,miles_to_meters=1609.34,info_boxes=[],map_markers=[],active_offices=[],current_zoom=0,initial={searched:!1,selected_location:map_data.selected_location||!1,panBy_x:$('body').hasClass('page-template-bio')?0:-100,panBy_y:$('body').hasClass('page-template-bio')?0:-80,zoom:7.5},mouse={x:!1,y:!1,timer:!1,moved:!1,info_box_entered:!1},lat_long_bounds=new google.maps.LatLngBounds(),geocoder=new google.maps.Geocoder,autocomplete=!1,autocomplete_element=$('#location_search_address'),current_location=$('.current-location'),initial_coordinates=!1,throttle_scroll_position=0,is_throttling=!1,interaction=!1,pan_by_search=(map_data.pan_x_search||!1);function RichMarker(a){this.ready_=!1,this.dragging_=!1,a.visible==void 0&&(a.visible=!0),a.shadow==void 0&&(a.shadow='7px -3px 5px rgba(88,88,88,0.7)'),a.anchor==void 0&&(a.anchor=RichMarkerPosition.BOTTOM),this.setValues(a||{})}RichMarker.prototype=new google.maps.OverlayView,window.RichMarker=RichMarker,RichMarker.prototype.getVisible=function(){return this.get('visible')},RichMarker.prototype.getVisible=RichMarker.prototype.getVisible,RichMarker.prototype.setVisible=function(a){this.set('visible',a)},RichMarker.prototype.setVisible=RichMarker.prototype.setVisible,RichMarker.prototype.visible_changed=function(){this.ready_&&(this.markerWrapper_.style.display=this.getVisible()?'':'none',this.draw())},RichMarker.prototype.visible_changed=RichMarker.prototype.visible_changed,RichMarker.prototype.setFlat=function(a){this.set('flat',!!a)},RichMarker.prototype.setFlat=RichMarker.prototype.setFlat,RichMarker.prototype.getFlat=function(){return this.get('flat')},RichMarker.prototype.getFlat=RichMarker.prototype.getFlat,RichMarker.prototype.getWidth=function(){return this.get('width')},RichMarker.prototype.getWidth=RichMarker.prototype.getWidth,RichMarker.prototype.getHeight=function(){return this.get('height')},RichMarker.prototype.getHeight=RichMarker.prototype.getHeight,RichMarker.prototype.setShadow=function(a){this.set('shadow',a),this.flat_changed()},RichMarker.prototype.setShadow=RichMarker.prototype.setShadow,RichMarker.prototype.getShadow=function(){return this.get('shadow')},RichMarker.prototype.getShadow=RichMarker.prototype.getShadow,RichMarker.prototype.flat_changed=function(){this.ready_&&(this.markerWrapper_.style.boxShadow=this.markerWrapper_.style.webkitBoxShadow=this.markerWrapper_.style.MozBoxShadow=this.getFlat()?'':this.getShadow())},RichMarker.prototype.flat_changed=RichMarker.prototype.flat_changed,RichMarker.prototype.setZIndex=function(a){this.set('zIndex',a)},RichMarker.prototype.setZIndex=RichMarker.prototype.setZIndex,RichMarker.prototype.getZIndex=function(){return this.get('zIndex')},RichMarker.prototype.getZIndex=RichMarker.prototype.getZIndex,RichMarker.prototype.zIndex_changed=function(){this.getZIndex()&&this.ready_&&(this.markerWrapper_.style.zIndex=this.getZIndex())},RichMarker.prototype.zIndex_changed=RichMarker.prototype.zIndex_changed,RichMarker.prototype.getDraggable=function(){return this.get('draggable')},RichMarker.prototype.getDraggable=RichMarker.prototype.getDraggable,RichMarker.prototype.setDraggable=function(a){this.set('draggable',!!a)},RichMarker.prototype.setDraggable=RichMarker.prototype.setDraggable,RichMarker.prototype.draggable_changed=function(){this.ready_&&(this.getDraggable()?this.addDragging_(this.markerWrapper_):this.removeDragListeners_())},RichMarker.prototype.draggable_changed=RichMarker.prototype.draggable_changed,RichMarker.prototype.getPosition=function(){return this.get('position')},RichMarker.prototype.getPosition=RichMarker.prototype.getPosition,RichMarker.prototype.setPosition=function(a){this.set('position',a)},RichMarker.prototype.setPosition=RichMarker.prototype.setPosition,RichMarker.prototype.position_changed=function(){this.draw()},RichMarker.prototype.position_changed=RichMarker.prototype.position_changed,RichMarker.prototype.getAnchor=function(){return this.get('anchor')},RichMarker.prototype.getAnchor=RichMarker.prototype.getAnchor,RichMarker.prototype.setAnchor=function(a){this.set('anchor',a)},RichMarker.prototype.setAnchor=RichMarker.prototype.setAnchor,RichMarker.prototype.anchor_changed=function(){this.draw()},RichMarker.prototype.anchor_changed=RichMarker.prototype.anchor_changed,RichMarker.prototype.htmlToDocumentFragment_=function(a){var b=document.createElement('DIV');if(b.innerHTML=a,1==b.childNodes.length)return b.removeChild(b.firstChild);for(var c=document.createDocumentFragment();b.firstChild;)c.appendChild(b.firstChild);return c},RichMarker.prototype.removeChildren_=function(a){if(a)for(var b;b=a.firstChild;)a.removeChild(b)},RichMarker.prototype.setContent=function(a){this.set('content',a)},RichMarker.prototype.setContent=RichMarker.prototype.setContent,RichMarker.prototype.getContent=function(){return this.get('content')},RichMarker.prototype.getContent=RichMarker.prototype.getContent,RichMarker.prototype.content_changed=function(){if(this.markerContent_){this.removeChildren_(this.markerContent_);var a=this.getContent();if(a){'string'==typeof a&&(a=a.replace(/^\s*([\S\s]*)\b\s*$/,'$1'),a=this.htmlToDocumentFragment_(a)),this.markerContent_.appendChild(a);for(var f,b=this,c=this.markerContent_.getElementsByTagName('IMG'),d=0;f=c[d];d++)google.maps.event.addDomListener(f,'mousedown',function(g){b.getDraggable()&&(g.preventDefault&&g.preventDefault(),g.returnValue=!1)}),google.maps.event.addDomListener(f,'load',function(){b.draw()});google.maps.event.trigger(this,'domready')}this.ready_&&this.draw()}},RichMarker.prototype.content_changed=RichMarker.prototype.content_changed,RichMarker.prototype.setCursor_=function(a){if(this.ready_){var b='';-1===navigator.userAgent.indexOf('Gecko/')?(('dragging'==a||'dragready'==a)&&(b='move'),'draggable'==a&&(b='pointer')):('dragging'==a&&(b='-moz-grabbing'),'dragready'==a&&(b='-moz-grab'),'draggable'==a&&(b='pointer')),this.markerWrapper_.style.cursor!=b&&(this.markerWrapper_.style.cursor=b)}},RichMarker.prototype.startDrag=function(a){if(this.getDraggable()&&!this.dragging_){this.dragging_=!0;var b=this.getMap();this.mapDraggable_=b.get('draggable'),b.set('draggable',!1),this.mouseX_=a.clientX,this.mouseY_=a.clientY,this.setCursor_('dragready'),this.markerWrapper_.style.MozUserSelect='none',this.markerWrapper_.style.KhtmlUserSelect='none',this.markerWrapper_.style.WebkitUserSelect='none',this.markerWrapper_.unselectable='on',this.markerWrapper_.onselectstart=function(){return!1},this.addDraggingListeners_(),google.maps.event.trigger(this,'dragstart')}},RichMarker.prototype.stopDrag=function(){!this.getDraggable()||this.dragging_&&(this.dragging_=!1,this.getMap().set('draggable',this.mapDraggable_),this.mouseX_=this.mouseY_=this.mapDraggable_=null,this.markerWrapper_.style.MozUserSelect='',this.markerWrapper_.style.KhtmlUserSelect='',this.markerWrapper_.style.WebkitUserSelect='',this.markerWrapper_.unselectable='off',this.markerWrapper_.onselectstart=function(){},this.removeDraggingListeners_(),this.setCursor_('draggable'),google.maps.event.trigger(this,'dragend'),this.draw())},RichMarker.prototype.drag=function(a){if(!this.getDraggable()||!this.dragging_)return void this.stopDrag();var b=this.mouseX_-a.clientX,c=this.mouseY_-a.clientY;this.mouseX_=a.clientX,this.mouseY_=a.clientY;var d=parseInt(this.markerWrapper_.style.left,10)-b,f=parseInt(this.markerWrapper_.style.top,10)-c;this.markerWrapper_.style.left=d+'px',this.markerWrapper_.style.top=f+'px';var g=this.getOffset_(),h=new google.maps.Point(d-g.width,f-g.height),j=this.getProjection();this.setPosition(j.fromDivPixelToLatLng(h)),this.setCursor_('dragging'),google.maps.event.trigger(this,'drag')},RichMarker.prototype.removeDragListeners_=function(){this.draggableListener_&&(google.maps.event.removeListener(this.draggableListener_),delete this.draggableListener_),this.setCursor_('')},RichMarker.prototype.addDragging_=function(a){if(a){var b=this;this.draggableListener_=google.maps.event.addDomListener(a,'mousedown',function(c){b.startDrag(c)}),this.setCursor_('draggable')}},RichMarker.prototype.addDraggingListeners_=function(){var a=this;this.markerWrapper_.setCapture?(this.markerWrapper_.setCapture(!0),this.draggingListeners_=[google.maps.event.addDomListener(this.markerWrapper_,'mousemove',function(b){a.drag(b)},!0),google.maps.event.addDomListener(this.markerWrapper_,'mouseup',function(){a.stopDrag(),a.markerWrapper_.releaseCapture()},!0)]):this.draggingListeners_=[google.maps.event.addDomListener(window,'mousemove',function(b){a.drag(b)},!0),google.maps.event.addDomListener(window,'mouseup',function(){a.stopDrag()},!0)]},RichMarker.prototype.removeDraggingListeners_=function(){if(this.draggingListeners_){for(var b,a=0;b=this.draggingListeners_[a];a++)google.maps.event.removeListener(b);this.draggingListeners_.length=0}},RichMarker.prototype.getOffset_=function(){var a=this.getAnchor();if('object'==typeof a)return a;var b=new google.maps.Size(0,0);if(!this.markerContent_)return b;var c=this.markerContent_.offsetWidth,d=this.markerContent_.offsetHeight;switch(a){case RichMarkerPosition.TOP_LEFT:break;case RichMarkerPosition.TOP:b.width=-c/2;break;case RichMarkerPosition.TOP_RIGHT:b.width=-c;break;case RichMarkerPosition.LEFT:b.height=-d/2;break;case RichMarkerPosition.MIDDLE:b.width=-c/2,b.height=-d/2;break;case RichMarkerPosition.RIGHT:b.width=-c,b.height=-d/2;break;case RichMarkerPosition.BOTTOM_LEFT:b.height=-d;break;case RichMarkerPosition.BOTTOM:b.width=-c/2,b.height=-d;break;case RichMarkerPosition.BOTTOM_RIGHT:b.width=-c,b.height=-d}return b},RichMarker.prototype.onAdd=function(){if(this.markerWrapper_||(this.markerWrapper_=document.createElement('DIV'),this.markerWrapper_.style.position='absolute'),this.getZIndex()&&(this.markerWrapper_.style.zIndex=this.getZIndex()),this.markerWrapper_.style.display=this.getVisible()?'':'none',!this.markerContent_){this.markerContent_=document.createElement('DIV'),this.markerWrapper_.appendChild(this.markerContent_);var a=this;google.maps.event.addDomListener(this.markerContent_,'click',function(c){google.maps.event.trigger(a,'click',c)}),google.maps.event.addDomListener(this.markerContent_,'mouseover',function(c){google.maps.event.trigger(a,'mouseover',c)}),google.maps.event.addDomListener(this.markerContent_,'mouseout',function(c){google.maps.event.trigger(a,'mouseout',c)})}this.ready_=!0,this.content_changed(),this.flat_changed(),this.draggable_changed();var b=this.getPanes();b&&b.overlayMouseTarget.appendChild(this.markerWrapper_),google.maps.event.trigger(this,'ready')},RichMarker.prototype.onAdd=RichMarker.prototype.onAdd,RichMarker.prototype.draw=function(){if(this.ready_&&!this.dragging_){var a=this.getProjection();if(a){var b=this.get('position'),c=a.fromLatLngToDivPixel(b),d=this.getOffset_();this.markerWrapper_.style.top=c.y+d.height+'px',this.markerWrapper_.style.left=c.x+d.width+'px';var f=this.markerContent_.offsetHeight,g=this.markerContent_.offsetWidth;g!=this.get('width')&&this.set('width',g),f!=this.get('height')&&this.set('height',f)}}},RichMarker.prototype.draw=RichMarker.prototype.draw,RichMarker.prototype.onRemove=function(){this.markerWrapper_&&this.markerWrapper_.parentNode&&this.markerWrapper_.parentNode.removeChild(this.markerWrapper_),this.removeDragListeners_()},RichMarker.prototype.onRemove=RichMarker.prototype.onRemove;var RichMarkerPosition={TOP_LEFT:1,TOP:2,TOP_RIGHT:3,LEFT:4,MIDDLE:5,RIGHT:6,BOTTOM_LEFT:7,BOTTOM:8,BOTTOM_RIGHT:9};window.RichMarkerPosition=RichMarkerPosition;String.prototype.format_phone=function(type){switch(type??'dot'){default:case 'dot':return this.replace(/(\d{3})(\d{3})(\d{4})/,'$1.$2.$3');break;case 'dash':return this.replace(/(\d{3})(\d{3})(\d{4})/,'$1.$2.$3');break;case 'parentheses':return this.replace(/(\d{3})(\d{3})(\d{4})/,'$1.$2.$3');break}}
function select_first_on_enter(input){var _addEventListener=(input.addEventListener)?input.addEventListener:input.attachEvent;function addEventListenerWrapper(type,listener){if(type=="keydown"){var orig_listener=listener;listener=function(event){var suggestion_selected=$(".pac-item-selected").length>0;if(event.which==13&&!suggestion_selected){var simulated_downarrow=$.Event("keydown",{keyCode:40,which:40});orig_listener.apply(input,[simulated_downarrow])}
orig_listener.apply(input,[event])}}
_addEventListener.apply(input,[type,listener])}
if(input.addEventListener){input.addEventListener=addEventListenerWrapper}else if(input.attachEvent){input.attachEvent=addEventListenerWrapper}}
function get_pan_x_from_search_box(){let selector=$('.widget.search .container');if(selector.length==0)return 0;return $('.widget.search .container').outerWidth()+$('.widget.search .container').get(0).getBoundingClientRect().left-0.5*$(window).width()}
function get_distance(a,b){return google.maps.geometry.spherical.computeDistanceBetween(a,b)/miles_to_meters}
function set_office_cookie(office_id){set_data('user-office',office_id)}
function get_office_cookie(){let office_id=get_data('user-office')||null;return(office_id===null?null:parseInt(office_id))}
function set_coordinate_cookie(lat,lng,query){delete_data('user-office');query=query||'';set_data('user-coordinates',{lat:lat,lng:lng,query:query})}
function get_coordinate_cookie(){let coords=get_data('user-coordinates');return(typeof coords==='object'&&coords!==null&&coords.hasOwnProperty('lat')&&coords.hasOwnProperty('lng')&&coords.hasOwnProperty('query'))?coords:null}
function geocode_autocomplete(){if(autocomplete_element.val().trim().length===0){default_view()}else{let addr,types=['(cities)'];if($.isNumeric(autocomplete_element.val())){if(autocomplete_element.val().length>2&&autocomplete_element.val().length<6)types=['(regions)'];addr=autocomplete_element.val()}else{addr=autocomplete_element.val()+' WI'}
geocoder.geocode({'address':addr},function(results,status){if(status=='OK'){let place=results[0];set_coordinate_cookie(place.geometry.location.lat(),place.geometry.location.lng(),autocomplete_element.val());on_location_search_success({lat:place.geometry.location.lat(),lng:place.geometry.location.lng()},!1)}else{on_location_search_error('Please try again by entering a valid city or ZIP code, or use the “Use Current Location” link. You may also browse all of our locations by state below.')}})}}
function autocomplete_place_changed(){let place=autocomplete.getPlace();if(typeof place!=='undefined'&&place.geometry){autocomplete_element.val(place.name);set_coordinate_cookie(place.geometry.location.lat(),place.geometry.location.lng(),place.name);on_location_search_success({lat:place.geometry.location.lat(),lng:place.geometry.location.lng()},!1);if(window.dataLayer||!1)window.dataLayer.push({event:'location-search'})}else{geocode_autocomplete()}}
function get_nearby_offices(offices,coordinates){let nearby_offices=[];$.each(within_miles,function(a,distance){$.each(offices,function(b,office){let office_minimum_count=3;if(window.location.hostname.indexOf('prairiegroveortho')>-1)office_minimum_count=1;if(nearby_offices.length>=office_minimum_count)return nearby_offices.map(function(office){delete office.added});office.distance=null;let office_distance=get_distance(new google.maps.LatLng(office.latitude,office.longitude),new google.maps.LatLng(coordinates.lat,coordinates.lng));if(office_distance<=distance){office.distance=office_distance;if(!office.added)nearby_offices.push(office);office.added=!0}})});$.each(nearby_offices,function(key,office){delete office.added});return nearby_offices}
function get_all_offices(offices,coordinates){$.each(offices,function(b,office){office.distance=null;let office_distance=get_distance(new google.maps.LatLng(office.latitude,office.longitude),new google.maps.LatLng(coordinates.lat,coordinates.lng));if(office_distance<=distance){office.distance=office_distance}});return offices}
window.on_form_dependency_loaded=function(){if(navigator.geolocation){$('.current-location:parent.hidden').removeClass('hidden');navigator.geolocation.getCurrentPosition(function(position){set_coordinate_cookie(position.coords.latitude,position.coords.longitude,'');on_location_search_success({lat:position.coords.latitude,lng:position.coords.longitude},!0)},function(error){})}}
function clear_error(){$('.current-location').addClass('hidden').html('')}
window.on_initial_search_coordinates=function(coordinates){let urlParams=new URLSearchParams(window.location.search);return on_initial_search(map_data.offices,coordinates)}
function is_external_url(url){return!1}
function sort_offices_by_distance(offices){offices.sort(function(a,b){return(+(a.distance>b.distance)||+(a.distance===b.distance)-1)});return offices}
function scroll_to_find_location(){scrollToPosition($('section.locations-preview').offset().top-$('section.header').outerHeight())}
window.on_location_search_error=function(message,close){message=message??'';close=close??!0;default_view();$('.office-results').html(message);if(close){close_search()}else{$('a.current-location').replaceWith($('<p class="current-location">').text(message))}}
window.on_location_search_success=function(coordinates,is_geolocation){if(window.dataLayer||!1)window.dataLayer.push({event:'location-search'});let nearby_offices=get_nearby_offices(map_data.offices,coordinates),searched_office=is_geolocation?'you':autocomplete_element.val();close_info_box();if(nearby_offices.length===0){if(is_geolocation){delete_data('user-office');delete_data('user-coordinates')}
on_location_search_error('No offices found near '+searched_office+'. Please search again.',!1)}else{clear_error();on_nearby_offices_found(nearby_offices,coordinates);close_search()}
last_search_args={query:searched_office,coordinates:coordinates,is_geolocation:is_geolocation,is_initial_load:initial.searched}}
function on_initial_search(offices,coordinates){if(offices.length==0)return!1;offices=sort_offices_by_distance(offices);reset_markers();close_info_box();initial.searched=!0;on_nearby_offices_found(offices,coordinates);last_search_args={offices:offices,coordinates:coordinates};let query='you';if(autocomplete_element.val().length)query=autocomplete_element.val();$('.office-results').html('We found '+offices.length+' location'+(offices.length==1?'':'s')+' near '+query);autocomplete_element.closest('.container.active').removeClass('active');$('#nearby-locations > li').first().addClass('active');$('#office').val($('#nearby-locations > li').first().data('office'));$('#detected-office').removeClass('hidden');$('#detected-office > div').html($('#nearby-locations li.active').html());return!0}
function on_nearby_offices_found(offices,coordinates){offices=sort_offices_by_distance(offices);internal_marker.setPosition(new google.maps.LatLng(coordinates.lat,coordinates.lng));$('body').removeClass('default-map-view');update_markers(offices);let query='you',in_bounds=get_markers_in_bounds();if(autocomplete_element.val().length)query=autocomplete_element.val();autocomplete_element.closest('.container.active').removeClass('active');$('.office-results').html('We found '+offices.length+' location'+(offices.length==1?'':'s')+' near '+query)}
function add_marker(marker){map_markers.setMap(map_object)}
function get_markers_in_bounds(){let bounds=map_object.getBounds(),in_bounds=[];for(i in map_markers){if(bounds.contains(map_markers[i].getPosition())){in_bounds.push(map_markers[i])}}
return in_bounds}
function get_markers_visible(){let markers=[];for(i in map_markers){if(map_markers[i].visible)markers.push(map_markers[i])}
return markers}
function update_marker_colors(marker){let marker_content=!1,info_content=!1;if((marker||!1)&&marker.getContent){let marker_content=$(marker.getContent()).toggleClass('disabled',!marker.active).get(0).outerHTML,info_content=$(marker.info.getContent()).toggleClass('disabled',!marker.active).get(0).outerHTML;marker.setContent(marker_content);marker.info.setContent(info_content)}else{for(i in map_markers){let marker_content=$(map_markers[i].getContent()).toggleClass('disabled',!map_markers[i].active).get(0).outerHTML,info_content=$(map_markers[i].info.getContent()).toggleClass('disabled',!map_markers[i].active).get(0).outerHTML;map_markers[i].setContent(marker_content);map_markers[i].info.setContent(info_content)}}}
function update_marker_sizes(marker){let small=map_object.getZoom()<10,content=!1;if((marker||!1)&&marker.getContent){content=$(marker.getContent());if(small){content.addClass('small').find('[class^="circle"]').removeClass('circle').addClass('circle-small')}else{content.removeClass('small').find('[class^="circle"]').removeClass('circle-small').addClass('circle')}
marker.setContent(content.get(0).outerHTML)}else{for(i in map_markers){content=$(map_markers[i].getContent());if(small){content.addClass('small').find('[class^="circle"]').removeClass('circle').addClass('circle-small')}else{content.removeClass('small').find('[class^="circle"]').removeClass('circle-small').addClass('circle')}
map_markers[i].setContent(content.get(0).outerHTML)}}}
window.open_info_windows=function(){if(initial.searched)return;for(i in info_boxes){if(!info_box.entered&&info_boxes[i].start_opened){open_info_box(info_boxes[i]);initial.searched=!0}}
initial.searched=!0}
function reset_markers(active){active=active??!1;for(i in map_markers){map_markers[i].active=active;update_marker_colors(map_markers[i]);map_markers[i].setVisible(!0)}}
function update_markers(offices){reset_markers();if(!offices.length)return!1;$('#'+map_data.selector).addClass('no-pointer-events');let bounds=new google.maps.LatLngBounds();if(info_box.opened!==null)close_info_box();$.each(offices,function(k,v){for(i in map_markers){if(parseInt(map_markers[i].office_id)==parseInt(v.ID)){map_markers[i].active=!0;update_marker_colors(map_markers[i])}else{map_markers[i].active=!1}}
bounds.extend(new google.maps.LatLng(parseFloat(v.latitude),parseFloat(v.longitude)))});internal_marker.setVisible(!0);bounds.extend(internal_marker.getPosition());let boundPadding=(offices.length===3?map_padding+46:map_padding);if(isIdle){map_object.fitBounds(bounds,boundPadding);map_object.setCenter(bounds.getCenter());if(map_object.getZoom()>12)map_object.setZoom(12);if(window.location.hostname.indexOf('prairiegroveortho')>-1)google.maps.event.addListenerOnce(map_object,'idle',function(){})}
else google.maps.event.addListenerOnce(map_object,'idle',function(){map_object.fitBounds(bounds,boundPadding);map_object.setCenter(bounds.getCenter());if(map_object.getZoom()>12)map_object.setZoom(12);if(window.location.hostname.indexOf('prairiegroveortho')>-1)google.maps.event.addListenerOnce(map_object,'idle',function(){if(map_object.getZoom()>12)map_object.setZoom(12)})});$('.location-count').html('We found '+offices.length+' but '+get_markers_in_bounds().length+' are visible');google.maps.event.addListenerOnce(map_object,'idle',function(){$('#'+map_data.selector).removeClass('no-pointer-events')})}
function default_view(){reset_markers(!0);$('body').addClass('default-map-view');if(info_box.opened!==null)close_info_box();internal_marker.setVisible(!1);update_marker_sizes();if(isIdle){map_object.setCenter(initial.bounds.getCenter());map_object.fitBounds(initial.bounds,initial.padding);$('#'+map_data.selector).removeClass('no-pointer-events')}
else google.maps.event.addListenerOnce(map_object,'idle',function(){map_object.setCenter(initial.bounds.getCenter());map_object.fitBounds(initial.bounds,initial.padding);$('#'+map_data.selector).removeClass('no-pointer-events')})}
window.close_info_box=function(){if(info_box.opened!==null){for(var i in map_markers){$('.info-window .slide').css('left',-200)}
info_box.opened.close();info_box.opened=null}}
function delete_markers(){for(m in map_markers){map_markers[m].map(null);map_markers[m].info.map(null)}}
function init_maps(){let offices=sort_offices_by_distance(map_data.offices);map_object=new google.maps.Map($('#'+map_data.selector)[0],{disablePanMomentum:!0,scrollwheel:!1,clickableIcons:!1,styles:[{"elementType":"geometry","stylers":[{"color":"#f5f5f5"}]},{"elementType":"labels.icon","stylers":[{"visibility":"off"}]},{"elementType":"labels.text.fill","stylers":[{"color":"#616161"}]},{"elementType":"labels.text.stroke","stylers":[{"color":"#f5f5f5"}]},{"featureType":"administrative","elementType":"labels","stylers":[{"visibility":"off"}]},{"featureType":"administrative.country","elementType":"labels","stylers":[{"visibility":"on"}]},{"featureType":"administrative.land_parcel","elementType":"labels","stylers":[{"visibility":"on"}]},{"featureType":"administrative.land_parcel","elementType":"labels.text.fill","stylers":[{"color":"#bdbdbd"}]},{"featureType":"administrative.locality","elementType":"labels","stylers":[{"visibility":"on"}]},{"featureType":"administrative.neighborhood","elementType":"labels","stylers":[{"visibility":"on"}]},{"featureType":"administrative.province","elementType":"labels","stylers":[{"visibility":"on"}]},{"featureType":"poi","elementType":"geometry","stylers":[{"color":"#eeeeee"}]},{"featureType":"poi","elementType":"labels.text.fill","stylers":[{"color":"#757575"}]},{"featureType":"poi.park","elementType":"geometry","stylers":[{"color":"#e5e5e5"}]},{"featureType":"poi.park","elementType":"labels.text.fill","stylers":[{"color":"#9e9e9e"}]},{"featureType":"road","elementType":"geometry","stylers":[{"color":"#ffffff"}]},{"featureType":"road.arterial","elementType":"labels.text.fill","stylers":[{"color":"#757575"}]},{"featureType":"road.highway","elementType":"geometry","stylers":[{"color":"#dadada"}]},{"featureType":"road.highway","elementType":"labels.text.fill","stylers":[{"color":"#616161"}]},{"featureType":"road.local","elementType":"labels.text.fill","stylers":[{"color":"#9e9e9e"}]},{"featureType":"transit.line","elementType":"geometry","stylers":[{"color":"#e5e5e5"}]},{"featureType":"transit.station","elementType":"geometry","stylers":[{"color":"#eeeeee"}]},{"featureType":"water","elementType":"geometry","stylers":[{"color":"#c9c9c9"}]},{"featureType":"water","elementType":"labels.text.fill","stylers":[{"color":"#9e9e9e"}]}],mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!1,panControl:!1,zoomControl:!0,minZoom:null,maxZoom:15,zoomControlOptions:{position:google.maps.ControlPosition.RIGHT_TOP}});$('#'+map_data.selector).data('map',map_object);map_object.addListener('idle',function(){isIdle=!0});map_object.addListener('bounds_changed',function(){isIdle=!1});map_object.addListener('zoom_changed',function(){if(current_zoom!=map_object.getZoom()){current_zoom=map_object.getZoom();$('#'+map_data.selector).removeClass(function(index,class_name){return(class_name.match(/(^|\s)zoom-\S+/g)||[]).join(' ')}).addClass('zoom-'+map_object.getZoom()).addClass('no-pointer-events');google.maps.event.addListenerOnce(map_object,'idle',function(){$('#'+map_data.selector).removeClass('no-pointer-events');update_marker_sizes()})}
if(!initial.hasOwnProperty('zoom'))initial.zoom=current_zoom});if(!initial.hasOwnProperty('center'))initial.center=map_object.getCenter();if(!initial.hasOwnProperty('panBy_x'))initial.panBy_x=-260;if(!initial.hasOwnProperty('panBy_y'))initial.panBy_y=-70;plot_markers(offices);window.map_markers=map_markers;window.info_boxes=info_boxes;window.map_object=map_object}
function coordinates_to_screen(coordinates){var topRight=map_object.getProjection().fromLatLngToPoint(map_object.getBounds().getNorthEast());var bottomLeft=map_object.getProjection().fromLatLngToPoint(map_object.getBounds().getSouthWest());var scale=Math.pow(2,map_object.getZoom());var worldPoint=map_object.getProjection().fromLatLngToPoint(coordinates);return new google.maps.Point((worldPoint.x-bottomLeft.x)*scale,(worldPoint.y-topRight.y)*scale)}
function plot_markers(offices){google.maps.event.addListenerOnce(map_object,'idle',function(){$('#'+map_data.selector).removeClass('no-pointer-events')});if(!offices.length)return!1;let bounds=new google.maps.LatLngBounds(),small=offices.length>3,marker_class='location-marker'+(small?' small':''),panBy_x=initial.panBy_x||0,panBy_y=initial.panBy_y||0,active_offices=initial.active||[];$.each(offices,function(k,v){let coordinates=new google.maps.LatLng(parseFloat(v.latitude),parseFloat(v.longitude)),info_box_content=map_data.show_detail?'<p><a href="tel:+1'+v.phone+'" class="white">'+v.phone.format_phone()+'</a></p>':'<p><a href="/'+v.relative_url+'/" class="cta text white">View Details</a></p>',info_box_html='<div class="info-window"><div class="slide" id="slide-'+v.ID+'"><a class="close-info-box" href="javascript:close_info_box()"><i class="icon-close"></i></a><p>'+v.post_title+'</p>'+info_box_content+'</div></div>';bounds.extend(coordinates);if($(window).width()>782)map_padding=0;let info=new InfoBox({content:info_box_html,disableAutoPan:!1,maxWidth:400,pixelOffset:new google.maps.Size(-92/2,-92/2),closeBoxURL:'',isHidden:!1,pane:'floatPane',enableEventPropagation:!0,zIndex:4,office_id:parseInt(v.ID)});let marker=new RichMarker({map:map_object,position:coordinates,draggable:!1,flat:!0,anchor:RichMarkerPosition.MIDDLE,content:'<div data-office="'+parseInt(v.ID)+'" class="'+marker_class+'"><div class="circle-small"><div class="center-mark"></div></div></div>',visible:!0,scaledSize:new google.maps.Size(20,20),office_id:parseInt(v.ID)});marker.start_opened=(parseInt(v.ID)===parseInt(initial.selected_location));info.start_opened=(parseInt(v.ID)===parseInt(initial.selected_location));info.marker=marker;marker.info=info;map_markers.push(marker);info_boxes.push(info);(function(marker,info,map){google.maps.event.addListener(marker,'mouseover',function(){interaction=!0;close_info_box();open_info_box(info);info_box.entered=!0})})(marker,info,map_object)});let boundPadding=(offices.length===3?map_padding+46:map_padding);if(isIdle){map_object.fitBounds(bounds,boundPadding);map_object.setCenter(bounds.getCenter())}
else google.maps.event.addListenerOnce(map_object,'idle',function(){map_object.fitBounds(bounds,boundPadding);map_object.setCenter(bounds.getCenter())});if(!initial.hasOwnProperty('bounds'))initial.bounds=bounds;if(!initial.hasOwnProperty('padding'))initial.padding=boundPadding;internal_marker=new RichMarker({map:map_object,position:bounds.getCenter(),draggable:!1,flat:!0,anchor:RichMarkerPosition.MIDDLE,content:'<div id="internal-marker" class="animating"></div><div id="internal-marker-effect"></div>',visible:!1});internal_marker.setZIndex(800);if(initial_coordinates!==!1)on_initial_search_coordinates(initial_coordinates);else if(on_form_dependency_loaded)on_form_dependency_loaded();window.map_object=map_object;if($(window).width()>782&&(panBy_x!=0||panBy_y!=0)){if(pan_by_search){let maximum_lat=-180;let maximum_marker=null;for(var i in map_markers){if(map_markers[i].getPosition().lat()>maximum_lat){maximum_lat=map_markers[i].getPosition().lat();maximum_marker=map_markers[i]}}
if(maximum_marker){google.maps.event.addListenerOnce(map_object,'idle',function(){let screen=coordinates_to_screen(maximum_marker.getPosition());panBy_x=$('.widget.search .container').outerWidth()+$('.widget.search .container').get(0).getBoundingClientRect().left-screen.x;map_object.panBy(-panBy_x-80,panBy_y)});google.maps.event.addListenerOnce(map_object,'idle',function(){let minimum_lat=180;let minimum_marker=null;for(var i in map_markers){if(map_markers[i].getPosition().lat()<minimum_lat){minimum_lat=map_markers[i].getPosition().lat();minimum_marker=map_markers[i];let screen=coordinates_to_screen(minimum_marker.getPosition());if(screen.x>$(window).width()&&map_markers.length<6){map_object.setZoom(map_object.getZoom()-1)}}}})}}
else{map_object.panBy(panBy_x,panBy_y)}}
if((map_data.is_bio||!1)){google.maps.event.addListenerOnce(map_object,'idle',function(){let maximum_lat=-180;let maximum_marker=null;for(var i in map_markers){if(map_markers[i].getPosition().lat()>maximum_lat){maximum_lat=map_markers[i].getPosition().lat();maximum_marker=map_markers[i]}}
let minimum_lat=180;let minimum_marker=null;for(var i in map_markers){if(map_markers[i].getPosition().lat()<minimum_lat){minimum_lat=map_markers[i].getPosition().lat();minimum_marker=map_markers[i]}}
let zoom_map=!1;if(maximum_marker){let screen=coordinates_to_screen(maximum_marker.getPosition());if((screen.x+240)>$(window).width()){zoom_map=!0}}
if(minimum_marker){let screen=coordinates_to_screen(minimum_marker.getPosition());if((screen.x-120)<$(window).width()){zoom_map=!0}}
if(minimum_marker&&map_markers.length<3){map_object.setZoom(map_object.getZoom()-1)}})}
$(window).trigger('scroll');return!0}
window.open_info_box=function(info,marker,map){info=info??info_box.opened;marker=marker??info.marker;map=map??map_object;info_box.opening=!0;setTimeout(function(){$('.info-window .slide').css('left',0);setTimeout(function(){info_box.opened=info;info_box.opening=!1},400)},20);info.open&&info.open(map,marker);$('.info-window .slide').css('left',0);setTimeout(function(){info_box.opened=info;info_box.opening=!1},300)}
window.close_info_box=function(info){info=info??info_box.opened;$('.info-window .slide').css('left',-200);for(i in map_markers){map_markers[i].info.close()}
info_box.opened=null}
$(document).on('keydown',function(e){if(e.keyCode==27)close_info_box()});$(document).on('mousemove',function(e){if(!info_box.opening&&info_box.entered&&info_box.opened){info_box.opened.close();info_box.opened=null;info_box.opening=!1}
mouse.x=e.clientX;mouse.y=e.clientY});$(document).on('mousemove','.info-window',function(e){info_box.entered=!0;info_box.opening=!1;interaction=!0;e.stopPropagation()});if($('#'+map_data.selector).length){window.addEventListener('load',function(){init_maps();if(autocomplete_element.length){autocomplete=new google.maps.places.Autocomplete(autocomplete_element.get(0),{types:['(regions)'],componentRestrictions:{country:'US'}});autocomplete.addListener('place_changed',autocomplete_place_changed)}})}
$(window).on('scroll',function(e){throttle_scroll_position=$(window).scrollTop();if(!is_throttling){window.requestAnimationFrame(function(){is_throttling=!1})}
is_throttling=!0});if(navigator.geolocation){$('.current-location:parent.hidden').removeClass('hidden')}
select_first_on_enter(autocomplete_element[0]);autocomplete_element.closest('.widget.search').on('click',function(){if(!$(this).hasClass('active'))$(this).addClass('active')});autocomplete_element.on('keyup',function(){if(!$(this).closest('.widget.search').hasClass('search-string')){$(this).closest('.widget.search').toggleClass('search-string',$(this).val().trim().length)}else if(!$(this).val().trim().length){$(this).closest('.widget.search').removeClass('search-string')}});autocomplete_element.on('blur',function(){if($(this).val().trim().length){$(this).closest('.widget.search.active').removeClass('active')}});autocomplete_element.closest('form').on('submit',function(e){e.preventDefault();autocomplete_element.closest('.widget.search').addClass('searched');$('#'+map_data.selector).addClass('no-pointer-events');if(last_search_args===null||last_search_args.query!=autocomplete_element.val().trim()){geocode_autocomplete()}
if(autocomplete_element.val().trim().length)close_search()});function close_search(){if(autocomplete_element.closest('.widget.search').hasClass('active')){autocomplete_element.closest('.widget.search').addClass('animating').removeClass('active');setTimeout(function(){autocomplete_element.closest('.widget.search').removeClass('animating');$('#'+map_data.selector).removeClass('no-pointer-events')},300)}}
current_location.on('click',function(e){e.preventDefault();navigator.geolocation.getCurrentPosition(function(position){set_coordinate_cookie(position.coords.latitude,position.coords.longitude,'');on_location_search_success({lat:position.coords.latitude,lng:position.coords.longitude},!0)},function(error){on_location_search_error('We were unable to find your current location. Please enter an address, city, or ZIP code.')})});window.max_scroll_progress=0;function get_marker_offset(map,marker){map=map??map_object;marker=marker??map_markers.filter(function(a){return a.start_opened})[0];if(marker.getPosition===undefined||map.getBounds()===undefined)return!1;let scale=Math.pow(2,map.getZoom()),nw=new google.maps.LatLng(map.getBounds().getNorthEast().lat(),map.getBounds().getSouthWest().lng()),world_nw=map.getProjection().fromLatLngToPoint(nw),world=map.getProjection().fromLatLngToPoint(marker.getPosition()),point=new google.maps.Point(Math.floor((world.x-world_nw.x)*scale),Math.floor((world.y-world_nw.y)*scale));return{x:Math.floor((world.x-world_nw.x)*scale),y:Math.floor((world.y-world_nw.y)*scale)}}
let scroll_position=$(window).scrollTop();$(window).on('scroll',function(){let marker=map_markers.filter(function(a){return a.start_opened})[0];if(marker===undefined)return;let marker_offset=get_marker_offset(map_object,marker),marker_height=map_object.getZoom()>9?92:20,marker_top=$('#'+map_data.selector).offset().top+marker_offset.y,marker_btm=marker_top+marker_height,win_top=$(window).scrollTop(),win_btm=$(window).scrollTop()+$(window).height(),direction=$(window).scrollTop()>scroll_position?'down':'up';if((win_top<=marker_btm&&win_btm>=marker_top&&direction=='up')||(win_btm>=marker_top&&win_top<=marker_btm&&direction=='down')){marker.scrolled_in=!0;open_info_windows()}else if(!info_box.entered&&marker.scrolled_in&&marker.info.getVisible()){delete marker.scrolled_in;initial.searched=!1;close_info_box(marker.info)}});if(window.Stickyfill||null)Stickyfill.add($('#'+map_data.selector))})(jQuery)